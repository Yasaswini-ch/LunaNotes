<div class="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center animate-fade-in">
  <div class="w-full max-w-lg p-8 rounded-2xl bg-[#fff5e4] dark:bg-[#481535] border-2 border-[#ee6983] dark:border-[#f6a5c0] shadow-lg text-center relative">
    
    <!-- Content changes based on step -->
    @if (currentStep() === 1) {
      <div>
        <h2 class="text-3xl font-bold mb-4 font-['Lexend_Deca']">Welcome to ðŸŒ™ LunaNotes!</h2>
        <p class="mb-6">Let's quickly show you how to turn your study chaos into clarity.</p>
      </div>
    } @else if (currentStep() === 2) {
      <div>
        <h2 class="text-2xl font-bold mb-4 font-['Lexend_Deca']">Step 1: Process Your Notes</h2>
        <p class="mb-6">Just paste any text into the box on the main page and hit "Process". Luna's AI will handle the rest!</p>
      </div>
    } @else if (currentStep() === 3) {
      <div>
        <h2 class="text-2xl font-bold mb-4 font-['Lexend_Deca']">Step 2: Explore Your Insights</h2>
        <p class="mb-6">After processing, you can view a summary, create a mindmap, or even chat with your notes to ask questions.</p>
      </div>
    } @else if (currentStep() === 4) {
       <div>
        <h2 class="text-2xl font-bold mb-4 font-['Lexend_Deca']">Step 3: Stay Consistent!</h2>
        <p class="mb-6">Use the Productivity Timer and track your Study Streak in the header to stay motivated. Happy learning!</p>
      </div>
    }

    <!-- Navigation & Progress -->
    <div class="flex items-center justify-between mt-8">
      @if (currentStep() > 1) {
        <button (click)="prevStep()" class="nav-btn">Back</button>
      } @else {
        <div></div> <!-- Placeholder for alignment -->
      }

      <!-- Progress Dots -->
      <div class="flex gap-2">
        @for (step of [1, 2, 3, 4]; track step) {
          <div class="w-3 h-3 rounded-full transition-colors" [class.active]="step === currentStep()"></div>
        }
      </div>

      @if (currentStep() < 4) {
        <button (click)="nextStep()" class="nav-btn next">Next</button>
      } @else {
        <button (click)="finishOnboarding()" class="nav-btn next">Let's Go!</button>
      }
    </div>
  </div>
</div>

<style>
.animate-fade-in {
  animation: fadeIn 0.3s ease-in-out;
}
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
.nav-btn {
  @apply px-4 py-2 rounded-lg font-semibold transition-colors;
}
.nav-btn.next {
  @apply bg-[#ee6983] text-white dark:bg-[#f6a5c0] dark:text-[#481535];
}
.nav-btn:not(.next) {
   @apply hover:bg-black/10 dark:hover:bg-white/10;
}
.active {
  @apply bg-[#ee6983] dark:bg-[#f6a5c0];
}
:not(.active) {
  @apply bg-[#ee6983]/30 dark:bg-[#f6a5c0]/30;
}
</style>
