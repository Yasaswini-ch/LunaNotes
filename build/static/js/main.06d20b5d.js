/*! For license information please see main.06d20b5d.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:u,props:i,_owner:s.current}}t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,g(w,v.prototype),w.isPureReactComponent=!0;var E=Array.isArray,S=Object.prototype.hasOwnProperty,_={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,r){var o,i={},a=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)S.call(t,o)&&!k.hasOwnProperty(o)&&(i[o]=t[o]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===i[o]&&(i[o]=l[o]);return{$$typeof:n,type:e,key:a,ref:s,props:i,_owner:_.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,o,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+T(l,0):i,E(a)?(o="",null!=e&&(o=e.replace(N,"$&/")+"/"),I(a,t,o,"",function(e){return e})):null!=a&&(C(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,o+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(N,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",E(e))for(var c=0;c<e.length;c++){var u=i+T(s=e[c],c);l+=I(s,t,o,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=I(s=s.value,t,o,u=i+T(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],o=0;return I(e,r,"","",function(e){return t.call(n,e,o++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},R={transition:null},D={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:R,ReactCurrentOwner:_};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=o,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=M,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=g({},e.props),i=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=_.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!k.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,a=o>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>i(l,n))c<o&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<o&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function E(e){if(m=!1,w(e),!g)if(null!==r(c))g=!0,R(S);else{var t=r(u);null!==t&&D(E,t.startTime-e)}}function S(e,n){g=!1,m&&(m=!1,y(C),C=-1),p=!0;var i=f;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var s=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&o(c),w(n)}else o(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&D(E,d.startTime-n),l=!1}return l}finally{h=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,k=!1,x=null,C=-1,N=5,T=-1;function I(){return!(t.unstable_now()-T<N)}function A(){if(null!==x){var e=t.unstable_now();T=e;var n=!0;try{n=x(!0,e)}finally{n?_():(k=!1,x=null)}}else k=!1}if("function"===typeof b)_=function(){b(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,O=P.port2;P.port1.onmessage=A,_=function(){O.postMessage(null)}}else _=function(){v(A,0)};function R(e){x=e,k||(k=!0,_())}function D(e,n){C=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,R(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,o,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(m?(y(C),C=-1):m=!0,D(E,i-a))):(e.sortIndex=s,n(c,e),g||p||(g=!0,R(S))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},330:(e,t,n)=>{var r=n(43);var o="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=r.useState,a=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(r){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),o=r[0].inst,u=r[1];return s(function(){o.value=n,o.getSnapshot=t,c(o)&&u({inst:o})},[e,n,t]),a(function(){return c(o)&&u({inst:o}),e(function(){c(o)&&u({inst:o})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},443:(e,t,n)=>{e.exports=n(717)},461:(e,t,n)=>{e.exports=n(330)},579:(e,t,n)=>{e.exports=n(153)},717:(e,t,n)=>{var r=n(43),o=n(461);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=o.useSyncExternalStore,s=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var d=s(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=c(function(){function e(e){if(!l){if(l=!0,a=e,e=r(e),void 0!==o&&h.hasValue){var t=h.value;if(o(t,e))return s=t}return s=e}if(t=s,i(a,e))return t;var n=r(e);return void 0!==o&&o(t,n)?(a=e,t):(a=e,s=n)}var a,s,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,o]);var f=a(e,d[0],d[1]);return l(function(){h.hasValue=!0,h.value=f},[f]),u(f),f}},730:(e,t,n)=>{var r=n(43),o=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,o,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var o=m.hasOwnProperty(t)?m[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),S=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),N=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var L,j=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function z(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var o=c.stack.split("\n"),i=r.stack.split("\n"),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(1!==a||1!==s)do{if(a--,0>--s||o[a]!==i[s]){var l="\n"+o[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function V(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case S:return"Portal";case x:return"Profiler";case k:return"StrictMode";case I:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(ka){return e.body}}function Y(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){$(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ie(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function Ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,_e=null,ke=null;function xe(e){if(e=wo(e)){if("function"!==typeof Se)throw Error(i(280));var t=e.stateNode;t&&(t=So(t),Se(e.stateNode,e.type,t))}}function Ce(e){_e?ke?ke.push(e):ke=[e]:_e=e}function Ne(){if(_e){var e=_e,t=ke;if(ke=_e=null,xe(e),t)for(e=0;e<t.length;e++)xe(t[e])}}function Te(e,t){return e(t)}function Ie(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Te(e,t,n)}finally{Ae=!1,(null!==_e||null!==ke)&&(Ie(),Ne())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=So(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Re=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Re=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Re=!1}function Me(e,t,n,r,o,i,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,je=null,Ue=!1,Fe=null,ze={onError:function(e){Le=!0,je=e}};function Ve(e,t,n,r,o,i,a,s,l){Le=!1,je=null,Me.apply(ze,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Be(e)!==e)throw Error(i(188))}function We(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(r=o.return)){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return Ke(o),e;if(a===r)return Ke(o),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=o,r=a;else{for(var s=!1,l=o.child;l;){if(l===n){s=!0,n=o,r=a;break}if(l===r){s=!0,r=o,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=o;break}if(l===r){s=!0,r=a,n=o;break}l=l.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e),null!==e?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ge=o.unstable_scheduleCallback,Xe=o.unstable_cancelCallback,Ye=o.unstable_shouldYield,Qe=o.unstable_requestPaint,$e=o.unstable_now,Je=o.unstable_getCurrentPriorityLevel,Ze=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~o;0!==s?r=dt(s):0!==(i&=a)&&(r=dt(i))}else 0!==(a=n&~o)?r=dt(a):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(i=t&-t)||16===o&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-at(t)),r|=e[n],t&=~o;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Et,St,_t,kt,xt,Ct=!1,Nt=[],Tt=null,It=null,At=null,Pt=new Map,Ot=new Map,Rt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Lt(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=wo(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function jt(e){var t=bo(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void xt(e.priority,function(){_t(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wo(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function zt(){Ct=!1,null!==Tt&&Ut(Tt)&&(Tt=null),null!==It&&Ut(It)&&(It=null),null!==At&&Ut(At)&&(At=null),Pt.forEach(Ft),Ot.forEach(Ft)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,zt)))}function Bt(e){function t(t){return Vt(t,e)}if(0<Nt.length){Vt(Nt[0],e);for(var n=1;n<Nt.length;n++){var r=Nt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Vt(Tt,e),null!==It&&Vt(It,e),null!==At&&Vt(At,e),Pt.forEach(t),Ot.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)jt(n),null===n.blockedOn&&Rt.shift()}var Ht=w.ReactCurrentBatchConfig,Kt=!0;function Wt(e,t,n,r){var o=bt,i=Ht.transition;Ht.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=o,Ht.transition=i}}function qt(e,t,n,r){var o=bt,i=Ht.transition;Ht.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=o,Ht.transition=i}}function Gt(e,t,n,r){if(Kt){var o=Yt(e,t,n,r);if(null===o)Kr(e,t,r,Xt,n),Mt(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return Tt=Lt(Tt,e,t,n,r,o),!0;case"dragenter":return It=Lt(It,e,t,n,r,o),!0;case"mouseover":return At=Lt(At,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return Pt.set(i,Lt(Pt.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Ot.set(i,Lt(Ot.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==o;){var i=wo(o);if(null!==i&&Et(i),null===(i=Yt(e,t,n,r))&&Kr(e,t,r,Xt,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Xt=null;function Yt(e,t,n,r){if(Xt=null,null!==(e=bo(e=Ee(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,o="value"in $t?$t.value:$t.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return Zt=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=j({},cn,{view:0,detail:0}),hn=on(dn),fn=j({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(fn),gn=on(j({},fn,{dataTransfer:0})),mn=on(j({},dn,{relatedTarget:0})),vn=on(j({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=j({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(yn),wn=on(j({},cn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function xn(){return kn}var Cn=j({},dn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=on(Cn),Tn=on(j({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=on(j({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),An=on(j({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=j({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=on(Pn),Rn=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Mn,jn=u&&(!Dn||Mn&&8<Mn&&11>=Mn),Un=String.fromCharCode(32),Fn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ce(r),0<(t=qr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Gn=null;function Xn(e){Ur(e,0)}function Yn(e){if(G(Eo(e)))return e}function Qn(e,t){if("change"===e)return t}var $n=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Gn=qn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Wn(t,Gn,e,Ee(e)),Pe(Xn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ir(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!d.call(t,o)||!sr(e[o],t[o]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=void 0===r.end?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=ur(n,i);var a=ur(n,r);o&&a&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,vr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==X(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=qr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function Er(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:Er("Animation","AnimationEnd"),animationiteration:Er("Animation","AnimationIteration"),animationstart:Er("Animation","AnimationStart"),transitionend:Er("Transition","TransitionEnd")},_r={},kr={};function xr(e){if(_r[e])return _r[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return _r[e]=n[t];return e}u&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Cr=xr("animationend"),Nr=xr("animationiteration"),Tr=xr("animationstart"),Ir=xr("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Ar.set(e,t),l(t,[e])}for(var Rr=0;Rr<Pr.length;Rr++){var Dr=Pr[Rr];Or(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Or(Cr,"onAnimationEnd"),Or(Nr,"onAnimationIteration"),Or(Tr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,a,s,l,c){if(Ve.apply(this,arguments),Le){if(!Le)throw Error(i(198));var u=je;Le=!1,je=null,Ue||(Ue=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==i&&o.isPropagationStopped())break e;jr(o,s,c),i=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==i&&o.isPropagationStopped())break e;jr(o,s,c),i=l}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Fr(e,t){var n=t[mo];void 0===n&&(n=t[mo]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Vr]){e[Vr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||zr(t,!1,e),zr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,zr("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Qt(t)){case 1:var o=Wt;break;case 4:o=qt;break;default:o=Gt}n=o.bind(null,t,n,e),o=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,o){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;a=a.return}for(;null!==s;){if(null===(a=bo(s)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}s=s.parentNode}}r=r.return}Pe(function(){var r=i,o=Ee(n),a=[];e:{var s=Ar.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Nn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Cr:case Nr:case Tr:l=vn;break;case Ir:l=An;break;case"scroll":l=hn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&(null!=(g=Oe(p,h))&&u.push(Wr(p,g,f)))),d)break;p=p.return}0<u.length&&(s=new l(s,c,null,n,o),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!bo(c)&&!c[go])&&(l||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?bo(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?s:Eo(l),f=null==c?s:Eo(c),(s=new u(g,p+"leave",l,n,o)).target=d,s.relatedTarget=f,g=null,bo(o)===r&&((u=new u(h,p+"enter",c,n,o)).target=f,u.relatedTarget=d,g=u),d=g,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,g=h;g;g=Gr(g))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)h=Gr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Xr(a,s,l,u,!1),null!==c&&null!==d&&Xr(a,d,c,u,!0)}if("select"===(l=(s=r?Eo(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=Qn;else if(Kn(s))if($n)m=ar;else{m=or;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ir);switch(m&&(m=m(e,r))?Wn(a,m,n,o):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?Eo(r):window,e){case"focusin":(Kn(v)||"true"===v.contentEditable)&&(mr=v,vr=r,yr=null);break;case"focusout":yr=vr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(a,n,o);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":wr(a,n,o)}var y;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(jn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(y=en()):(Jt="value"in($t=o)?$t.value:$t.textContent,Bn=!0)),0<(v=qr(r,b)).length&&(b=new wn(b,e,null,n,o),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=Vn(n))&&(b.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&zn(e,t)?(e=en(),Zt=Jt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(o=new wn("onBeforeInput","beforeinput",null,n,o),a.push({event:o,listeners:r}),o.data=y))}Ur(a,t)})}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=Oe(e,n))&&r.unshift(Wr(e,i,o)),null!=(i=Oe(e,t))&&r.push(Wr(e,i,o))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,o){for(var i=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,o?null!=(l=Oe(n,i))&&a.unshift(Wr(n,l,s)):o||null!=(l=Oe(n,i))&&a.push(Wr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Qr,"")}function Jr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(i(425))}function Zr(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,io="function"===typeof Promise?Promise:void 0,ao="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof io?function(e){return io.resolve(null).then(e).catch(so)}:ro;function so(e){setTimeout(function(){throw e})}function lo(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);Bt(t)}function co(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function uo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ho=Math.random().toString(36).slice(2),fo="__reactFiber$"+ho,po="__reactProps$"+ho,go="__reactContainer$"+ho,mo="__reactEvents$"+ho,vo="__reactListeners$"+ho,yo="__reactHandles$"+ho;function bo(e){var t=e[fo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[go]||n[fo]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=uo(e);null!==e;){if(n=e[fo])return n;e=uo(e)}return t}n=(e=n).parentNode}return null}function wo(e){return!(e=e[fo]||e[go])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Eo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function So(e){return e[po]||null}var _o=[],ko=-1;function xo(e){return{current:e}}function Co(e){0>ko||(e.current=_o[ko],_o[ko]=null,ko--)}function No(e,t){ko++,_o[ko]=e.current,e.current=t}var To={},Io=xo(To),Ao=xo(!1),Po=To;function Oo(e,t){var n=e.type.contextTypes;if(!n)return To;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ro(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Do(){Co(Ao),Co(Io)}function Mo(e,t,n){if(Io.current!==To)throw Error(i(168));No(Io,t),No(Ao,n)}function Lo(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(i(108,H(e)||"Unknown",o));return j({},n,r)}function jo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||To,Po=Io.current,No(Io,e),No(Ao,Ao.current),!0}function Uo(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Lo(e,t,Po),r.__reactInternalMemoizedMergedChildContext=e,Co(Ao),Co(Io),No(Io,e)):Co(Ao),No(Ao,n)}var Fo=null,zo=!1,Vo=!1;function Bo(e){null===Fo?Fo=[e]:Fo.push(e)}function Ho(){if(!Vo&&null!==Fo){Vo=!0;var e=0,t=bt;try{var n=Fo;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fo=null,zo=!1}catch(o){throw null!==Fo&&(Fo=Fo.slice(e+1)),Ge(Ze,Ho),o}finally{bt=t,Vo=!1}}return null}var Ko=[],Wo=0,qo=null,Go=0,Xo=[],Yo=0,Qo=null,$o=1,Jo="";function Zo(e,t){Ko[Wo++]=Go,Ko[Wo++]=qo,qo=e,Go=t}function ei(e,t,n){Xo[Yo++]=$o,Xo[Yo++]=Jo,Xo[Yo++]=Qo,Qo=e;var r=$o;e=Jo;var o=32-at(r)-1;r&=~(1<<o),n+=1;var i=32-at(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,$o=1<<32-at(t)+o|n<<o|r,Jo=i+e}else $o=1<<i|n<<o|r,Jo=e}function ti(e){null!==e.return&&(Zo(e,1),ei(e,1,0))}function ni(e){for(;e===qo;)qo=Ko[--Wo],Ko[Wo]=null,Go=Ko[--Wo],Ko[Wo]=null;for(;e===Qo;)Qo=Xo[--Yo],Xo[Yo]=null,Jo=Xo[--Yo],Xo[Yo]=null,$o=Xo[--Yo],Xo[Yo]=null}var ri=null,oi=null,ii=!1,ai=null;function si(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function li(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ri=e,oi=co(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ri=e,oi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qo?{id:$o,overflow:Jo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ri=e,oi=null,!0);default:return!1}}function ci(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ui(e){if(ii){var t=oi;if(t){var n=t;if(!li(e,t)){if(ci(e))throw Error(i(418));t=co(n.nextSibling);var r=ri;t&&li(e,t)?si(r,n):(e.flags=-4097&e.flags|2,ii=!1,ri=e)}}else{if(ci(e))throw Error(i(418));e.flags=-4097&e.flags|2,ii=!1,ri=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ri=e}function hi(e){if(e!==ri)return!1;if(!ii)return di(e),ii=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=oi)){if(ci(e))throw fi(),Error(i(418));for(;t;)si(e,t),t=co(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oi=co(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oi=null}}else oi=ri?co(e.stateNode.nextSibling):null;return!0}function fi(){for(var e=oi;e;)e=co(e.nextSibling)}function pi(){oi=ri=null,ii=!1}function gi(e){null===ai?ai=[e]:ai.push(e)}var mi=w.ReactCurrentBatchConfig;function vi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var o=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=o.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bi(e){return(0,e._init)(e._payload)}function wi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===_?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===O&&bi(i)===t.type)?((r=o(t,n.props)).ref=vi(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=vi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case E:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=vi(e,null,t),n.return=e,n;case S:return(t=Fc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Lc(t,e.mode,n,null)).return=e,t;yi(e,t)}return null}function f(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==o?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case E:return n.key===o?c(e,t,n,r):null;case S:return n.key===o?u(e,t,n,r):null;case O:return f(e,t,(o=n._init)(n._payload),r)}if(te(n)||M(n))return null!==o?null:d(e,t,n,r,null);yi(e,n)}return null}function p(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case E:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case O:return p(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||M(r))return d(t,e=e.get(n)||null,r,o,null);yi(t,r)}return null}function g(o,i,s,l){for(var c=null,u=null,d=i,g=i=0,m=null;null!==d&&g<s.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var v=f(o,d,s[g],l);if(null===v){null===d&&(d=m);break}e&&d&&null===v.alternate&&t(o,d),i=a(v,i,g),null===u?c=v:u.sibling=v,u=v,d=m}if(g===s.length)return n(o,d),ii&&Zo(o,g),c;if(null===d){for(;g<s.length;g++)null!==(d=h(o,s[g],l))&&(i=a(d,i,g),null===u?c=d:u.sibling=d,u=d);return ii&&Zo(o,g),c}for(d=r(o,d);g<s.length;g++)null!==(m=p(d,o,g,s[g],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),i=a(m,i,g),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(o,e)}),ii&&Zo(o,g),c}function m(o,s,l,c){var u=M(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,g=s,m=s=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var b=f(o,g,y.value,c);if(null===b){null===g&&(g=v);break}e&&g&&null===b.alternate&&t(o,g),s=a(b,s,m),null===d?u=b:d.sibling=b,d=b,g=v}if(y.done)return n(o,g),ii&&Zo(o,m),u;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=h(o,y.value,c))&&(s=a(y,s,m),null===d?u=y:d.sibling=y,d=y);return ii&&Zo(o,m),u}for(g=r(o,g);!y.done;m++,y=l.next())null!==(y=p(g,o,m,y.value,c))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),s=a(y,s,m),null===d?u=y:d.sibling=y,d=y);return e&&g.forEach(function(e){return t(o,e)}),ii&&Zo(o,m),u}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===_&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case E:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===_){if(7===u.tag){n(r,u.sibling),(i=o(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&bi(c)===u.type){n(r,u.sibling),(i=o(u,a.props)).ref=vi(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===_?((i=Lc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Mc(a.type,a.key,a.props,null,r.mode,l)).ref=vi(r,i,a),l.return=r,r=l)}return s(r);case S:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=o(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Fc(a,r.mode,l)).return=r,r=i}return s(r);case O:return e(r,i,(u=a._init)(a._payload),l)}if(te(a))return g(r,i,a,l);if(M(a))return m(r,i,a,l);yi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=o(i,a)).return=r,r=i):(n(r,i),(i=Uc(a,r.mode,l)).return=r,r=i),s(r)):n(r,i)}}var Ei=wi(!0),Si=wi(!1),_i=xo(null),ki=null,xi=null,Ci=null;function Ni(){Ci=xi=ki=null}function Ti(e){var t=_i.current;Co(_i),e._currentValue=t}function Ii(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ai(e,t){ki=e,Ci=xi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ws=!0),e.firstContext=null)}function Pi(e){var t=e._currentValue;if(Ci!==e)if(e={context:e,memoizedValue:t,next:null},null===xi){if(null===ki)throw Error(i(308));xi=e,ki.dependencies={lanes:0,firstContext:e}}else xi=xi.next=e;return t}var Oi=null;function Ri(e){null===Oi?Oi=[e]:Oi.push(e)}function Di(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,Ri(t)):(n.next=o.next,o.next=n),t.interleaved=n,Mi(e,r)}function Mi(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Li=!1;function ji(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ui(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Il)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Mi(e,n)}return null===(o=r.interleaved)?(t.next=t,Ri(r)):(t.next=o.next,o.next=t),r.interleaved=t,Mi(e,n)}function Vi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Bi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?o=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hi(e,t,n,r){var o=e.updateQueue;Li=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=o.baseState;for(a=0,u=c=l=null,s=i;;){var h=s.lane,f=s.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,g=s;switch(h=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(f,d,h):p)||void 0===h)break e;d=j({},d,h);break e;case 2:Li=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=o.effects)?o.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(h=s).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}if(null===u&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,null!==(t=o.shared.interleaved)){o=t;do{a|=o.lane,o=o.next}while(o!==t)}else null===i&&(o.shared.lanes=0);jl|=a,e.lanes=a,e.memoizedState=d}}function Ki(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!==typeof o)throw Error(i(191,o));o.call(r)}}}var Wi={},qi=xo(Wi),Gi=xo(Wi),Xi=xo(Wi);function Yi(e){if(e===Wi)throw Error(i(174));return e}function Qi(e,t){switch(No(Xi,t),No(Gi,e),No(qi,Wi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Co(qi),No(qi,t)}function $i(){Co(qi),Co(Gi),Co(Xi)}function Ji(e){Yi(Xi.current);var t=Yi(qi.current),n=le(t,e.type);t!==n&&(No(Gi,e),No(qi,n))}function Zi(e){Gi.current===e&&(Co(qi),Co(Gi))}var ea=xo(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var oa=w.ReactCurrentDispatcher,ia=w.ReactCurrentBatchConfig,aa=0,sa=null,la=null,ca=null,ua=!1,da=!1,ha=0,fa=0;function pa(){throw Error(i(321))}function ga(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,o,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oa.current=null===e||null===e.memoizedState?es:ts,e=n(r,o),da){a=0;do{if(da=!1,ha=0,25<=a)throw Error(i(301));a+=1,ca=la=null,t.updateQueue=null,oa.current=ns,e=n(r,o)}while(da)}if(oa.current=Za,t=null!==la&&null!==la.next,aa=0,ca=la=sa=null,ua=!1,t)throw Error(i(300));return e}function va(){var e=0!==ha;return ha=0,e}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?sa.memoizedState=ca=e:ca=ca.next=e,ca}function ba(){if(null===la){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?sa.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(i(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?sa.memoizedState=ca=e:ca=ca.next=e}return ca}function wa(e,t){return"function"===typeof t?t(e):t}function Ea(e){var t=ba(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=la,o=r.baseQueue,a=n.pending;if(null!==a){if(null!==o){var s=o.next;o.next=a.next,a.next=s}r.baseQueue=o=a,n.pending=null}if(null!==o){a=o.next,r=r.baseState;var l=s=null,c=null,u=a;do{var d=u.lane;if((aa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,s=r):c=c.next=h,sa.lanes|=d,jl|=d}u=u.next}while(null!==u&&u!==a);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(ws=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{a=o.lane,sa.lanes|=a,jl|=a,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Sa(e){var t=ba(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{a=e(a,s.action),s=s.next}while(s!==o);sr(a,t.memoizedState)||(ws=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function _a(){}function xa(e,t){var n=sa,r=ba(),o=t(),a=!sr(r.memoizedState,o);if(a&&(r.memoizedState=o,ws=!0),r=r.queue,ja(Ta.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,Oa(9,Na.bind(null,n,r,o,t),void 0,null),null===Al)throw Error(i(349));0!==(30&aa)||Ca(n,t,o)}return o}function Ca(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Na(e,t,n,r){t.value=n,t.getSnapshot=r,Ia(t)&&Aa(e)}function Ta(e,t,n){return n(function(){Ia(t)&&Aa(e)})}function Ia(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Aa(e){var t=Mi(e,1);null!==t&&rc(t,e,1,-1)}function Pa(e){var t=ya();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ya.bind(null,sa,e),[t.memoizedState,e]}function Oa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ra(){return ba().memoizedState}function Da(e,t,n,r){var o=ya();sa.flags|=e,o.memoizedState=Oa(1|t,n,void 0,void 0===r?null:r)}function Ma(e,t,n,r){var o=ba();r=void 0===r?null:r;var i=void 0;if(null!==la){var a=la.memoizedState;if(i=a.destroy,null!==r&&ga(r,a.deps))return void(o.memoizedState=Oa(t,n,i,r))}sa.flags|=e,o.memoizedState=Oa(1|t,n,i,r)}function La(e,t){return Da(8390656,8,e,t)}function ja(e,t){return Ma(2048,8,e,t)}function Ua(e,t){return Ma(4,2,e,t)}function Fa(e,t){return Ma(4,4,e,t)}function za(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Va(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ma(4,4,za.bind(null,t,e),n)}function Ba(){}function Ha(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ka(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wa(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,ws=!0),e.memoizedState=n):(sr(n,t)||(n=gt(),sa.lanes|=n,jl|=n,e.baseState=!0),t)}function qa(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{bt=n,ia.transition=r}}function Ga(){return ba().memoizedState}function Xa(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qa(e))$a(t,n);else if(null!==(n=Di(e,t,n,r))){rc(n,e,r,tc()),Ja(n,t,r)}}function Ya(e,t,n){var r=nc(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qa(e))$a(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,sr(s,a)){var l=t.interleaved;return null===l?(o.next=o,Ri(t)):(o.next=l.next,l.next=o),void(t.interleaved=o)}}catch(c){}null!==(n=Di(e,t,o,r))&&(rc(n,e,r,o=tc()),Ja(n,t,r))}}function Qa(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function $a(e,t){da=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ja(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Za={readContext:Pi,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},es={readContext:Pi,useCallback:function(e,t){return ya().memoizedState=[e,void 0===t?null:t],e},useContext:Pi,useEffect:La,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Da(4194308,4,za.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Da(4194308,4,e,t)},useInsertionEffect:function(e,t){return Da(4,2,e,t)},useMemo:function(e,t){var n=ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ya();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Xa.bind(null,sa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ya().memoizedState=e},useState:Pa,useDebugValue:Ba,useDeferredValue:function(e){return ya().memoizedState=e},useTransition:function(){var e=Pa(!1),t=e[0];return e=qa.bind(null,e[1]),ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sa,o=ya();if(ii){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Al)throw Error(i(349));0!==(30&aa)||Ca(r,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,La(Ta.bind(null,r,a,e),[e]),r.flags|=2048,Oa(9,Na.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ya(),t=Al.identifierPrefix;if(ii){var n=Jo;t=":"+t+"R"+(n=($o&~(1<<32-at($o)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ts={readContext:Pi,useCallback:Ha,useContext:Pi,useEffect:ja,useImperativeHandle:Va,useInsertionEffect:Ua,useLayoutEffect:Fa,useMemo:Ka,useReducer:Ea,useRef:Ra,useState:function(){return Ea(wa)},useDebugValue:Ba,useDeferredValue:function(e){return Wa(ba(),la.memoizedState,e)},useTransition:function(){return[Ea(wa)[0],ba().memoizedState]},useMutableSource:_a,useSyncExternalStore:xa,useId:Ga,unstable_isNewReconciler:!1},ns={readContext:Pi,useCallback:Ha,useContext:Pi,useEffect:ja,useImperativeHandle:Va,useInsertionEffect:Ua,useLayoutEffect:Fa,useMemo:Ka,useReducer:Sa,useRef:Ra,useState:function(){return Sa(wa)},useDebugValue:Ba,useDeferredValue:function(e){var t=ba();return null===la?t.memoizedState=e:Wa(t,la.memoizedState,e)},useTransition:function(){return[Sa(wa)[0],ba().memoizedState]},useMutableSource:_a,useSyncExternalStore:xa,useId:Ga,unstable_isNewReconciler:!1};function rs(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function os(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var is={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),o=nc(e),i=Fi(r,o);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=zi(e,i,o))&&(rc(t,e,o,r),Vi(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),o=nc(e),i=Fi(r,o);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=zi(e,i,o))&&(rc(t,e,o,r),Vi(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),o=Fi(n,r);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=zi(e,o,r))&&(rc(t,e,r,n),Vi(t,e,r))}};function as(e,t,n,r,o,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(o,i))}function ss(e,t,n){var r=!1,o=To,i=t.contextType;return"object"===typeof i&&null!==i?i=Pi(i):(o=Ro(t)?Po:Io.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Oo(e,o):To),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=is,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function ls(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&is.enqueueReplaceState(t,t.state,null)}function cs(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},ji(e);var i=t.contextType;"object"===typeof i&&null!==i?o.context=Pi(i):(i=Ro(t)?Po:Io.current,o.context=Oo(e,i)),o.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(os(e,t,i,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&is.enqueueReplaceState(o,o.state,null),Hi(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function us(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var o=n}catch(i){o="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:o,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var fs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Fi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,ql=r),hs(0,t)},n}function gs(e,t,n){(n=Fi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){hs(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fs;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function vs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fi(-1,1)).tag=2,zi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var bs=w.ReactCurrentOwner,ws=!1;function Es(e,t,n,r){t.child=null===e?Si(t,null,n,r):Ei(t,e.child,n,r)}function Ss(e,t,n,r,o){n=n.render;var i=t.ref;return Ai(t,o),r=ma(e,t,n,r,i,o),n=va(),null===e||ws?(ii&&n&&ti(t),t.flags|=1,Es(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ws(e,t,o))}function _s(e,t,n,r,o){if(null===e){var i=n.type;return"function"!==typeof i||Rc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,ks(e,t,i,r,o))}if(i=e.child,0===(e.lanes&o)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Ws(e,t,o)}return t.flags|=1,(e=Dc(i,r)).ref=t.ref,e.return=t,t.child=e}function ks(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(ws=!1,t.pendingProps=r=i,0===(e.lanes&o))return t.lanes=e.lanes,Ws(e,t,o);0!==(131072&e.flags)&&(ws=!0)}}return Ns(e,t,n,r,o)}function xs(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},No(Dl,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,No(Dl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,No(Dl,Rl),Rl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,No(Dl,Rl),Rl|=r;return Es(e,t,o,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ns(e,t,n,r,o){var i=Ro(n)?Po:Io.current;return i=Oo(t,i),Ai(t,o),n=ma(e,t,n,r,i,o),r=va(),null===e||ws?(ii&&r&&ti(t),t.flags|=1,Es(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ws(e,t,o))}function Ts(e,t,n,r,o){if(Ro(n)){var i=!0;jo(t)}else i=!1;if(Ai(t,o),null===t.stateNode)Ks(e,t),ss(t,n,r),cs(t,n,r,o),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Pi(c):c=Oo(t,c=Ro(n)?Po:Io.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==c)&&ls(t,a,r,c),Li=!1;var h=t.memoizedState;a.state=h,Hi(t,r,a,o),l=t.memoizedState,s!==r||h!==l||Ao.current||Li?("function"===typeof u&&(os(t,n,u,r),l=t.memoizedState),(s=Li||as(t,n,s,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ui(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:rs(t.type,s),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Pi(l):l=Oo(t,l=Ro(n)?Po:Io.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==l)&&ls(t,a,r,l),Li=!1,h=t.memoizedState,a.state=h,Hi(t,r,a,o);var p=t.memoizedState;s!==d||h!==p||Ao.current||Li?("function"===typeof f&&(os(t,n,f,r),p=t.memoizedState),(c=Li||as(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Is(e,t,n,r,i,o)}function Is(e,t,n,r,o,i){Cs(e,t);var a=0!==(128&t.flags);if(!r&&!a)return o&&Uo(t,n,!1),Ws(e,t,i);r=t.stateNode,bs.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Ei(t,e.child,null,i),t.child=Ei(t,null,s,i)):Es(e,t,s,i),t.memoizedState=r.state,o&&Uo(t,n,!0),t.child}function As(e){var t=e.stateNode;t.pendingContext?Mo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mo(0,t.context,!1),Qi(e,t.containerInfo)}function Ps(e,t,n,r,o){return pi(),gi(o),t.flags|=256,Es(e,t,n,r),t.child}var Os,Rs,Ds,Ms,Ls={dehydrated:null,treeContext:null,retryLane:0};function js(e){return{baseLanes:e,cachePool:null,transitions:null}}function Us(e,t,n){var r,o=t.pendingProps,a=ea.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),No(ea,1&a),null===e)return ui(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=o.children,e=o.fallback,s?(o=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&o)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=jc(l,o,0,null),e=Lc(e,o,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=js(n),t.memoizedState=Ls,e):Fs(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,o,a,s){if(n)return 256&t.flags?(t.flags&=-257,zs(e,t,s,r=ds(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,o=t.mode,r=jc({mode:"visible",children:r.children},o,0,null),(a=Lc(a,o,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Ei(t,e.child,null,s),t.child.memoizedState=js(s),t.memoizedState=Ls,a);if(0===(1&t.mode))return zs(e,t,s,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var l=r.dgst;return r=l,zs(e,t,s,r=ds(a=Error(i(419)),r,void 0))}if(l=0!==(s&e.childLanes),ws||l){if(null!==(r=Al)){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|s))?0:o)&&o!==a.retryLane&&(a.retryLane=o,Mi(e,o),rc(r,e,o,-1))}return mc(),zs(e,t,s,r=ds(Error(i(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,oi=co(o.nextSibling),ri=t,ii=!0,ai=null,null!==e&&(Xo[Yo++]=$o,Xo[Yo++]=Jo,Xo[Yo++]=Qo,$o=e.id,Jo=e.overflow,Qo=t),t=Fs(t,r.children),t.flags|=4096,t)}(e,t,l,o,r,a,n);if(s){s=o.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:o.children};return 0===(1&l)&&t.child!==a?((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null):(o=Dc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Dc(r,s):(s=Lc(s,l,n,null)).flags|=2,s.return=t,o.return=t,o.sibling=s,t.child=o,o=s,s=t.child,l=null===(l=e.child.memoizedState)?js(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,o}return e=(s=e.child).sibling,o=Dc(s,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Fs(e,t){return(t=jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zs(e,t,n,r){return null!==r&&gi(r),Ei(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ii(e.return,t,n)}function Bs(e,t,n,r,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function Hs(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(Es(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vs(e,n,t);else if(19===e.tag)Vs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(No(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Bs(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ta(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Bs(t,!0,n,null,i);break;case"together":Bs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ks(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),jl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qs(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xs(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Ro(t.type)&&Do(),Gs(t),null;case 3:return r=t.stateNode,$i(),Co(Ao),Co(Io),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ai&&(sc(ai),ai=null))),Rs(e,t),Gs(t),null;case 5:Zi(t);var o=Yi(Xi.current);if(n=t.type,null!==e&&null!=t.stateNode)Ds(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Gs(t),null}if(e=Yi(qi.current),hi(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[fo]=t,r[po]=a,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(o=0;o<Mr.length;o++)Fr(Mr[o],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":Q(r,a),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Fr("invalid",r);break;case"textarea":oe(r,a),Fr("invalid",r)}for(var l in ye(n,a),o=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),o=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),o=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":q(r),Z(r,a,!0);break;case"textarea":q(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[fo]=t,e[po]=r,Os(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),o=r;break;case"iframe":case"object":case"embed":Fr("load",e),o=r;break;case"video":case"audio":for(o=0;o<Mr.length;o++)Fr(Mr[o],e);o=r;break;case"source":Fr("error",e),o=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),o=r;break;case"details":Fr("toggle",e),o=r;break;case"input":Q(e,r),o=Y(e,r),Fr("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=j({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),Fr("invalid",e)}for(a in ye(n,o),c=o)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?me(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Fr("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":q(e),Z(e,r,!1);break;case"textarea":q(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)Ms(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Yi(Xi.current),Yi(qi.current),hi(t)){if(r=t.stateNode,n=t.memoizedProps,r[fo]=t,(a=r.nodeValue!==n)&&null!==(e=ri))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fo]=t,t.stateNode=r}return Gs(t),null;case 13:if(Co(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ii&&null!==oi&&0!==(1&t.mode)&&0===(128&t.flags))fi(),pi(),t.flags|=98560,a=!1;else if(a=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[fo]=t}else pi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),a=!1}else null!==ai&&(sc(ai),ai=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Ml&&(Ml=3):mc())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return $i(),Rs(e,t),null===e&&Br(t.stateNode.containerInfo),Gs(t),null;case 10:return Ti(t.type._context),Gs(t),null;case 19:if(Co(ea),null===(a=t.memoizedState))return Gs(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)qs(a,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,qs(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return No(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&$e()>Hl&&(t.flags|=128,r=!0,qs(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ii)return Gs(t),null}else 2*$e()-a.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,r=!0,qs(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=$e(),t.sibling=null,n=ea.current,No(ea,r?1&n|2:1&n),t):(Gs(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Ys(e,t){switch(ni(t),t.tag){case 1:return Ro(t.type)&&Do(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $i(),Co(Ao),Co(Io),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zi(t),null;case 13:if(Co(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Co(ea),null;case 4:return $i(),null;case 10:return Ti(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Os=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Rs=function(){},Ds=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Yi(qi.current);var i,a=null;switch(n){case"input":o=Y(e,o),r=Y(e,r),a=[];break;case"select":o=j({},o,{value:void 0}),r=j({},r,{value:void 0}),a=[];break;case"textarea":o=re(e,o),r=re(e,r),a=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u){var l=o[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=o?o[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ms=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qs=!1,$s=!1,Js="function"===typeof WeakSet?WeakSet:Set,Zs=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){xc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,void 0!==i&&tl(t,n,i)}o=o.next}while(o!==r)}}function ol(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fo],delete t[po],delete t[mo],delete t[vo],delete t[yo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var dl=null,hl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(ot,n)}catch(s){}switch(n.tag){case 5:$s||el(n,t);case 6:var r=dl,o=hl;dl=null,fl(e,t,n),hl=o,null!==(dl=r)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?lo(e.parentNode,n):1===e.nodeType&&lo(e,n),Bt(e)):lo(dl,n.stateNode));break;case 4:r=dl,o=hl,dl=n.stateNode.containerInfo,hl=!0,fl(e,t,n),dl=r,hl=o;break;case 0:case 11:case 14:case 15:if(!$s&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var i=o,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&tl(n,t,a),o=o.next}while(o!==r)}fl(e,t,n);break;case 1:if(!$s&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){xc(n,t,s)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?($s=(r=$s)||null!==n.memoizedState,fl(e,t,n),$s=r):fl(e,t,n);break;default:fl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach(function(t){var r=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(i(160));pl(a,s,o),dl=null,hl=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(u){xc(o,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{rl(3,e,e.return),ol(3,e)}catch(m){xc(e,e.return,m)}try{rl(5,e,e.return)}catch(m){xc(e,e.return,m)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var o=e.stateNode;try{he(o,"")}catch(m){xc(e,e.return,m)}}if(4&r&&null!=(o=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&$(o,a),be(l,s);var u=be(l,a);for(s=0;s<c.length;s+=2){var d=c[s],h=c[s+1];"style"===d?me(o,h):"dangerouslySetInnerHTML"===d?de(o,h):"children"===d?he(o,h):b(o,d,h,u)}switch(l){case"input":J(o,a);break;case"textarea":ie(o,a);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(o,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(o,!!a.multiple,a.defaultValue,!0):ne(o,!!a.multiple,a.multiple?[]:"",!1))}o[po]=a}catch(m){xc(e,e.return,m)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(i(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(m){xc(e,e.return,m)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){xc(e,e.return,m)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(o=e.child).flags&&(a=null!==o.memoizedState,o.stateNode.isHidden=a,!a||null!==o.alternate&&null!==o.alternate.memoizedState||(Bl=$e())),4&r&&gl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?($s=(u=$s)||d,ml(t,e),$s=u):ml(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Zs=e,d=e.child;null!==d;){for(h=Zs=d;null!==Zs;){switch(p=(f=Zs).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){xc(r,n,m)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){Sl(h);continue}}null!==p?(p.return=f,Zs=p):Sl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{o=h.stateNode,u?"function"===typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",s))}catch(m){xc(e,e.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){xc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),yl(e),4&r&&gl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(he(o,""),r.flags&=-33),ul(e,ll(e),o);break;case 3:case 4:var a=r.stateNode.containerInfo;cl(e,ll(e),a);break;default:throw Error(i(161))}}catch(s){xc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Zs=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var o=Zs,i=o.child;if(22===o.tag&&r){var a=null!==o.memoizedState||Qs;if(!a){var s=o.alternate,l=null!==s&&null!==s.memoizedState||$s;s=Qs;var c=$s;if(Qs=a,($s=l)&&!c)for(Zs=o;null!==Zs;)l=(a=Zs).child,22===a.tag&&null!==a.memoizedState?_l(o):null!==l?(l.return=a,Zs=l):_l(o);for(;null!==i;)Zs=i,wl(i,t,n),i=i.sibling;Zs=o,Qs=s,$s=c}El(e)}else 0!==(8772&o.subtreeFlags)&&null!==i?(i.return=o,Zs=i):El(e)}}function El(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$s||ol(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$s)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:rs(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Ki(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ki(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(i(163))}$s||512&t.flags&&il(t)}catch(f){xc(t,t.return,f)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function Sl(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function _l(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ol(4,t)}catch(l){xc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(l){xc(t,o,l)}}var i=t.return;try{il(t)}catch(l){xc(t,i,l)}break;case 5:var a=t.return;try{il(t)}catch(l){xc(t,a,l)}}}catch(l){xc(t,t.return,l)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var kl,xl=Math.ceil,Cl=w.ReactCurrentDispatcher,Nl=w.ReactCurrentOwner,Tl=w.ReactCurrentBatchConfig,Il=0,Al=null,Pl=null,Ol=0,Rl=0,Dl=xo(0),Ml=0,Ll=null,jl=0,Ul=0,Fl=0,zl=null,Vl=null,Bl=0,Hl=1/0,Kl=null,Wl=!1,ql=null,Gl=null,Xl=!1,Yl=null,Ql=0,$l=0,Jl=null,Zl=-1,ec=0;function tc(){return 0!==(6&Il)?$e():-1!==Zl?Zl:Zl=$e()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Ol?Ol&-Ol:null!==mi.transition?(0===ec&&(ec=gt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function rc(e,t,n,r){if(50<$l)throw $l=0,Jl=null,Error(i(185));vt(e,n,r),0!==(2&Il)&&e===Al||(e===Al&&(0===(2&Il)&&(Ul|=n),4===Ml&&lc(e,Ol)),oc(e,r),1===n&&0===Il&&0===(1&t.mode)&&(Hl=$e()+500,zo&&Ho()))}function oc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),s=1<<a,l=o[a];-1===l?0!==(s&n)&&0===(s&r)||(o[a]=ft(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=ht(e,e===Al?Ol:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){zo=!0,Bo(e)}(cc.bind(null,e)):Bo(cc.bind(null,e)),ao(function(){0===(6&Il)&&Ho()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Zl=-1,ec=0,0!==(6&Il))throw Error(i(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Al?Ol:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var o=Il;Il|=2;var a=gc();for(Al===e&&Ol===t||(Kl=null,Hl=$e()+500,fc(e,t));;)try{bc();break}catch(l){pc(e,l)}Ni(),Cl.current=a,Il=o,null!==Pl?t=0:(Al=null,Ol=0,t=Ml)}if(0!==t){if(2===t&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t)throw n=Ll,fc(e,0),lc(e,r),oc(e,$e()),n;if(6===t)lc(e,r);else{if(o=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!sr(i(),o))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=vc(e,r))&&(0!==(a=pt(e))&&(r=a,t=ac(e,a))),1===t))throw n=Ll,fc(e,0),lc(e,r),oc(e,$e()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:Sc(e,Vl,Kl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Bl+500-$e())){if(0!==ht(e,0))break;if(((o=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(Sc.bind(null,e,Vl,Kl),t);break}Sc(e,Vl,Kl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>o&&(o=s),r&=~a}if(r=o,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xl(r/1960))-r)){e.timeoutHandle=ro(Sc.bind(null,e,Vl,Kl),r);break}Sc(e,Vl,Kl);break;default:throw Error(i(329))}}}return oc(e,$e()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Vl,Vl=n,null!==t&&sc(t)),e}function sc(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function lc(e,t){for(t&=~Fl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Il))throw Error(i(327));_c();var t=ht(e,0);if(0===(1&t))return oc(e,$e()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ll,fc(e,0),lc(e,t),oc(e,$e()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,Vl,Kl),oc(e,$e()),null}function uc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(Hl=$e()+500,zo&&Ho())}}function dc(e){null!==Yl&&0===Yl.tag&&0===(6&Il)&&_c();var t=Il;Il|=1;var n=Tl.transition,r=bt;try{if(Tl.transition=null,bt=1,e)return e()}finally{bt=r,Tl.transition=n,0===(6&(Il=t))&&Ho()}}function hc(){Rl=Dl.current,Co(Dl)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(ni(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Do();break;case 3:$i(),Co(Ao),Co(Io),ra();break;case 5:Zi(r);break;case 4:$i();break;case 13:case 19:Co(ea);break;case 10:Ti(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Al=e,Pl=e=Dc(e.current,null),Ol=Rl=t,Ml=0,Ll=null,Fl=Ul=jl=0,Vl=zl=null,null!==Oi){for(t=0;t<Oi.length;t++)if(null!==(r=(n=Oi[t]).interleaved)){n.interleaved=null;var o=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=o,r.next=a}n.pending=r}Oi=null}return e}function pc(e,t){for(;;){var n=Pl;try{if(Ni(),oa.current=Za,ua){for(var r=sa.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}ua=!1}if(aa=0,ca=la=sa=null,da=!1,ha=0,Nl.current=null,null===n||null===n.return){Ml=1,Ll=t,Pl=null;break}e:{var a=e,s=n.return,l=n,c=t;if(t=Ol,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=vs(s);if(null!==p){p.flags&=-257,ys(p,s,l,0,t),1&p.mode&&ms(a,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){ms(a,u,t),mc();break e}c=Error(i(426))}else if(ii&&1&l.mode){var v=vs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ys(v,s,l,0,t),gi(us(c,l));break e}}a=c=us(c,l),4!==Ml&&(Ml=2),null===zl?zl=[a]:zl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Bi(a,ps(0,c,t));break e;case 1:l=c;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Bi(a,gs(a,l,t));break e}}a=a.return}while(null!==a)}Ec(n)}catch(w){t=w,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function gc(){var e=Cl.current;return Cl.current=Za,null===e?Za:e}function mc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Al||0===(268435455&jl)&&0===(268435455&Ul)||lc(Al,Ol)}function vc(e,t){var n=Il;Il|=2;var r=gc();for(Al===e&&Ol===t||(Kl=null,fc(e,t));;)try{yc();break}catch(o){pc(e,o)}if(Ni(),Il=n,Cl.current=r,null!==Pl)throw Error(i(261));return Al=null,Ol=0,Ml}function yc(){for(;null!==Pl;)wc(Pl)}function bc(){for(;null!==Pl&&!Ye();)wc(Pl)}function wc(e){var t=kl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?Ec(e):Pl=t,Nl.current=null}function Ec(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xs(n,t,Rl)))return void(Pl=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Ml=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Ml&&(Ml=5)}function Sc(e,t,n){var r=bt,o=Tl.transition;try{Tl.transition=null,bt=1,function(e,t,n,r){do{_c()}while(null!==Yl);if(0!==(6&Il))throw Error(i(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-at(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}(e,a),e===Al&&(Pl=Al=null,Ol=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,Ac(tt,function(){return _c(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Tl.transition,Tl.transition=null;var s=bt;bt=1;var l=Il;Il|=4,Nl.current=null,function(e,t){if(eo=Kt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(E){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==o&&3!==h.nodeType||(l=s+o),h!==a||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===o&&(l=s),f===a&&++d===r&&(c=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},Kt=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:rs(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(i(163))}}catch(E){xc(t,t.return,E)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}g=nl,nl=!1}(e,n),vl(n,e),pr(to),Kt=!!eo,to=eo=null,e.current=n,bl(n,e,o),Qe(),Il=l,bt=s,Tl.transition=a}else e.current=n;if(Xl&&(Xl=!1,Yl=e,Ql=o),a=e.pendingLanes,0===a&&(Gl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),oc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Wl)throw Wl=!1,e=ql,ql=null,e;0!==(1&Ql)&&0!==e.tag&&_c(),a=e.pendingLanes,0!==(1&a)?e===Jl?$l++:($l=0,Jl=e):$l=0,Ho()}(e,t,n,r)}finally{Tl.transition=o,bt=r}return null}function _c(){if(null!==Yl){var e=wt(Ql),t=Tl.transition,n=bt;try{if(Tl.transition=null,bt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Ql=0,0!==(6&Il))throw Error(i(331));var o=Il;for(Il|=4,Zs=e.current;null!==Zs;){var a=Zs,s=a.child;if(0!==(16&Zs.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Zs=u;null!==Zs;){var d=Zs;switch(d.tag){case 0:case 11:case 15:rl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Zs=h;else for(;null!==Zs;){var f=(d=Zs).sibling,p=d.return;if(al(d),d===u){Zs=null;break}if(null!==f){f.return=p,Zs=f;break}Zs=p}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Zs=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(a=Zs).flags))switch(a.tag){case 0:case 11:case 15:rl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Zs=y;break e}Zs=a.return}}var b=e.current;for(Zs=b;null!==Zs;){var w=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==w)w.return=s,Zs=w;else e:for(s=b;null!==Zs;){if(0!==(2048&(l=Zs).flags))try{switch(l.tag){case 0:case 11:case 15:ol(9,l)}}catch(S){xc(l,l.return,S)}if(l===s){Zs=null;break e}var E=l.sibling;if(null!==E){E.return=l.return,Zs=E;break e}Zs=l.return}}if(Il=o,Ho(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(ot,e)}catch(S){}r=!0}return r}finally{bt=n,Tl.transition=t}}return!1}function kc(e,t,n){e=zi(e,t=ps(0,t=us(n,t),1),1),t=tc(),null!==e&&(vt(e,1,t),oc(e,t))}function xc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=zi(t,e=gs(t,e=us(n,e),1),1),e=tc(),null!==t&&(vt(t,1,e),oc(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Ol&n)===n&&(4===Ml||3===Ml&&(130023424&Ol)===Ol&&500>$e()-Bl?fc(e,0):Fl|=n),oc(e,t)}function Nc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Mi(e,t))&&(vt(e,t,n),oc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nc(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Nc(e,n)}function Ac(e,t){return Ge(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,r){return new Pc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,o,a){var s=2;if(r=e,"function"===typeof e)Rc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case _:return Lc(n.children,o,a,t);case k:s=8,o|=8;break;case x:return(e=Oc(12,n,t,2|o)).elementType=x,e.lanes=a,e;case I:return(e=Oc(13,n,t,o)).elementType=I,e.lanes=a,e;case A:return(e=Oc(19,n,t,o)).elementType=A,e.lanes=a,e;case R:return jc(n,o,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case N:s=9;break e;case T:s=11;break e;case P:s=14;break e;case O:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Oc(s,n,t,o)).elementType=e,t.type=r,t.lanes=a,t}function Lc(e,t,n,r){return(e=Oc(7,e,r,t)).lanes=n,e}function jc(e,t,n,r){return(e=Oc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,o,i,a,s,l){return e=new zc(e,t,n,s,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Oc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ji(i),e}function Bc(e){if(!e)return To;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ro(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ro(n))return Lo(e,n,t)}return t}function Hc(e,t,n,r,o,i,a,s,l){return(e=Vc(n,r,!0,e,0,i,0,s,l)).context=Bc(null),n=e.current,(i=Fi(r=tc(),o=nc(n))).callback=void 0!==t&&null!==t?t:null,zi(n,i,o),e.current.lanes=o,vt(e,o,r),oc(e,r),e}function Kc(e,t,n,r){var o=t.current,i=tc(),a=nc(o);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zi(o,t,a))&&(rc(e,o,a,i),Vi(e,o,a)),a}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ao.current)ws=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ws=!1,function(e,t,n){switch(t.tag){case 3:As(t),pi();break;case 5:Ji(t);break;case 1:Ro(t.type)&&jo(t);break;case 4:Qi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;No(_i,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(No(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Us(e,t,n):(No(ea,1&ea.current),null!==(e=Ws(e,t,n))?e.sibling:null);No(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Hs(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),No(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,xs(e,t,n)}return Ws(e,t,n)}(e,t,n);ws=0!==(131072&e.flags)}else ws=!1,ii&&0!==(1048576&t.flags)&&ei(t,Go,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ks(e,t),e=t.pendingProps;var o=Oo(t,Io.current);Ai(t,n),o=ma(null,t,r,e,o,n);var a=va();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ro(r)?(a=!0,jo(t)):a=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,ji(t),o.updater=is,t.stateNode=o,o._reactInternals=t,cs(t,r,e,n),t=Is(null,t,r,!0,a,n)):(t.tag=0,ii&&a&&ti(t),Es(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ks(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===P)return 14}return 2}(r),e=rs(r,e),o){case 0:t=Ns(null,t,r,e,n);break e;case 1:t=Ts(null,t,r,e,n);break e;case 11:t=Ss(null,t,r,e,n);break e;case 14:t=_s(null,t,r,rs(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,Ns(e,t,r,o=t.elementType===r?o:rs(r,o),n);case 1:return r=t.type,o=t.pendingProps,Ts(e,t,r,o=t.elementType===r?o:rs(r,o),n);case 3:e:{if(As(t),null===e)throw Error(i(387));r=t.pendingProps,o=(a=t.memoizedState).element,Ui(e,t),Hi(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ps(e,t,r,n,o=us(Error(i(423)),t));break e}if(r!==o){t=Ps(e,t,r,n,o=us(Error(i(424)),t));break e}for(oi=co(t.stateNode.containerInfo.firstChild),ri=t,ii=!0,ai=null,n=Si(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pi(),r===o){t=Ws(e,t,n);break e}Es(e,t,r,n)}t=t.child}return t;case 5:return Ji(t),null===e&&ui(t),r=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,s=o.children,no(r,o)?s=null:null!==a&&no(r,a)&&(t.flags|=32),Cs(e,t),Es(e,t,s,n),t.child;case 6:return null===e&&ui(t),null;case 13:return Us(e,t,n);case 4:return Qi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ei(t,null,r,n):Es(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,Ss(e,t,r,o=t.elementType===r?o:rs(r,o),n);case 7:return Es(e,t,t.pendingProps,n),t.child;case 8:case 12:return Es(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,a=t.memoizedProps,s=o.value,No(_i,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===o.children&&!Ao.current){t=Ws(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fi(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ii(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(i(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ii(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}Es(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Ai(t,n),r=r(o=Pi(o)),t.flags|=1,Es(e,t,r,n),t.child;case 14:return o=rs(r=t.type,t.pendingProps),_s(e,t,r,o=rs(r.type,o),n);case 15:return ks(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:rs(r,o),Ks(e,t),t.tag=1,Ro(r)?(e=!0,jo(t)):e=!1,Ai(t,n),ss(t,r,o),cs(t,r,o,n),Is(null,t,r,!0,e,n);case 19:return Hs(e,t,n);case 22:return xs(e,t,n)}throw Error(i(156,t.tag))};var Xc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,o){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof o){var s=o;o=function(){var e=Wc(a);s.call(e)}}Kc(t,a,e,o)}else a=function(e,t,n,r,o){if(o){if("function"===typeof r){var i=r;r=function(){var e=Wc(a);i.call(e)}}var a=Hc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=a,e[go]=a.current,Br(8===e.nodeType?e.parentNode:e),dc(),a}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof r){var s=r;r=function(){var e=Wc(l);s.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[go]=l.current,Br(8===e.nodeType?e.parentNode:e),dc(function(){Kc(t,l,n,r)}),l}(n,t,e,o,r);return Wc(a)}Qc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Kc(e,t,null,null)},Qc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Kc(null,e,null,null)}),t[go]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&jt(e)}},Et=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),oc(t,$e()),0===(6&Il)&&(Hl=$e()+500,Ho()))}break;case 13:dc(function(){var t=Mi(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}}),Gc(e,1)}},St=function(e){if(13===e.tag){var t=Mi(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},_t=function(e){if(13===e.tag){var t=nc(e),n=Mi(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},kt=function(){return bt},xt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Se=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=So(r);if(!o)throw Error(i(90));G(r),J(r,o)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=uc,Ie=dc;var tu={usingClientEntryPoint:!1,Events:[wo,Eo,So,Ce,Ne,uc]},nu={findFiberByHostInstance:bo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ou.isDisabled&&ou.supportsFiber)try{ot=ou.inject(ru),it=ou}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(i(299));var n=!1,r="",o=Xc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,o),e[go]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(i(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,o=!1,a="",s=Xc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,o,0,a,s),e[go]=t.current,Br(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Qc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(i(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(i(40));return!!e._reactRootContainer&&(dc(function(){eu(null,null,e,!1,function(){e._reactRootContainer=null,e[go]=null})}),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return eu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&o&&r;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(i,a),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r,o=n(43),i=n.t(o,2),a=n(391),s=n(950),l=n.t(s,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const u="popstate";function d(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function f(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,n,r){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function g(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function v(e,t,n,o){void 0===o&&(o={});let{window:i=document.defaultView,v5Compat:a=!1}=o,s=i.history,l=r.Pop,h=null,m=v();function v(){return(s.state||{idx:null}).idx}function y(){l=r.Pop;let e=v(),t=null==e?null:e-m;m=e,h&&h({action:l,location:w.location,delta:t})}function b(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:g(e);return n=n.replace(/ $/,"%20"),d(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,s.replaceState(c({},s.state,{idx:m}),""));let w={get action(){return l},get location(){return e(i,s)},listen(e){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(u,y),h=e,()=>{i.removeEventListener(u,y),h=null}},createHref:e=>t(i,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=r.Push;let o=p(w.location,e,t);n&&n(o,e),m=v()+1;let c=f(o,m),u=w.createHref(o);try{s.pushState(c,"",u)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;i.location.assign(u)}a&&h&&h({action:l,location:w.location,delta:1})},replace:function(e,t){l=r.Replace;let o=p(w.location,e,t);n&&n(o,e),m=v();let i=f(o,m),c=w.createHref(o);s.replaceState(i,"",c),a&&h&&h({action:l,location:w.location,delta:0})},go:e=>s.go(e)};return w}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function b(e,t,n){return void 0===n&&(n="/"),w(e,t,n,!1)}function w(e,t,n,r){let o=D(("string"===typeof t?m(t):t).pathname||"/",n);if(null==o)return null;let i=E(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let a=null;for(let s=0;null==a&&s<i.length;++s){let e=R(o);a=P(i[s],e,r)}return a}function E(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let o=(e,o,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};a.relativePath.startsWith("/")&&(d(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let s=B([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(d(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),E(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:A(s,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of S(e.path))o(e,t,r);else o(e,t)}),t}function S(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,o=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return o?[i,""]:[i];let a=S(r.join("/")),s=[];return s.push(...a.map(e=>""===e?i:[i,e].join("/"))),o&&s.push(...a),s.map(t=>e.startsWith("/")&&""===t?"/":t)}const _=/^:[\w-]+$/,k=3,x=2,C=1,N=10,T=-2,I=e=>"*"===e;function A(e,t){let n=e.split("/"),r=n.length;return n.some(I)&&(r+=T),t&&(r+=x),n.filter(e=>!I(e)).reduce((e,t)=>e+(_.test(t)?k:""===t?C:N),r)}function P(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,o={},i="/",a=[];for(let s=0;s<r.length;++s){let e=r[s],l=s===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(o,u.params),a.push({params:o,pathname:B([i,u.pathname]),pathnameBase:H(B([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=B([i,u.pathnameBase]))}return a}function O(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))");let i=new RegExp(o,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let i=o[0],a=i.replace(/(.)\/+$/,"$1"),s=o.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:o}=t;if("*"===r){let e=s[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[r]=o&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:a,pattern:e}}function R(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}const M=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function L(e,t){void 0===t&&(t="/");let n,{pathname:r,search:o="",hash:i=""}="string"===typeof e?m(e):e;if(r)if(a=r,M.test(a))n=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),h(!1,"Pathnames cannot have embedded double slashes - normalizing "+e+" -> "+r)}n=r.startsWith("/")?j(r.substring(1),"/"):j(r,t)}else n=t;var a;return{pathname:n,search:K(o),hash:W(i)}}function j(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function U(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function F(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function z(e,t){let n=F(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function V(e,t,n,r){let o;void 0===r&&(r=!1),"string"===typeof e?o=m(e):(o=c({},e),d(!o.pathname||!o.pathname.includes("?"),U("?","pathname","search",o)),d(!o.pathname||!o.pathname.includes("#"),U("#","pathname","hash",o)),d(!o.search||!o.search.includes("#"),U("#","search","hash",o)));let i,a=""===e||""===o.pathname,s=a?"/":o.pathname;if(null==s)i=n;else{let e=t.length-1;if(!r&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;o.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=L(o,i),u=s&&"/"!==s&&s.endsWith("/"),h=(a||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!h||(l.pathname+="/"),l}const B=e=>e.join("/").replace(/\/\/+/g,"/"),H=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),K=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",W=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function q(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const G=["post","put","patch","delete"],X=(new Set(G),["get",...G]);new Set(X),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y.apply(this,arguments)}const Q=o.createContext(null);const $=o.createContext(null);const J=o.createContext(null);const Z=o.createContext(null);const ee=o.createContext({outlet:null,matches:[],isDataRoute:!1});const te=o.createContext(null);function ne(){return null!=o.useContext(Z)}function re(){return ne()||d(!1),o.useContext(Z).location}function oe(e){o.useContext(J).static||o.useLayoutEffect(e)}function ie(){let{isDataRoute:e}=o.useContext(ee);return e?function(){let{router:e}=ge(fe.UseNavigateStable),t=ve(pe.UseNavigateStable),n=o.useRef(!1);oe(()=>{n.current=!0});let r=o.useCallback(function(r,o){void 0===o&&(o={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,Y({fromRouteId:t},o)))},[e,t]);return r}():function(){ne()||d(!1);let e=o.useContext(Q),{basename:t,future:n,navigator:r}=o.useContext(J),{matches:i}=o.useContext(ee),{pathname:a}=re(),s=JSON.stringify(z(i,n.v7_relativeSplatPath)),l=o.useRef(!1);return oe(()=>{l.current=!0}),o.useCallback(function(n,o){if(void 0===o&&(o={}),!l.current)return;if("number"===typeof n)return void r.go(n);let i=V(n,JSON.parse(s),a,"path"===o.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:B([t,i.pathname])),(o.replace?r.replace:r.push)(i,o.state,o)},[t,r,s,a,e])}()}function ae(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=o.useContext(J),{matches:i}=o.useContext(ee),{pathname:a}=re(),s=JSON.stringify(z(i,r.v7_relativeSplatPath));return o.useMemo(()=>V(e,JSON.parse(s),a,"path"===n),[e,s,a,n])}function se(e,t,n,i){ne()||d(!1);let{navigator:a}=o.useContext(J),{matches:s}=o.useContext(ee),l=s[s.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=re();if(t){var p;let e="string"===typeof t?m(t):t;"/"===u||(null==(p=e.pathname)?void 0:p.startsWith(u))||d(!1),h=e}else h=f;let g=h.pathname||"/",v=g;if("/"!==u){let e=u.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=b(e,{pathname:v});let w=he(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:B([u,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:B([u,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),s,n,i);return t&&w?o.createElement(Z.Provider,{value:{location:Y({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:r.Pop}},w):w}function le(){let e=function(){var e;let t=o.useContext(te),n=me(pe.UseRouteError),r=ve(pe.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=q(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return o.createElement(o.Fragment,null,o.createElement("h2",null,"Unexpected Application Error!"),o.createElement("h3",{style:{fontStyle:"italic"}},t),n?o.createElement("pre",{style:i},n):null,null)}const ce=o.createElement(le,null);class ue extends o.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?o.createElement(ee.Provider,{value:this.props.routeContext},o.createElement(te.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function de(e){let{routeContext:t,match:n,children:r}=e,i=o.useContext(Q);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),o.createElement(ee.Provider,{value:t},r)}function he(e,t,n,r){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let s=e,l=null==(i=n)?void 0:i.errors;if(null!=l){let e=s.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||d(!1),s=s.slice(0,Math.min(s.length,e+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let o=0;o<s.length;o++){let e=s[o];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=o),e.route.id){let{loaderData:t,errors:r}=n,o=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||o){c=!0,s=u>=0?s.slice(0,u+1):[s[0]];break}}}return s.reduceRight((e,r,i)=>{let a,d=!1,h=null,f=null;var p;n&&(a=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||ce,c&&(u<0&&0===i?(p="route-fallback",!1||ye[p]||(ye[p]=!0),d=!0,f=null):u===i&&(d=!0,f=r.route.hydrateFallbackElement||null)));let g=t.concat(s.slice(0,i+1)),m=()=>{let t;return t=a?h:d?f:r.route.Component?o.createElement(r.route.Component,null):r.route.element?r.route.element:e,o.createElement(de,{match:r,routeContext:{outlet:e,matches:g,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?o.createElement(ue,{location:n.location,revalidation:n.revalidation,component:h,error:a,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var fe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(fe||{}),pe=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(pe||{});function ge(e){let t=o.useContext(Q);return t||d(!1),t}function me(e){let t=o.useContext($);return t||d(!1),t}function ve(e){let t=function(){let e=o.useContext(ee);return e||d(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||d(!1),n.route.id}const ye={};function be(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}i.startTransition;function we(e){d(!1)}function Ee(e){let{basename:t="/",children:n=null,location:i,navigationType:a=r.Pop,navigator:s,static:l=!1,future:c}=e;ne()&&d(!1);let u=t.replace(/^\/*/,"/"),h=o.useMemo(()=>({basename:u,navigator:s,static:l,future:Y({v7_relativeSplatPath:!1},c)}),[u,c,s,l]);"string"===typeof i&&(i=m(i));let{pathname:f="/",search:p="",hash:g="",state:v=null,key:y="default"}=i,b=o.useMemo(()=>{let e=D(f,u);return null==e?null:{location:{pathname:e,search:p,hash:g,state:v,key:y},navigationType:a}},[u,f,p,g,v,y,a]);return null==b?null:o.createElement(J.Provider,{value:h},o.createElement(Z.Provider,{children:n,value:b}))}function Se(e){let{children:t,location:n}=e;return se(_e(t),n)}new Promise(()=>{});o.Component;function _e(e,t){void 0===t&&(t=[]);let n=[];return o.Children.forEach(e,(e,r)=>{if(!o.isValidElement(e))return;let i=[...t,r];if(e.type===o.Fragment)return void n.push.apply(n,_e(e.props.children,i));e.type!==we&&d(!1),e.props.index&&e.props.children&&d(!1);let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=_e(e.props.children,i)),n.push(a)}),n}function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ke.apply(this,arguments)}function xe(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ce=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ne=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"];try{window.__reactRouterVersion="6"}catch(Zw){}const Te=o.createContext({isTransitioning:!1});new Map;const Ie=i.startTransition;l.flushSync,i.useId;function Ae(e){let{basename:t,children:n,future:r,window:i}=e,a=o.useRef();var s;null==a.current&&(a.current=(void 0===(s={window:i,v5Compat:!0})&&(s={}),v(function(e,t){let{pathname:n,search:r,hash:o}=e.location;return p("",{pathname:n,search:r,hash:o},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:g(t)},null,s)));let l=a.current,[c,u]=o.useState({action:l.action,location:l.location}),{v7_startTransition:d}=r||{},h=o.useCallback(e=>{d&&Ie?Ie(()=>u(e)):u(e)},[u,d]);return o.useLayoutEffect(()=>l.listen(h),[l,h]),o.useEffect(()=>be(r),[r]),o.createElement(Ee,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}const Pe="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Oe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Re=o.forwardRef(function(e,t){let n,{onClick:r,relative:i,reloadDocument:a,replace:s,state:l,target:c,to:u,preventScrollReset:h,viewTransition:f}=e,p=xe(e,Ce),{basename:m}=o.useContext(J),v=!1;if("string"===typeof u&&Oe.test(u)&&(n=u,Pe))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=D(t.pathname,m);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:v=!0}catch(Zw){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;ne()||d(!1);let{basename:r,navigator:i}=o.useContext(J),{hash:a,pathname:s,search:l}=ae(e,{relative:n}),c=s;return"/"!==r&&(c="/"===s?r:B([r,s])),i.createHref({pathname:c,search:l,hash:a})}(u,{relative:i}),b=function(e,t){let{target:n,replace:r,state:i,preventScrollReset:a,relative:s,viewTransition:l}=void 0===t?{}:t,c=ie(),u=re(),d=ae(e,{relative:s});return o.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:g(u)===g(d);c(e,{replace:n,state:i,preventScrollReset:a,relative:s,viewTransition:l})}},[u,c,d,r,i,n,e,a,s,l])}(u,{replace:s,state:l,target:c,preventScrollReset:h,relative:i,viewTransition:f});return o.createElement("a",ke({},p,{href:n||y,onClick:v||a?r:function(e){r&&r(e),e.defaultPrevented||b(e)},ref:t,target:c}))});const De=o.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:r=!1,className:i="",end:a=!1,style:s,to:l,viewTransition:c,children:u}=e,h=xe(e,Ne),f=ae(l,{relative:h.relative}),p=re(),g=o.useContext($),{navigator:m,basename:v}=o.useContext(J),y=null!=g&&function(e,t){void 0===t&&(t={});let n=o.useContext(Te);null==n&&d(!1);let{basename:r}=je(Me.useViewTransitionState),i=ae(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=D(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=D(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=O(i.pathname,s)||null!=O(i.pathname,a)}(f)&&!0===c,b=m.encodeLocation?m.encodeLocation(f).pathname:f.pathname,w=p.pathname,E=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;r||(w=w.toLowerCase(),E=E?E.toLowerCase():null,b=b.toLowerCase()),E&&v&&(E=D(E,v)||E);const S="/"!==b&&b.endsWith("/")?b.length-1:b.length;let _,k=w===b||!a&&w.startsWith(b)&&"/"===w.charAt(S),x=null!=E&&(E===b||!a&&E.startsWith(b)&&"/"===E.charAt(b.length)),C={isActive:k,isPending:x,isTransitioning:y},N=k?n:void 0;_="function"===typeof i?i(C):[i,k?"active":null,x?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let T="function"===typeof s?s(C):s;return o.createElement(Re,ke({},h,{"aria-current":N,className:_,ref:t,style:T,to:l,viewTransition:c}),"function"===typeof u?u(C):u)});var Me,Le;function je(e){let t=o.useContext(Q);return t||d(!1),t}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Me||(Me={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Le||(Le={}));var Ue=n(579);const Fe=(0,o.createContext)(),ze=()=>(0,o.useContext)(Fe),Ve=e=>{let{children:t}=e;const[n,r]=(0,o.useState)(()=>{const e=localStorage.getItem("lunanotes-theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;return e||(t?"dark":"light")});(0,o.useEffect)(()=>{const e=window.document.documentElement;e.classList.remove("light","dark"),e.classList.add(n),localStorage.setItem("lunanotes-theme",n)},[n]);return(0,Ue.jsx)(Fe.Provider,{value:{theme:n,toggleTheme:()=>{r(e=>"light"===e?"dark":"light")}},children:t})},Be=()=>{const{theme:e,toggleTheme:t}=ze();return(0,Ue.jsx)("button",{onClick:t,className:"text-2xl w-10 h-10 flex items-center justify-center rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors","aria-label":"Toggle theme",children:"light"===e?"\ud83e\udd0d":"\ud83d\udc97"})},He=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296===(64512&o)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++r)),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t},Ke={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<e.length;o+=3){const t=e[o],i=o+1<e.length,a=i?e[o+1]:0,s=o+2<e.length,l=s?e[o+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;s||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(He(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const o=e[n++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const i=e[n++];t[r++]=String.fromCharCode((31&o)<<6|63&i)}else if(o>239&&o<365){const i=((7&o)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&o)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<e.length;){const t=n[e.charAt(o++)],i=o<e.length?n[e.charAt(o)]:0;++o;const a=o<e.length?n[e.charAt(o)]:64;++o;const s=o<e.length?n[e.charAt(o)]:64;if(++o,null==t||null==i||null==a||null==s)throw new We;const l=t<<2|i>>4;if(r.push(l),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==s){const e=a<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class We extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qe=function(e){return function(e){const t=He(e);return Ke.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ge=function(e){try{return Ke.decodeString(e,!0)}catch(Zw){console.error("base64Decode failed: ",Zw)}return null};const Xe=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Ye=()=>{try{return Xe()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Zw){return}const t=e&&Ge(e[1]);return t&&JSON.parse(t)})()}catch(Zw){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(Zw))}},Qe=e=>{var t,n;return null===(n=null===(t=Ye())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},$e=e=>{const t=Qe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Je=()=>{var e;return null===(e=Ye())||void 0===e?void 0:e.config},Ze=e=>{var t;return null===(t=Ye())||void 0===t?void 0:t["_".concat(e)]};class et{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function tt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[qe(JSON.stringify({alg:"none",type:"JWT"})),qe(JSON.stringify(i)),""].join(".")}function nt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function rt(){return!function(){var e;const t=null===(e=Ye())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Zw){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ot(){try{return"object"===typeof indexedDB}catch(Zw){return!1}}class it extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,it.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,at.prototype.create)}}class at{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],o=r?function(e,t){return e.replace(st,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",i="".concat(this.serviceName,": ").concat(o," (").concat(n,").");return new it(n,i,t)}}const st=/\{\$([^}]+)}/g;function lt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const o of n){if(!r.includes(o))return!1;const n=e[o],i=t[o];if(ct(n)&&ct(i)){if(!lt(n,i))return!1}else if(n!==i)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function ct(e){return null!==e&&"object"===typeof e}function ut(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function dt(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function ht(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class ft{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=pt),void 0===r.error&&(r.error=pt),void 0===r.complete&&(r.complete=pt);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Zw){}}),this.observers.push(r),o}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Zw){"undefined"!==typeof console&&console.error&&console.error(Zw)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pt(){}function gt(e){return e&&e._delegate?e._delegate:e}class mt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const vt="[DEFAULT]";class yt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new et;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Zw){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Zw){if(r)return null;throw Zw}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:vt})}catch(Zw){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Zw){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[o,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(o)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),o=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;o.add(e),this.onInitCallbacks.set(r,o);const i=this.instances.get(r);return i&&e(i,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const o of n)try{o(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(o=t,o===vt?void 0:o),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var o;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt;return this.component?this.component.multipleInstances?e:vt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class bt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new yt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const wt=[];var Et;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Et||(Et={}));const St={debug:Et.DEBUG,verbose:Et.VERBOSE,info:Et.INFO,warn:Et.WARN,error:Et.ERROR,silent:Et.SILENT},_t=Et.INFO,kt={[Et.DEBUG]:"log",[Et.VERBOSE]:"log",[Et.INFO]:"info",[Et.WARN]:"warn",[Et.ERROR]:"error"},xt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=kt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class Ct{constructor(e){this.name=e,this._logLevel=_t,this._logHandler=xt,this._userLogHandler=null,wt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Et))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?St[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Et.DEBUG,...t),this._logHandler(this,Et.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Et.VERBOSE,...t),this._logHandler(this,Et.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Et.INFO,...t),this._logHandler(this,Et.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Et.WARN,...t),this._logHandler(this,Et.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Et.ERROR,...t),this._logHandler(this,Et.ERROR,...t)}}function Nt(e){return Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nt(e)}function Tt(e){var t=function(e,t){if("object"!=Nt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Nt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Nt(t)?t:t+""}function It(e,t,n){return(t=Tt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function At(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?At(Object(n),!0).forEach(function(t){It(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let Ot,Rt;const Dt=new WeakMap,Mt=new WeakMap,Lt=new WeakMap,jt=new WeakMap,Ut=new WeakMap;let Ft={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Mt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Lt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function zt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Rt||(Rt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ht(this),n),Bt(Dt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Bt(e.apply(Ht(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];const i=e.call(Ht(this),t,...r);return Lt.set(i,t.sort?t.sort():[t]),Bt(i)}}function Vt(e){return"function"===typeof e?zt(e):(e instanceof IDBTransaction&&function(e){if(Mt.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)});Mt.set(e,t)}(e),t=e,(Ot||(Ot=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Ft):e);var t}function Bt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",i)},o=()=>{t(Bt(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&Dt.set(t,e)}).catch(()=>{}),Ut.set(t,e),t}(e);if(jt.has(e))return jt.get(e);const t=Vt(e);return t!==e&&(jt.set(e,t),Ut.set(t,e)),t}const Ht=e=>Ut.get(e);const Kt=["get","getKey","getAll","getAllKeys","count"],Wt=["put","add","delete","clear"],qt=new Map;function Gt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(qt.get(t))return qt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=Wt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!Kt.includes(n))return;const i=async function(e){const t=this.transaction(e,o?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return r&&(i=i.index(s.shift())),(await Promise.all([i[n](...s),o&&t.done]))[0]};return qt.set(t,i),i}Ft=(e=>Pt(Pt({},e),{},{get:(t,n,r)=>Gt(t,n)||e.get(t,n,r),has:(t,n)=>!!Gt(t,n)||e.has(t,n)}))(Ft);class Xt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Yt="@firebase/app",Qt="0.10.13",$t=new Ct("@firebase/app"),Jt="@firebase/app-compat",Zt="@firebase/analytics-compat",en="@firebase/analytics",tn="@firebase/app-check-compat",nn="@firebase/app-check",rn="@firebase/auth",on="@firebase/auth-compat",an="@firebase/database",sn="@firebase/data-connect",ln="@firebase/database-compat",cn="@firebase/functions",un="@firebase/functions-compat",dn="@firebase/installations",hn="@firebase/installations-compat",fn="@firebase/messaging",pn="@firebase/messaging-compat",gn="@firebase/performance",mn="@firebase/performance-compat",vn="@firebase/remote-config",yn="@firebase/remote-config-compat",bn="@firebase/storage",wn="@firebase/storage-compat",En="@firebase/firestore",Sn="@firebase/vertexai-preview",_n="@firebase/firestore-compat",kn="firebase",xn="[DEFAULT]",Cn={[Yt]:"fire-core",[Jt]:"fire-core-compat",[en]:"fire-analytics",[Zt]:"fire-analytics-compat",[nn]:"fire-app-check",[tn]:"fire-app-check-compat",[rn]:"fire-auth",[on]:"fire-auth-compat",[an]:"fire-rtdb",[sn]:"fire-data-connect",[ln]:"fire-rtdb-compat",[cn]:"fire-fn",[un]:"fire-fn-compat",[dn]:"fire-iid",[hn]:"fire-iid-compat",[fn]:"fire-fcm",[pn]:"fire-fcm-compat",[gn]:"fire-perf",[mn]:"fire-perf-compat",[vn]:"fire-rc",[yn]:"fire-rc-compat",[bn]:"fire-gcs",[wn]:"fire-gcs-compat",[En]:"fire-fst",[_n]:"fire-fst-compat",[Sn]:"fire-vertex","fire-js":"fire-js",[kn]:"fire-js-all"},Nn=new Map,Tn=new Map,In=new Map;function An(e,t){try{e.container.addComponent(t)}catch(Zw){$t.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),Zw)}}function Pn(e){const t=e.name;if(In.has(t))return $t.debug("There were multiple attempts to register component ".concat(t,".")),!1;In.set(t,e);for(const n of Nn.values())An(n,e);for(const n of Tn.values())An(n,e);return!0}function On(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Rn(e){return void 0!==e.settings}const Dn=new at("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Mn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new mt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Dn.create("app-deleted",{appName:this._name})}}const Ln="10.14.1";function jn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:xn,automaticDataCollectionEnabled:!1},t),o=r.name;if("string"!==typeof o||!o)throw Dn.create("bad-app-name",{appName:String(o)});if(n||(n=Je()),!n)throw Dn.create("no-options");const i=Nn.get(o);if(i){if(lt(n,i.options)&&lt(r,i.config))return i;throw Dn.create("duplicate-app",{appName:o})}const a=new bt(o);for(const l of In.values())a.addComponent(l);const s=new Mn(n,r,a);return Nn.set(o,s),s}function Un(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn;const t=Nn.get(e);if(!t&&e===xn&&Je())return jn();if(!t)throw Dn.create("no-app",{appName:e});return t}function Fn(e,t,n){var r;let o=null!==(r=Cn[e])&&void 0!==r?r:e;n&&(o+="-".concat(n));const i=o.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=['Unable to register library "'.concat(o,'" with version "').concat(t,'":')];return i&&e.push('library name "'.concat(o,'" contains illegal characters (whitespace or "/")')),i&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void $t.warn(e.join(" "))}Pn(new mt("".concat(o,"-version"),()=>({library:o,version:t}),"VERSION"))}const zn="firebase-heartbeat-store";let Vn=null;function Bn(){return Vn||(Vn=function(e,t){let{blocked:n,upgrade:r,blocking:o,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),s=Bt(a);return r&&a.addEventListener("upgradeneeded",e=>{r(Bt(a.result),e.oldVersion,e.newVersion,Bt(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{i&&e.addEventListener("close",()=>i()),o&&e.addEventListener("versionchange",e=>o(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(zn)}catch(Zw){console.warn(Zw)}}}).catch(e=>{throw Dn.create("idb-open",{originalErrorMessage:e.message})})),Vn}async function Hn(e,t){try{const n=(await Bn()).transaction(zn,"readwrite"),r=n.objectStore(zn);await r.put(t,Kn(e)),await n.done}catch(Zw){if(Zw instanceof it)$t.warn(Zw.message);else{const t=Dn.create("idb-set",{originalErrorMessage:null===Zw||void 0===Zw?void 0:Zw.message});$t.warn(t.message)}}}function Kn(e){return"".concat(e.name,"!").concat(e.options.appId)}class Wn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Gn(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=qn();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(Zw){$t.warn(Zw)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=qn(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const o of e){const e=n.find(e=>e.agent===o.agent);if(e){if(e.dates.push(o.date),Xn(n)>t){e.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Xn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),o=qe(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(Zw){return $t.warn(Zw),""}}}function qn(){return(new Date).toISOString().substring(0,10)}class Gn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!ot()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var e;t((null===(e=o.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Bn()).transaction(zn),n=await t.objectStore(zn).get(Kn(e));return await t.done,n}catch(Zw){if(Zw instanceof it)$t.warn(Zw.message);else{const t=Dn.create("idb-get",{originalErrorMessage:null===Zw||void 0===Zw?void 0:Zw.message});$t.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Hn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Hn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Xn(e){return qe(JSON.stringify({version:2,heartbeats:e})).length}var Yn;Yn="",Pn(new mt("platform-logger",e=>new Xt(e),"PRIVATE")),Pn(new mt("heartbeat",e=>new Wn(e),"PRIVATE")),Fn(Yt,Qt,Yn),Fn(Yt,Qt,"esm2017"),Fn("fire-js","");Fn("firebase","10.14.1","app");function Qn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function $n(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Jn=$n,Zn=new at("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),er=new Ct("@firebase/auth");function tr(e){if(er.logLevel<=Et.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];er.error("Auth (".concat(Ln,"): ").concat(e),...n)}}function nr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw sr(e,...n)}function rr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return sr(e,...n)}function or(e,t,n){const r=Object.assign(Object.assign({},Jn()),{[t]:n});return new at("auth","Firebase",r).create(t,{appName:e.name})}function ir(e){return or(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ar(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&nr(e,"argument-error"),or(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function sr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Zn.create(e,...n)}function lr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];throw sr(t,...r)}}function cr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw tr(t),new Error(t)}function ur(e,t){e||cr(t)}function dr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function hr(){return"http:"===fr()||"https:"===fr()}function fr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function pr(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(hr()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class gr{constructor(e,t){this.shortDelay=e,this.longDelay=t,ur(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nt())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return pr()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mr(e,t){ur(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class vr{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const yr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},br=new gr(3e4,6e4);function wr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Er(e,t,n,r){return Sr(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let o={},i={};r&&("GET"===t?i=r:o={body:JSON.stringify(r)});const a=ut(Object.assign({key:e.config.apiKey},i)).slice(1),s=await e._getAdditionalHeaders();s["Content-Type"]="application/json",e.languageCode&&(s["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:s},o);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),vr.fetch()(kr(e,e.config.apiHost,n,a),l)})}async function Sr(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},yr),t);try{const t=new Cr(e),o=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await o.json();if("needConfirmation"in i)throw Nr(e,"account-exists-with-different-credential",i);if(o.ok&&!("errorMessage"in i))return i;{const t=o.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Nr(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw Nr(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw Nr(e,"user-disabled",i);const s=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw or(e,s,a);nr(e,s)}}catch(Zw){if(Zw instanceof it)throw Zw;nr(e,"network-request-failed",{message:String(Zw)})}}async function _r(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await Er(e,t,n,r,o);return"mfaPendingCredential"in i&&nr(e,"multi-factor-auth-required",{_serverResponse:i}),i}function kr(e,t,n,r){const o="".concat(t).concat(n,"?").concat(r);return e.config.emulator?mr(e.config,o):"".concat(e.config.apiScheme,"://").concat(o)}function xr(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Cr{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(rr(this.auth,"network-request-failed")),br.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Nr(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=rr(e,t,r);return o.customData._tokenResponse=n,o}function Tr(e){return void 0!==e&&void 0!==e.enterprise}class Ir{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return xr(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Ar(e,t){return Er(e,"GET","/v2/recaptchaConfig",wr(e,t))}async function Pr(e,t){return Er(e,"POST","/v1/accounts:lookup",t)}function Or(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Zw){}}function Rr(e){return 1e3*Number(e)}function Dr(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return tr("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ge(n);return e?JSON.parse(e):(tr("Failed to decode base64 JWT payload"),null)}catch(Zw){return tr("Caught error parsing JWT payload as JSON",null===Zw||void 0===Zw?void 0:Zw.toString()),null}}function Mr(e){const t=Dr(e);return lr(t,"internal-error"),lr("undefined"!==typeof t.exp,"internal-error"),lr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Lr(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Zw){throw Zw instanceof it&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(Zw)&&e.auth.currentUser===e&&await e.auth.signOut(),Zw}}class jr{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Zw){return void((null===Zw||void 0===Zw?void 0:Zw.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Ur{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Or(this.lastLoginAt),this.creationTime=Or(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Fr(e){var t;const n=e.auth,r=await e.getIdToken(),o=await Lr(e,Pr(n,{idToken:r}));lr(null===o||void 0===o?void 0:o.users.length,n,"internal-error");const i=o.users[0];e._notifyReloadListener(i);const a=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?zr(i.providerUserInfo):[],s=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&i.passwordHash)&&!(null===s||void 0===s?void 0:s.length),h=!!u&&d,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ur(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function zr(e){return e.map(e=>{var{providerId:t}=e,n=Qn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Vr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){lr(e.idToken,"internal-error"),lr("undefined"!==typeof e.idToken,"internal-error"),lr("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Mr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){lr(0!==e.length,"internal-error");const t=Mr(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(lr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:o}=await async function(e,t){const n=await Sr(e,{},async()=>{const n=ut({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:o}=e.config,i=kr(e,r,"/v1/token","key=".concat(o)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",vr.fetch()(i,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(o))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:o}=t,i=new Vr;return n&&(lr("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(lr("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),o&&(lr("number"===typeof o,"internal-error",{appName:e}),i.expirationTime=o),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vr,this.toJSON())}_performRefresh(){return cr("not implemented")}}function Br(e,t){lr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Hr{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,o=Qn(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ur(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Lr(this,this.stsTokenManager.getToken(this.auth,e));return lr(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=gt(e),r=await n.getIdToken(t),o=Dr(r);lr(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const i="object"===typeof o.firebase?o.firebase:void 0,a=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:o,token:r,authTime:Or(Rr(o.auth_time)),issuedAtTime:Or(Rr(o.iat)),expirationTime:Or(Rr(o.exp)),signInProvider:a||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=gt(e);await Fr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(lr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Hr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){lr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Fr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rn(this.auth.app))return Promise.reject(ir(this.auth));const e=await this.getIdToken();return await Lr(this,async function(e,t){return Er(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,o,i,a,s,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(o=t.phoneNumber)&&void 0!==o?o:void 0,f=null!==(i=t.photoURL)&&void 0!==i?i:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,g=null!==(s=t._redirectEventId)&&void 0!==s?s:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:E,stsTokenManager:S}=t;lr(y&&S,e,"internal-error");const _=Vr.fromJSON(this.name,S);lr("string"===typeof y,e,"internal-error"),Br(u,e.name),Br(d,e.name),lr("boolean"===typeof b,e,"internal-error"),lr("boolean"===typeof w,e,"internal-error"),Br(h,e.name),Br(f,e.name),Br(p,e.name),Br(g,e.name),Br(m,e.name),Br(v,e.name);const k=new Hr({uid:y,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:_,createdAt:m,lastLoginAt:v});return E&&Array.isArray(E)&&(k.providerData=E.map(e=>Object.assign({},e))),g&&(k._redirectEventId=g),k}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Vr;r.updateFromServerResponse(t);const o=new Hr({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Fr(o),o}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];lr(void 0!==r.localId,"internal-error");const o=void 0!==r.providerUserInfo?zr(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null===o||void 0===o?void 0:o.length),a=new Vr;a.updateFromIdToken(n);const s=new Hr({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Ur(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===o||void 0===o?void 0:o.length)};return Object.assign(s,l),s}}const Kr=new Map;function Wr(e){ur(e instanceof Function,"Expected a class definition");let t=Kr.get(e);return t?(ur(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Kr.set(e,t),t)}class qr{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}qr.type="NONE";const Gr=qr;function Xr(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Yr{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:o}=this.auth;this.fullUserKey=Xr(this.userKey,r.apiKey,o),this.fullPersistenceKey=Xr("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Hr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Yr(Wr(Gr),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let o=r[0]||Wr(Gr);const i=Xr(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){const n=Hr._fromJSON(e,t);c!==o&&(a=n),o=c;break}}catch(l){}const s=r.filter(e=>e._shouldAllowMigration);return o._shouldAllowMigration&&s.length?(o=s[0],a&&await o._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==o)try{await e._remove(i)}catch(l){}})),new Yr(o,e,n)):new Yr(o,e,n)}}function Qr(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(eo(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if($r(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(no(t))return"Blackberry";if(ro(t))return"Webos";if(Jr(t))return"Safari";if((t.includes("chrome/")||Zr(t))&&!t.includes("edge/"))return"Chrome";if(to(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function $r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt();return/firefox\//i.test(e)}function Jr(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Zr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt();return/crios\//i.test(e)}function eo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt();return/iemobile/i.test(e)}function to(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt();return/android/i.test(e)}function no(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt();return/blackberry/i.test(e)}function ro(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt();return/webos/i.test(e)}function oo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function io(){return function(){const e=nt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function ao(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt();return oo(e)||to(e)||ro(e)||no(e)||/windows phone/i.test(e)||eo(e)}function so(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Qr(nt());break;case"Worker":t="".concat(Qr(nt()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Ln,"/").concat(r)}class lo{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(Zw){r(Zw)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Zw){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Zw||void 0===Zw?void 0:Zw.message})}}}class co{constructor(e){var t,n,r,o;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(o=e.forceUpgradeOnSignin)&&void 0!==o&&o,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,o,i,a;const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(r=s.containsLowercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(o=s.containsUppercaseLetter)||void 0===o||o),s.isValid&&(s.isValid=null===(i=s.containsNumericCharacter)||void 0===i||i),s.isValid&&(s.isValid=null===(a=s.containsNonAlphanumericCharacter)||void 0===a||a),s}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class uo{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fo(this),this.idTokenSubscription=new fo(this),this.beforeStateQueue=new lo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Wr(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Yr.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Zw){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Pr(this,{idToken:e}),n=await Hr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Rn(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==i||!(null===a||void 0===a?void 0:a.user)||(r=a.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(Zw){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(Zw))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return lr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Zw){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Fr(e)}catch(Zw){if((null===Zw||void 0===Zw?void 0:Zw.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rn(this.app))return Promise.reject(ir(this));const t=e?gt(e):null;return t&&lr(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&lr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rn(this.app)?Promise.reject(ir(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rn(this.app)?Promise.reject(ir(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wr(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Er(e,"GET","/v2/passwordPolicy",wr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new co(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new at("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Er(e,"POST","/v2/accounts:revokeToken",wr(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Wr(e)||this._popupRedirectResolver;lr(t,this,"argument-error"),this.redirectPersistenceManager=await Yr.create(this,[Wr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const o="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(lr(a,this,"internal-error"),a.then(()=>{i||o(this.currentUser)}),"function"===typeof t){const o=e.addObserver(t,n,r);return()=>{i=!0,o()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return lr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=so(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(er.logLevel<=Et.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];er.warn("Auth (".concat(Ln,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function ho(e){return gt(e)}class fo{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new ft(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return lr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let po={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function go(e){return po.loadJS(e)}function mo(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class vo{constructor(e){this.type="recaptcha-enterprise",this.auth=ho(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const o=window.grecaptcha;Tr(o)?o.enterprise.ready(()=>{o.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Ar(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Ir(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(o=>{if(!t&&Tr(window.grecaptcha))n(o,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=po.recaptchaEnterpriseScript;0!==t.length&&(t+=o),go(t).then(()=>{n(o,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function yo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=new vo(e);let i;try{i=await o.verify(n)}catch(s){i=await o.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function bo(e,t,n,r){var o;if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await yo(e,t,n,"getOobCode"===n);return r(e,o)}return r(e,t).catch(async o=>{if(o.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const o=await yo(e,t,n,"getOobCode"===n);return r(e,o)}return Promise.reject(o)})}function wo(e,t,n){const r=ho(e);lr(r._canInitEmulator,r,"emulator-config-failed"),lr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const o=!!(null===n||void 0===n?void 0:n.disableWarnings),i=Eo(t),{host:a,port:s}=function(e){const t=Eo(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const e=o[1];return{host:e,port:So(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:So(t)}}}(t),l=null===s?"":":".concat(s);r.config.emulator={url:"".concat(i,"//").concat(a).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:s,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:o})}),o||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Eo(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function So(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class _o{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return cr("not implemented")}_getIdTokenResponse(e){return cr("not implemented")}_linkToIdToken(e,t){return cr("not implemented")}_getReauthenticationResolver(e){return cr("not implemented")}}async function ko(e,t){return Er(e,"POST","/v1/accounts:signUp",t)}async function xo(e,t){return _r(e,"POST","/v1/accounts:signInWithPassword",wr(e,t))}class Co extends _o{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Co(e,t,"password")}static _fromEmailAndCode(e,t){return new Co(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return bo(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",xo);case"emailLink":return async function(e,t){return _r(e,"POST","/v1/accounts:signInWithEmailLink",wr(e,t))}(e,{email:this._email,oobCode:this._password});default:nr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return bo(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ko);case"emailLink":return async function(e,t){return _r(e,"POST","/v1/accounts:signInWithEmailLink",wr(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:nr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function No(e,t){return _r(e,"POST","/v1/accounts:signInWithIdp",wr(e,t))}class To extends _o{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new To(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):nr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,o=Qn(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new To(n,r);return i.idToken=o.idToken||void 0,i.accessToken=o.accessToken||void 0,i.secret=o.secret,i.nonce=o.nonce,i.pendingToken=o.pendingToken||null,i}_getIdTokenResponse(e){return No(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,No(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,No(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ut(t)}return e}}const Io={USER_NOT_FOUND:"user-not-found"};class Ao extends _o{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ao({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ao({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return _r(e,"POST","/v1/accounts:signInWithPhoneNumber",wr(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await _r(e,"POST","/v1/accounts:signInWithPhoneNumber",wr(e,t));if(n.temporaryProof)throw Nr(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return _r(e,"POST","/v1/accounts:signInWithPhoneNumber",wr(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Io)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:o}=e;return n||t||r||o?new Ao({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:o}):null}}class Po{constructor(e){var t,n,r,o,i,a;const s=dt(ht(e)),l=null!==(t=s.apiKey)&&void 0!==t?t:null,c=null!==(n=s.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=s.mode)&&void 0!==r?r:null);lr(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(o=s.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(i=s.languageCode)&&void 0!==i?i:null,this.tenantId=null!==(a=s.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=dt(ht(e)).link,n=t?dt(ht(t)).deep_link_id:null,r=dt(ht(e)).deep_link_id;return(r?dt(ht(r)).link:null)||r||n||t||e}(e);try{return new Po(t)}catch(n){return null}}}class Oo{constructor(){this.providerId=Oo.PROVIDER_ID}static credential(e,t){return Co._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Po.parseLink(t);return lr(n,"argument-error"),Co._fromEmailAndCode(e,n.code,n.tenantId)}}Oo.PROVIDER_ID="password",Oo.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Oo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ro{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Do extends Ro{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Mo extends Do{constructor(){super("facebook.com")}static credential(e){return To._fromParams({providerId:Mo.PROVIDER_ID,signInMethod:Mo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mo.credentialFromTaggedObject(e)}static credentialFromError(e){return Mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Mo.credential(t.oauthAccessToken)}catch(n){return null}}}Mo.FACEBOOK_SIGN_IN_METHOD="facebook.com",Mo.PROVIDER_ID="facebook.com";class Lo extends Do{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return To._fromParams({providerId:Lo.PROVIDER_ID,signInMethod:Lo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Lo.credentialFromTaggedObject(e)}static credentialFromError(e){return Lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Lo.credential(n,r)}catch(o){return null}}}Lo.GOOGLE_SIGN_IN_METHOD="google.com",Lo.PROVIDER_ID="google.com";class jo extends Do{constructor(){super("github.com")}static credential(e){return To._fromParams({providerId:jo.PROVIDER_ID,signInMethod:jo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jo.credentialFromTaggedObject(e)}static credentialFromError(e){return jo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return jo.credential(t.oauthAccessToken)}catch(n){return null}}}jo.GITHUB_SIGN_IN_METHOD="github.com",jo.PROVIDER_ID="github.com";class Uo extends Do{constructor(){super("twitter.com")}static credential(e,t){return To._fromParams({providerId:Uo.PROVIDER_ID,signInMethod:Uo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Uo.credentialFromTaggedObject(e)}static credentialFromError(e){return Uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Uo.credential(n,r)}catch(o){return null}}}Uo.TWITTER_SIGN_IN_METHOD="twitter.com",Uo.PROVIDER_ID="twitter.com";class Fo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=await Hr._fromIdTokenResponse(e,n,r),i=zo(n);return new Fo({user:o,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=zo(n);return new Fo({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function zo(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Vo extends it{constructor(e,t,n,r){var o;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Vo.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Vo(e,t,n,r)}}function Bo(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Vo._fromErrorAndOperation(e,n,t,r);throw n})}async function Ho(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Lr(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Fo._forOperation(e,"link",r)}async function Ko(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Rn(r.app))return Promise.reject(ir(r));const o="reauthenticate";try{const i=await Lr(e,Bo(r,o,t,e),n);lr(i.idToken,r,"internal-error");const a=Dr(i.idToken);lr(a,r,"internal-error");const{sub:s}=a;return lr(e.uid===s,r,"user-mismatch"),Fo._forOperation(e,o,i)}catch(Zw){throw(null===Zw||void 0===Zw?void 0:Zw.code)==="auth/".concat("user-not-found")&&nr(r,"user-mismatch"),Zw}}async function Wo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Rn(e.app))return Promise.reject(ir(e));const r="signIn",o=await Bo(e,r,t),i=await Fo._fromIdTokenResponse(e,r,o);return n||await e._updateCurrentUser(i.user),i}function qo(e,t,n,r){return gt(e).onAuthStateChanged(t,n,r)}new WeakMap;const Go="__sak";class Xo{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Go,"1"),this.storage.removeItem(Go),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Yo extends Xo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ao(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},o=this.storage.getItem(n);io()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Yo.type="LOCAL";const Qo=Yo;class $o extends Xo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}$o.type="SESSION";const Jo=$o;class Zo{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Zo(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:o}=t.data,i=this.handlersMap[r];if(!(null===i||void 0===i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map(async e=>e(t.origin,o)),s=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ei(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Zo.receivers=[];class ti{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,i;return new Promise((a,s)=>{const l=ei("",20);r.port1.start();const c=setTimeout(()=>{s(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),o=setTimeout(()=>{s(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(t.data.response);break;default:clearTimeout(c),clearTimeout(o),s(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function ni(){return window}function ri(){return"undefined"!==typeof ni().WorkerGlobalScope&&"function"===typeof ni().importScripts}const oi="firebaseLocalStorageDb",ii="firebaseLocalStorage",ai="fbase_key";class si{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function li(e,t){return e.transaction([ii],t?"readwrite":"readonly").objectStore(ii)}function ci(){const e=indexedDB.open(oi,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(ii,{keyPath:ai})}catch(Zw){n(Zw)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(ii)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(oi);return new si(e).toPromise()}(),t(await ci()))})})}async function ui(e,t,n){const r=li(e,!0).put({[ai]:t,value:n});return new si(r).toPromise()}function di(e,t){const n=li(e,!0).delete(t);return new si(n).toPromise()}class hi{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await ci()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Zw){if(t++>3)throw Zw;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ri()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zo._getInstance(ri()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new ti(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ci();return await ui(e,Go,"1"),await di(e,Go),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>ui(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=li(e,!1).get(t),r=await new si(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>di(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=li(e,!1).getAll();return new si(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:o}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}hi.type="LOCAL";const fi=hi;mo("rcb"),new gr(3e4,6e4);const pi="recaptcha";async function gi(e,t,n){var r;const o=await n.verify();try{let i;if(lr("string"===typeof o,e,"argument-error"),lr(n.type===pi,e,"argument-error"),i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){lr("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Er(e,"POST","/v2/accounts/mfaEnrollment:start",wr(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:o}});return n.phoneSessionInfo.sessionInfo}{lr("signin"===t.type,e,"internal-error");const n=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;lr(n,e,"missing-multi-factor-info");const a=await function(e,t){return Er(e,"POST","/v2/accounts/mfaSignIn:start",wr(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:o}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Er(e,"POST","/v1/accounts:sendVerificationCode",wr(e,t))}(e,{phoneNumber:i.phoneNumber,recaptchaToken:o});return t}}finally{n._reset()}}class mi{constructor(e){this.providerId=mi.PROVIDER_ID,this.auth=ho(e)}verifyPhoneNumber(e,t){return gi(this.auth,e,gt(t))}static credential(e,t){return Ao._fromVerification(e,t)}static credentialFromResult(e){const t=e;return mi.credentialFromTaggedObject(t)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Ao._fromTokenResponse(n,r):null}}function vi(e,t){return t?Wr(t):(lr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}mi.PROVIDER_ID="phone",mi.PHONE_SIGN_IN_METHOD="phone";class yi extends _o{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return No(e,this._buildIdpRequest())}_linkToIdToken(e,t){return No(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return No(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function bi(e){return Wo(e.auth,new yi(e),e.bypassAuthState)}function wi(e){const{auth:t,user:n}=e;return lr(n,t,"internal-error"),Ko(n,new yi(e),e.bypassAuthState)}async function Ei(e){const{auth:t,user:n}=e;return lr(n,t,"internal-error"),Ho(n,new yi(e),e.bypassAuthState)}class Si{constructor(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Zw){this.reject(Zw)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:o,error:i,type:a}=e;if(i)return void this.reject(i);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(s))}catch(Zw){this.reject(Zw)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bi;case"linkViaPopup":case"linkViaRedirect":return Ei;case"reauthViaPopup":case"reauthViaRedirect":return wi;default:nr(this.auth,"internal-error")}}resolve(e){ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _i=new gr(2e3,1e4);class ki extends Si{constructor(e,t,n,r,o){super(e,t,r,o),this.provider=n,this.authWindow=null,this.pollId=null,ki.currentPopupAction&&ki.currentPopupAction.cancel(),ki.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return lr(e,this.auth,"internal-error"),e}async onExecution(){ur(1===this.filter.length,"Popup operations only handle one event");const e=ei();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(rr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(rr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ki.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(rr(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,_i.get())};e()}}ki.currentPopupAction=null;const xi=new Map;class Ci extends Si{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=xi.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Ii(t),r=Ti(e);if(!await r._isAvailable())return!1;const o="true"===await r._get(n);return await r._remove(n),o}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(Zw){e=()=>Promise.reject(Zw)}xi.set(this.auth._key(),e)}return this.bypassAuthState||xi.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ni(e,t){xi.set(e._key(),t)}function Ti(e){return Wr(e._redirectPersistence)}function Ii(e){return Xr("pendingRedirect",e.config.apiKey,e.name)}async function Ai(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Rn(e.app))return Promise.reject(ir(e));const r=ho(e),o=vi(r,t),i=new Ci(r,o,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Pi{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ri(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Ri(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(rr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Oi(e))}saveEventToCache(e){this.cachedEventUids.add(Oi(e)),this.lastProcessedEventTime=Date.now()}}function Oi(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Ri(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Di=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Mi=/^https?/;async function Li(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Er(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(ji(r))return}catch(n){}nr(e,"unauthorized-domain")}function ji(e){const t=dr(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return""===o.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&o.hostname===r}if(!Mi.test(n))return!1;if(Di.test(e))return r===e;const o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}const Ui=new gr(3e4,6e4);function Fi(){const e=ni().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function zi(e){return new Promise((t,n)=>{var r,o,i;function a(){Fi(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Fi(),n(rr(e,"network-request-failed"))},timeout:Ui.get()})}if(null===(o=null===(r=ni().gapi)||void 0===r?void 0:r.iframes)||void 0===o?void 0:o.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=ni().gapi)||void 0===i?void 0:i.load)){const t=mo("iframefcb");return ni()[t]=()=>{gapi.load?a():n(rr(e,"network-request-failed"))},go("".concat(po.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}a()}}).catch(e=>{throw Vi=null,e})}let Vi=null;const Bi=new gr(5e3,15e3),Hi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ki=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Wi(e){const t=e.config;lr(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?mr(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Ln},o=Ki.get(e.config.apiHost);o&&(r.eid=o);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),"".concat(n,"?").concat(ut(r).slice(1))}async function qi(e){const t=await function(e){return Vi=Vi||zi(e),Vi}(e),n=ni().gapi;return lr(n,e,"internal-error"),t.open({where:document.body,url:Wi(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Hi,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const o=rr(e,"network-request-failed"),i=ni().setTimeout(()=>{r(o)},Bi.get());function a(){ni().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{r(o)})}))}const Gi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Xi{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Zw){}}}function Yi(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-o)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const l=Object.assign(Object.assign({},Gi),{width:r.toString(),height:o.toString(),top:i,left:a}),c=nt().toLowerCase();n&&(s=Zr(c)?"_blank":n),$r(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return oo(arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==s)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new Xi(null);const d=window.open(t||"",s,u);lr(d,e,"popup-blocked");try{d.focus()}catch(Zw){}return new Xi(d)}const Qi="__/auth/handler",$i="emulator/auth/handler",Ji=encodeURIComponent("fac");async function Zi(e,t,n,r,o,i){lr(e.config.authDomain,e,"auth-domain-config-required"),lr(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ln,eventId:o};if(t instanceof Ro){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))a[e]=t}if(t instanceof Do){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const s=a;for(const u of Object.keys(s))void 0===s[u]&&delete s[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Ji,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Qi);return mr(t,$i)}(e),"?").concat(ut(s).slice(1)).concat(c)}const ea="webStorageSupport";const ta=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jo,this._completeRedirectFn=Ai,this._overrideRedirectResult=Ni}async _openPopup(e,t,n,r){var o;ur(null===(o=this.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");return Yi(e,await Zi(e,t,n,dr(),r),ei())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){ni().location.href=e}(await Zi(e,t,n,dr(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(ur(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await qi(e),n=new Pi(e);return t.register("authEvent",t=>{lr(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ea,{type:ea},n=>{var r;const o=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[ea];void 0!==o&&t(!!o),nr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Li(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ao()||Jr()||oo()}};var na="@firebase/auth",ra="1.7.9";class oa{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){lr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ia=Ze("authIdTokenMaxAge")||300;let aa=null;var sa;po={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=rr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},sa="Browser",Pn(new mt("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:s}=r.options;lr(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:s,clientPlatform:sa,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:so(sa)},c=new uo(r,o,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Wr);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Pn(new mt("auth-internal",e=>(e=>new oa(e))(ho(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Fn(na,ra,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(sa)),Fn(na,ra,"esm2017");var la,ca="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ua={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var o=0;16>o;++o)r[o]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(o=0;16>o;++o)r[o]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],o=e.g[2];var i=e.g[3],a=t+(i^n&(o^i))+r[0]+3614090360&4294967295;a=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=(n=(o=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(o^t&(n^o))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=o+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^o&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(o^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(o^t&(n^o))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=o+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^o&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(o^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(o^t&(n^o))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=o+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^o&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(o^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(o^t&(n^o))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=o+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^o&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^i&(n^o))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^o&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=o+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(o^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(o^i&(n^o))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^o&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=o+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(o^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(o^i&(n^o))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^o&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=o+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(o^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(o^i&(n^o))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^o&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=o+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(o^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^o^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^o)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=o+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(o^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^o^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^o)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=o+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(o^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^o^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^o)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=o+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(o^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^o^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^o)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=o+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(o^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(o^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~o))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=o+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(o|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(o^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~o))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=o+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(o|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(o^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~o))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=o+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(o|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(o^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~o))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((o=i+((a=o+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(o+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+o&4294967295,e.g[3]=e.g[3]+i&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,o=e.length-1;0<=o;o--){var i=0|e[o];r&&i==t||(n[o]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var o=Array(arguments.length-2),i=2;i<arguments.length;i++)o[i-2]=arguments[i];return t.prototype[n].apply(e,o)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,o=this.B,i=this.h,a=0;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(o[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,o),i=0;break}}else for(;a<t;)if(o[i++]=e[a++],i==this.blockSize){n(this,o),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var o={};function i(e){return-128<=e&&128>e?function(e,t){var n=o;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return s;if(0>e)return h(a(-e));for(var t=[],n=1,o=0;e>=n;o++)t[o]=e/n|0,n*=4294967296;return new r(t,0)}var s=i(0),l=i(1),c=i(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],o=0;o<t;o++)n[o]=~e.g[o];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(u(t))throw Error("division by zero");if(u(e))return new g(s,s);if(d(e))return t=m(h(e),t),new g(h(t.g),h(t.h));if(d(t))return t=m(e,h(t)),new g(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var o=y(n,1),i=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=i.add(r);0>=c.l(e)&&(o=o.add(n),i=c),r=y(r,1),n=y(n,1)}return t=f(e,o.j(t)),new g(o,t)}for(o=s;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(i=a(n)).j(t);d(c)||0<c.l(e);)c=(i=a(n-=r)).j(t);u(i)&&(i=l),o=o.add(i),e=f(e,c)}return new g(o,e)}function v(e){for(var t=e.g.length+1,n=[],o=0;o<t;o++)n[o]=e.i(o)<<1|e.i(o-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var o=e.g.length-n,i=[],a=0;a<o;a++)i[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var o=m(n,t).g,i=((0<(n=f(n,o.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=o))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],o=0,i=0;i<=t;i++){var a=o+(65535&this.i(i))+(65535&e.i(i)),s=(a>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);o=s>>>16,a&=65535,s&=65535,n[i]=s<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return s;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],o=0;o<2*t;o++)n[o]=0;for(o=0;o<this.g.length;o++)for(var i=0;i<e.g.length;i++){var l=this.i(o)>>>16,f=65535&this.i(o),g=e.i(i)>>>16,m=65535&e.i(i);n[2*o+2*i]+=f*m,p(n,2*o+2*i),n[2*o+2*i+1]+=l*m,p(n,2*o+2*i+1),n[2*o+2*i+1]+=f*g,p(n,2*o+2*i+1),n[2*o+2*i+2]+=l*g,p(n,2*o+2*i+2)}for(o=0;o<t;o++)n[o]=n[2*o+1]<<16|n[2*o];for(o=t;o<2*t;o++)n[o]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],o=0;o<t;o++)n[o]=this.i(o)&e.i(o);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],o=0;o<t;o++)n[o]=this.i(o)|e.i(o);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],o=0;o<t;o++)n[o]=this.i(o)^e.i(o);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,ua.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),o=s,i=0;i<t.length;i+=8){var l=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+l),n);8>l?(l=a(Math.pow(n,l)),o=o.j(l).add(a(c))):o=(o=o.j(r)).add(a(c))}return o},la=ua.Integer=r}).apply("undefined"!==typeof ca?ca:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var da,ha,fa,pa,ga,ma,va,ya,ba="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},wa={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ba&&ba];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var o=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in o))break e;o=o[a]}(r=r(i=o[e=e[e.length-1]]))!=i&&null!=r&&t(o,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,o={next:function(){if(!r&&n<e.length){var o=n++;return{value:t(o,e[o]),done:!1}}return r=!0,{done:!0,value:void 0}}};return o[Symbol.iterator]=function(){return o},o}(this,function(e,t){return t})}});var r=r||{},o=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function s(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?s:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var o=Array(arguments.length-2),i=2;i<arguments.length;i++)o[i-2]=arguments[i];return t.prototype[n].apply(e,o)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let o=0;o<r;o++)e[n+o]=t[o]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=o.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var v=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(e,t){let n,r;for(let o=1;o<arguments.length;o++){for(n in r=arguments[o],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function S(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function _(e){o.setTimeout(()=>{throw e},0)}function k(){var e=I;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var x=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new C,e=>e.reset());class C{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let N,T=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){const n=x.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=o.Promise.resolve(void 0);N=()=>{e.then(P)}};var P=()=>{for(var e;e=k();){try{e.h.call(e.g)}catch(n){_(n)}var t=x;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}T=!1};function O(){this.s=this.s,this.C=this.C}function R(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},R.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};o.addEventListener("test",e,t),o.removeEventListener("test",e,t)}catch(n){}return e}();function M(e,t){if(R.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{m(t.nodeName);var o=!0;break e}catch(i){}o=!1}o||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&M.aa.h.call(this)}}d(M,R);var L={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var j="closure_listenable_"+(1e6*Math.random()|0),U=0;function F(e,t,n,r,o){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=o,this.key=++U,this.da=this.fa=!1}function z(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function V(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,o=e.g[n],i=Array.prototype.indexOf.call(o,t,void 0);(r=0<=i)&&Array.prototype.splice.call(o,i,1),r&&(z(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function H(e,t,n,r){for(var o=0;o<e.length;++o){var i=e[o];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return o}return-1}V.prototype.add=function(e,t,n,r,o){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=H(e,t,r,o);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new F(t,this.src,i,!!r,o)).fa=n,e.push(t)),t};var K="closure_lm_"+(1e6*Math.random()|0),W={};function q(e,t,n,r,o){if(r&&r.once)return X(e,t,n,r,o);if(Array.isArray(t)){for(var i=0;i<t.length;i++)q(e,t[i],n,r,o);return null}return n=te(n),e&&e[j]?e.K(t,n,a(r)?!!r.capture:!!r,o):G(e,t,n,!1,r,o)}function G(e,t,n,r,o,i){if(!t)throw Error("Invalid event type");var s=a(o)?!!o.capture:!!o,l=Z(e);if(l||(e[K]=l=new V(e)),(n=l.add(t,n,r,s,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)D||(o=s),void 0===o&&(o=!1),e.addEventListener(t.toString(),r,o);else if(e.attachEvent)e.attachEvent($(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function X(e,t,n,r,o){if(Array.isArray(t)){for(var i=0;i<t.length;i++)X(e,t[i],n,r,o);return null}return n=te(n),e&&e[j]?e.L(t,n,a(r)?!!r.capture:!!r,o):G(e,t,n,!0,r,o)}function Y(e,t,n,r,o){if(Array.isArray(t))for(var i=0;i<t.length;i++)Y(e,t[i],n,r,o);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[j]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=H(i=e.g[t],n,r,o))&&(z(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=H(t,n,r,o)),(n=-1<e?t[e]:null)&&Q(n))}function Q(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[j])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent($(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[K]=null)):z(e)}}}function $(e){return e in W?W[e]:W[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new M(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Q(e),e=n.call(r,t)}return e}function Z(e){return(e=e[K])instanceof V?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){O.call(this),this.i=new V(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new R(t,e);else if(t instanceof R)t.target=t.target||e;else{var o=t;E(t=new R(r,e),o)}if(o=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];o=oe(a,r,!0,t)&&o}if(o=oe(a=t.g=e,r,!0,t)&&o,o=oe(a,r,!1,t)&&o,n)for(i=0;i<n.length;i++)o=oe(a=t.g=n[i],r,!1,t)&&o}function oe(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var o=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.da&&a.capture==n){var s=a.listener,l=a.ha||a.src;a.fa&&B(e.i,a),o=!1!==s.call(l,r)&&o}}return o&&!r.defaultPrevented}function ie(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:o.setTimeout(e,t||0)}function ae(e){e.g=ie(()=>{e.g=null,e.i&&(e.i=!1,ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,O),ne.prototype[j]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)z(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class se extends O{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){O.call(this),this.h=e,this.g={}}d(le,O);var ce=[];function ue(e){y(e.g,function(e,t){this.g.hasOwnProperty(t)&&Q(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=o.JSON.stringify,he=o.JSON.parse,fe=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function pe(){}function ge(e){return e.h||(e.h=e.i())}function me(){}pe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){R.call(this,"d")}function be(){R.call(this,"c")}d(ye,R),d(be,R);var we={},Ee=null;function Se(){return Ee=Ee||new ne}function _e(e){R.call(this,we.La,e)}function ke(e){const t=Se();re(t,new _e(t))}function xe(e,t){R.call(this,we.STAT_EVENT,e),this.stat=t}function Ce(e){const t=Se();re(t,new xe(t,e))}function Ne(e,t){R.call(this,we.Ma,e),this.size=t}function Te(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){e()},t)}function Ie(){this.g=!0}function Ae(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var i=o[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<o.length;a++)o[a]=""}}}return de(n)}catch(s){return t}}(e,n)+(r?" "+r:"")})}we.La="serverreachability",d(_e,R),we.STAT_EVENT="statevent",d(xe,R),we.Ma="timingevent",d(Ne,R),Ie.prototype.xa=function(){this.g=!1},Ie.prototype.info=function(){};var Pe,Oe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Re={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function Me(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}d(De,pe),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},Pe=new De;var je={},Ue={};function Fe(e,t,n){e.L=1,e.v=dt(at(t)),e.m=n,e.P=!0,ze(e,null)}function ze(e,t){e.F=Date.now(),He(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),xt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Le,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new se(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var o="readystatechange";Array.isArray(o)||(o&&(ce[0]=o.toString()),o=ce);for(var i=0;i<o.length;i++){var a=q(n,o[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ke(),function(e,t,n,r,o,i){e.info(function(){if(e.g)if(i)for(var a="",s=i.split("&"),l=0;l<s.length;l++){var c=s[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ve(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ue:(n=Number(t.substring(n,r)),isNaN(n)?je:(r+=1)+n>t.length?Ue:(t=t.slice(r,r+n),e.C=r+n,t))}function He(e){e.S=Date.now()+e.I,Ke(e,e.I)}function Ke(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Te(c(e.ba,e),t)}function We(e){e.B&&(o.clearTimeout(e.B),e.B=null)}function qe(e){0==e.j.G||e.J||ln(e.j,e)}function Ge(e){We(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Xe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;sn(n),Qt(n)}rn(n),Ce(18)}}else n.za=o[1],0<n.za-n.T&&37500>o[2]&&n.F&&0==n.v&&!n.C&&(n.C=Te(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&sn(n),!p(t))for(o=n.Da.g.parse(t),t=0;t<o.length;t++){let c=o[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const o=c[4];null!=o&&(n.Aa=o,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(et(i,i.h),i.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=hn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var s=a,l=r.L;l&&(s.I=l),s.B&&(We(s),He(s)),r.g=a}else nn(r);0<n.i.length&&Jt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Yt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}ke()}catch(u){}}Me.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Wt(e)?t.j():this.Y(e)},Me.prototype.Y=function(e){try{if(e==this.g)e:{const h=Wt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||qt(this.g)))){this.J||4!=h||7==t||ke(),We(this);var n=this.g.Z();this.X=n;t:if(Ve(this)){var r=qt(this.g);e="";var i=r.length,a=4==Wt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),qe(this);var s="";break t}this.h.i=new o.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.oa();if(this.o=200==n,function(e,t,n,r,o,i,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ce(12),Ge(this),qe(this);break e}Ae(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<s.length;){if(e=Be(this,s),e==Ue){4==h&&(this.s=4,Ce(14),n=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(e==je){this.s=4,Ce(15),Ae(this.i,this.l,s,"[Invalid Chunk]"),n=!1;break}Ae(this.i,this.l,e,null),Xe(this,e)}if(Ve(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=s.length||this.h.h||(this.s=1,Ce(16),n=!1),this.o=this.o&&n,n){if(0<s.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+s.length),on(d),d.M=!0,Ce(11))}}else Ae(this.i,this.l,s,"[Invalid Chunked Response]"),Ge(this),qe(this)}else Ae(this.i,this.l,s,null),Xe(this,s);4==h&&Ge(this),this.o&&!this.J&&(4==h?ln(this.j,this):(this.o=!1,He(this)))}else(function(e){const t={};e=(e.g&&2<=Wt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=S(e[r]);const o=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[o]||[];t[o]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,Ce(12)):(this.s=0,Ce(13)),Ge(this),qe(this)}}}catch(Ea){}},Me.prototype.cancel=function(){this.J=!0,Ge(this)},Me.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(ke(),Ce(17)),Ge(this),this.s=2,qe(this)):Ke(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Qe(e){this.l=e||10,o.PerformanceNavigationTiming?e=0<(e=o.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $e(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),o=r.length,a=0;a<o;a++)t.call(void 0,r[a],n&&n[a],e)}Qe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var ot=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function it(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof it){this.h=e.h,st(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new Et;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(ot))?(this.h=!1,st(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new Et(null,this.h))}function at(e){return new it(e)}function st(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof Et?(e.i=t,function(e,t){t&&!e.j&&(St(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(_t(this,t),xt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,bt)),e.i=new Et(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}it.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,wt)),e.join("")};var gt,mt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,bt=/[#\?@]/g,wt=/#/g;function Et(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function St(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),o=null;if(0<=r){var i=e[n].substring(0,r);o=e[n].substring(r+1)}else i=e[n];t(i,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function _t(e,t){St(e),t=Ct(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function kt(e,t){return St(e),t=Ct(e,t),e.g.has(t)}function xt(e,t,n){_t(e,t),0<n.length&&(e.i=null,e.g.set(Ct(e,t),h(n)),e.h+=n.length)}function Ct(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Nt(e,t,n,r,o){try{o&&(o.onload=null,o.onerror=null,o.onabort=null,o.ontimeout=null),r(n)}catch(i){}}function Tt(){this.g=new fe}function It(e,t,n){const r=n||"";try{rt(e,function(e,n){let o=e;a(e)&&(o=de(e)),t.push(r+n+"="+encodeURIComponent(o))})}catch(Zw){throw t.push(r+"type="+encodeURIComponent("_badmap")),Zw}}function At(e){this.l=e.Ub||null,this.j=e.eb||!1}function Pt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Ot(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Rt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Dt(e)}function Dt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Mt(e){let t="";return y(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Lt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Mt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function jt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Et.prototype).add=function(e,t){St(this),this.i=null,e=Ct(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){St(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){St(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const o=e[r];for(let e=0;e<o.length;e++)n.push(t[r])}return n},e.V=function(e){St(this);let t=[];if("string"===typeof e)kt(this,e)&&(t=t.concat(this.g.get(Ct(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return St(this),this.i=null,kt(this,e=Ct(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")},d(At,pe),At.prototype.g=function(){return new Pt(this.l,this.j)},At.prototype.i=(gt={},function(){return gt}),d(Pt,ne),(e=Pt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Dt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||o).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dt(this)),this.g&&(this.readyState=3,Dt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof o.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ot(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Rt(this):Dt(this),3==this.readyState&&Ot(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Rt(this))},e.Qa=function(e){this.g&&(this.response=e,Rt(this))},e.ga=function(){this.g&&Rt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Pt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(jt,ne);var Ut=/^https?$/i,Ft=["POST","PUT"];function zt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Vt(e),Ht(e)}function Vt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Wt(e)||2!=e.Z()))if(e.u&&4==Wt(e))ie(e.Ea,0,e);else if(re(e,"readystatechange"),4==Wt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var a=String(e.D).match(ot)[1]||null;!a&&o.self&&o.self.location&&(a=o.self.location.protocol.slice(0,-1)),i=!Ut.test(a?a.toLowerCase():"")}n=i}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var s=2<Wt(e)?e.g.statusText:""}catch(l){s=""}e.l=s+" ["+e.Z()+"]",Vt(e)}}finally{Ht(e)}}}function Ht(e,t){if(e.g){Kt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(Zw){}}}function Kt(e){e.I&&(o.clearTimeout(e.I),e.I=null)}function Wt(e){return e.g?e.g.readyState:0}function qt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(ka){return null}}function Gt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Xt(e){this.Aa=0,this.i=[],this.j=new Ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gt("baseRetryDelayMs",5e3,e),this.cb=Gt("retryDelaySeedMs",1e4,e),this.Wa=Gt("forwardChannelMaxRetries",2,e),this.wa=Gt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Qe(e&&e.concurrentRequestLimit),this.Da=new Tt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Yt(e){if($t(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Me(e,e.j,t)).L=2,t.v=dt(at(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&o.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),He(t)}dn(e)}function Qt(e){e.g&&(on(e),e.g.cancel(),e.g=null)}function $t(e){Qt(e),e.u&&(o.clearTimeout(e.u),e.u=null),sn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&o.clearTimeout(e.s),e.s=null)}function Jt(e){if(!$e(e.h)&&!e.s){e.s=!0;var t=e.Ga;N||A(),T||(N(),T=!0),I.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Lt(r,e.m,e.o),n=new Me(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Fe(n,r,t)}function en(e,t){e.H&&y(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var o=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=o[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let a=0;a<n;a++){let n=o[a].g;const s=o[a].map;if(n-=t,0>n)t=Math.max(0,o[a].g-100),i=!1;else try{It(s,e,"req"+n+"_")}catch(Ea){r&&r(s)}}if(i){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;N||A(),T||(N(),T=!0),I.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Te(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function on(e){null!=e.A&&(o.clearTimeout(e.A),e.A=null)}function an(e){e.g=new Me(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(at(t)),n.m=null,n.P=!0,ze(n,e)}function sn(e){null!=e.C&&(o.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){sn(e),on(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var o=e.B;re(r=Se(),new Ne(r,n)),Jt(e)}else nn(e);else if(3==(o=t.s)||0==o&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Te(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),o){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new it(r||"//www.google.com/images/cleardot.gif"),o.location&&"http"==o.location.protocol||st(r,"https"),dt(r),t?function(e,t){const n=new Ie;if(o.Image){const r=new Image;r.onload=u(Nt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Nt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Nt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Nt,n,"TestLoadImage: timeout",!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ie;const n=new AbortController,r=setTimeout(()=>{n.abort(),Nt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Nt(0,0,!0,t):Nt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Nt(0,0,!1,t)})}(r.toString(),n)}else Ce(2);e.G=0,e.l&&e.l.sa(t),dn(e),$t(e)}function dn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function hn(e,t,n){var r=n instanceof it?at(n):new it(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var i=o.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new it(null);r&&st(a,r),t&&(a.g=t),i&&lt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new jt(new At({eb:n})):new jt(e.pa)).Ha(e.J),t}function pn(){}function gn(){}function mn(e,t){ne.call(this),this.g=new Xt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bn(this)}function vn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){be.call(this),this.status=1}function bn(e){this.g=e}(e=jt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pe.g(),this.v=this.o?ge(this.o):ge(Pe),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void zt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=o.FormData&&e instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Ft,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of n)this.g.setRequestHeader(o,s);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Kt(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){zt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Ht(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ht(this,!0)),jt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Wt(this)?this.g.status:-1}catch(gt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(gt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Xt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ce(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=hn(this,null,this.W),Jt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const o=new Me(this,this.j,e);let i=this.o;if(this.S&&(i?(i=b(i),E(i,this.S)):i=this.S),null!==this.m||this.O||(o.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,o,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Mt(i)))+"&"+t:this.m&&Lt(n,this.m,i)),et(this.h,o),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),o.T=!0,Fe(o,n,null)):Fe(o,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||$e(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,an(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Te(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ce(10),Qt(this),an(this))},e.Za=function(){null!=this.C&&(this.C=null,Qt(this),rn(this),Ce(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ce(2)):(this.j.info("Failed to ping google.com"),Ce(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},gn.prototype.g=function(e,t){return new mn(e,t)},d(mn,ne),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Yt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&Jt(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,mn.aa.N.call(this)},d(vn,ye),d(yn,be),d(bn,pn),bn.prototype.ua=function(){re(this.g,"a")},bn.prototype.ta=function(e){re(this.g,new vn(e))},bn.prototype.sa=function(e){re(this.g,new yn)},bn.prototype.ra=function(){re(this.g,"b")},gn.prototype.createWebChannel=gn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,ya=wa.createWebChannelTransport=function(){return new gn},va=wa.getStatEventTarget=function(){return Se()},ma=wa.Event=we,ga=wa.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oe.NO_ERROR=0,Oe.TIMEOUT=8,Oe.HTTP_ERROR=6,pa=wa.ErrorCode=Oe,Re.COMPLETE="complete",fa=wa.EventType=Re,me.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,ha=wa.WebChannel=me,wa.FetchXmlHttpFactory=At,jt.prototype.listenOnce=jt.prototype.L,jt.prototype.getLastError=jt.prototype.Ka,jt.prototype.getLastErrorCode=jt.prototype.Ba,jt.prototype.getStatus=jt.prototype.Z,jt.prototype.getResponseJson=jt.prototype.Oa,jt.prototype.getResponseText=jt.prototype.oa,jt.prototype.send=jt.prototype.ea,jt.prototype.setWithCredentials=jt.prototype.Ha,da=wa.XhrIo=jt}).apply("undefined"!==typeof ba?ba:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Ea="@firebase/firestore";class Sa{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Sa.UNAUTHENTICATED=new Sa(null),Sa.GOOGLE_CREDENTIALS=new Sa("google-credentials-uid"),Sa.FIRST_PARTY=new Sa("first-party-uid"),Sa.MOCK_USER=new Sa("mock-user");let _a="10.14.0";const ka=new Ct("@firebase/firestore");function xa(){return ka.logLevel}function Ca(e){if(ka.logLevel<=Et.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=n.map(Ia);ka.debug("Firestore (".concat(_a,"): ").concat(e),...o)}}function Na(e){if(ka.logLevel<=Et.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=n.map(Ia);ka.error("Firestore (".concat(_a,"): ").concat(e),...o)}}function Ta(e){if(ka.logLevel<=Et.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=n.map(Ia);ka.warn("Firestore (".concat(_a,"): ").concat(e),...o)}}function Ia(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Aa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(_a,") INTERNAL ASSERTION FAILED: ")+e;throw Na(t),new Error(t)}function Pa(e,t){e||Aa()}function Oa(e,t){return e}const Ra={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Da extends it{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Ma{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class La{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class ja{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Sa.UNAUTHENTICATED))}shutdown(){}}class Ua{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Fa{constructor(e){this.t=e,this.currentUser=Sa.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Pa(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let o=new Ma;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ma,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=o;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{Ca("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Ca("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ma)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Ca("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Pa("string"==typeof t.accessToken),new La(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pa(null===e||"string"==typeof e),new Sa(e)}}class za{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Sa.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Va{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new za(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Sa.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ba{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ha{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Pa(void 0===this.o);const n=e=>{null!=e.error&&Ca("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Ca("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Ca("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Ca("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Pa("string"==typeof e.token),this.R=e.token,new Ba(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Ka(e,t){return e<t?-1:e>t?1:0}function Wa(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class qa{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Da(Ra.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Da(Ra.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Da(Ra.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Da(Ra.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return qa.fromMillis(Date.now())}static fromDate(e){return qa.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new qa(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ka(this.nanoseconds,e.nanoseconds):Ka(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ga{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ga(e)}static min(){return new Ga(new qa(0,0))}static max(){return new Ga(new qa(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Xa{constructor(e,t,n){void 0===t?t=0:t>e.length&&Aa(),void 0===n?n=e.length-t:n>e.length-t&&Aa(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Xa.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xa?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),o=t.get(r);if(n<o)return-1;if(n>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ya extends Xa{construct(e,t,n){return new Ya(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const o of n){if(o.indexOf("//")>=0)throw new Da(Ra.INVALID_ARGUMENT,"Invalid segment (".concat(o,"). Paths must not contain // in them."));e.push(...o.split("/").filter(e=>e.length>0))}return new Ya(e)}static emptyPath(){return new Ya([])}}const Qa=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $a extends Xa{construct(e,t,n){return new $a(e,t,n)}static isValidIdentifier(e){return Qa.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$a.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new $a(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const o=()=>{if(0===n.length)throw new Da(Ra.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Da(Ra.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Da(Ra.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(o(),r++)}if(o(),i)throw new Da(Ra.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $a(t)}static emptyPath(){return new $a([])}}class Ja{constructor(e){this.path=e}static fromPath(e){return new Ja(Ya.fromString(e))}static fromName(e){return new Ja(Ya.fromString(e).popFirst(5))}static empty(){return new Ja(Ya.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ya.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ya.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ja(new Ya(e.slice()))}}class Za{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Za.UNKNOWN_ID=-1;function es(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,o=Ga.fromTimestamp(1e9===r?new qa(n+1,0):new qa(n,r));return new ns(o,Ja.empty(),t)}function ts(e){return new ns(e.readTime,e.key,-1)}class ns{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ns(Ga.min(),Ja.empty(),-1)}static max(){return new ns(Ga.max(),Ja.empty(),-1)}}function rs(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ja.comparator(e.documentKey,t.documentKey),0!==n?n:Ka(e.largestBatchId,t.largestBatchId))}class os{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class is{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Aa(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new is((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof is?t:is.resolve(t)}catch(e){return is.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):is.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):is.reject(t)}static resolve(e){return new is((t,n)=>{t(e)})}static reject(e){return new is((t,n)=>{n(e)})}static waitFor(e){return new is((t,n)=>{let r=0,o=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++o,i&&o===r&&t()},e=>n(e))}),i=!0,o===r&&t()})}static or(e){let t=is.resolve(!1);for(const n of e)t=t.next(e=>e?is.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new is((n,r)=>{const o=e.length,i=new Array(o);let a=0;for(let s=0;s<o;s++){const l=s;t(e[l]).next(e=>{i[l]=e,++a,a===o&&n(i)},e=>r(e))}})}static doWhile(e,t){return new is((n,r)=>{const o=()=>{!0===e()?t().next(()=>{o()},r):n()};o()})}}function as(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ss(e){return"IndexedDbTransactionError"===e.name}class ls{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function cs(e){return null==e}function us(e){return 0===e&&1/e==-1/0}ls.oe=-1;const ds=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],hs=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],fs=hs,ps=[...fs,"indexConfiguration","indexState","indexEntries"];function gs(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ms(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function vs(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ys{constructor(e,t){this.comparator=e,this.root=t||ws.EMPTY}insert(e,t){return new ys(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ws.BLACK,null,null))}remove(e){return new ys(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ws.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bs(this.root,e,this.comparator,!1)}getReverseIterator(){return new bs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bs(this.root,e,this.comparator,!0)}}class bs{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ws{constructor(e,t,n,r,o){this.key=e,this.value=t,this.color=null!=n?n:ws.RED,this.left=null!=r?r:ws.EMPTY,this.right=null!=o?o:ws.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,o){return new ws(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=o?o:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const o=n(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===o?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ws.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ws.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ws.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ws.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Aa();if(this.right.isRed())throw Aa();const e=this.left.check();if(e!==this.right.check())throw Aa();return e+(this.isRed()?0:1)}}ws.EMPTY=null,ws.RED=!0,ws.BLACK=!1,ws.EMPTY=new class{constructor(){this.size=0}get key(){throw Aa()}get value(){throw Aa()}get color(){throw Aa()}get left(){throw Aa()}get right(){throw Aa()}copy(e,t,n,r,o){return this}insert(e,t,n){return new ws(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Es{constructor(e){this.comparator=e,this.data=new ys(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ss(this.data.getIterator())}getIteratorFrom(e){return new Ss(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Es))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Es(this.comparator);return t.data=e,t}}class Ss{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class _s{constructor(e){this.fields=e,e.sort($a.comparator)}static empty(){return new _s([])}unionWith(e){let t=new Es($a.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new _s(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wa(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class ks extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class xs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ks("Invalid base64 string: "+e):e}}(e);return new xs(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new xs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ka(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xs.EMPTY_BYTE_STRING=new xs("");const Cs=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ns(e){if(Pa(!!e),"string"==typeof e){let t=0;const n=Cs.exec(e);if(Pa(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ts(e.seconds),nanos:Ts(e.nanos)}}function Ts(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Is(e){return"string"==typeof e?xs.fromBase64String(e):xs.fromUint8Array(e)}function As(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ps(e){const t=e.mapValue.fields.__previous_value__;return As(t)?Ps(t):t}function Os(e){const t=Ns(e.mapValue.fields.__local_write_time__.timestampValue);return new qa(t.seconds,t.nanos)}class Rs{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Rs("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Rs&&e.projectId===this.projectId&&e.database===this.database}}const Ds={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ms(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?As(e)?4:Xs(e)?9007199254740991:qs(e)?10:11:Aa()}function Ls(e,t){if(e===t)return!0;const n=Ms(e);if(n!==Ms(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Os(e).isEqual(Os(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Ns(e.timestampValue),r=Ns(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Is(e.bytesValue).isEqual(Is(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ts(e.geoPointValue.latitude)===Ts(t.geoPointValue.latitude)&&Ts(e.geoPointValue.longitude)===Ts(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ts(e.integerValue)===Ts(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Ts(e.doubleValue),r=Ts(t.doubleValue);return n===r?us(n)===us(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Wa(e.arrayValue.values||[],t.arrayValue.values||[],Ls);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(gs(n)!==gs(r))return!1;for(const o in n)if(n.hasOwnProperty(o)&&(void 0===r[o]||!Ls(n[o],r[o])))return!1;return!0}(e,t);default:return Aa()}}function js(e,t){return void 0!==(e.values||[]).find(e=>Ls(e,t))}function Us(e,t){if(e===t)return 0;const n=Ms(e),r=Ms(t);if(n!==r)return Ka(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ka(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Ts(e.integerValue||e.doubleValue),r=Ts(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Fs(e.timestampValue,t.timestampValue);case 4:return Fs(Os(e),Os(t));case 5:return Ka(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Is(e),r=Is(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let o=0;o<n.length&&o<r.length;o++){const e=Ka(n[o],r[o]);if(0!==e)return e}return Ka(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Ka(Ts(e.latitude),Ts(t.latitude));return 0!==n?n:Ka(Ts(e.longitude),Ts(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return zs(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,o,i;const a=e.fields||{},s=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=null===(r=s.value)||void 0===r?void 0:r.arrayValue,u=Ka((null===(o=null==l?void 0:l.values)||void 0===o?void 0:o.length)||0,(null===(i=null==c?void 0:c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:zs(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Ds.mapValue&&t===Ds.mapValue)return 0;if(e===Ds.mapValue)return 1;if(t===Ds.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),o=t.fields||{},i=Object.keys(o);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=Ka(r[a],i[a]);if(0!==e)return e;const t=Us(n[r[a]],o[i[a]]);if(0!==t)return t}return Ka(r.length,i.length)}(e.mapValue,t.mapValue);default:throw Aa()}}function Fs(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ka(e,t);const n=Ns(e),r=Ns(t),o=Ka(n.seconds,r.seconds);return 0!==o?o:Ka(n.nanos,r.nanos)}function zs(e,t){const n=e.values||[],r=t.values||[];for(let o=0;o<n.length&&o<r.length;++o){const e=Us(n[o],r[o]);if(e)return e}return Ka(n.length,r.length)}function Vs(e){return Bs(e)}function Bs(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Ns(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Is(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Ja.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Bs(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const o of t)r?r=!1:n+=",",n+="".concat(o,":").concat(Bs(e.fields[o]));return n+"}"}(e.mapValue):Aa()}function Hs(e){return!!e&&"integerValue"in e}function Ks(e){return!!e&&"arrayValue"in e}function Ws(e){return!!e&&"mapValue"in e}function qs(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Gs(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ms(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Gs(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Gs(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Xs(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class Ys{constructor(e){this.value=e}static empty(){return new Ys({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ws(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gs(t)}setAll(e){let t=$a.emptyPath(),n={},r=[];e.forEach((e,o)=>{if(!t.isImmediateParentOf(o)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=o.popLast()}e?n[o.lastSegment()]=Gs(e):r.push(o.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,n,r)}delete(e){const t=this.field(e.popLast());Ws(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ls(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ws(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ms(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Ys(Gs(this.value))}}class Qs{constructor(e,t,n,r,o,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=o,this.data=i,this.documentState=a}static newInvalidDocument(e){return new Qs(e,0,Ga.min(),Ga.min(),Ga.min(),Ys.empty(),0)}static newFoundDocument(e,t,n,r){return new Qs(e,1,t,Ga.min(),n,r,0)}static newNoDocument(e,t){return new Qs(e,2,t,Ga.min(),Ga.min(),Ys.empty(),0)}static newUnknownDocument(e,t){return new Qs(e,3,t,Ga.min(),Ga.min(),Ys.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ga.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ys.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ys.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ga.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Qs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class $s{constructor(e,t){this.position=e,this.inclusive=t}}function Js(e,t,n){let r=0;for(let o=0;o<e.position.length;o++){const i=t[o],a=e.position[o];if(r=i.field.isKeyField()?Ja.comparator(Ja.fromName(a.referenceValue),n.key):Us(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function Zs(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ls(e.position[n],t.position[n]))return!1;return!0}class el{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function tl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class nl{}class rl extends nl{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new dl(e,t,n):"array-contains"===t?new gl(e,n):"in"===t?new ml(e,n):"not-in"===t?new vl(e,n):"array-contains-any"===t?new yl(e,n):new rl(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new hl(e,n):new fl(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Us(t,this.value)):null!==t&&Ms(this.value)===Ms(t)&&this.matchesComparison(Us(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Aa()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ol extends nl{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new ol(e,t)}matches(e){return il(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function il(e){return"and"===e.op}function al(e){return sl(e)&&il(e)}function sl(e){for(const t of e.filters)if(t instanceof ol)return!1;return!0}function ll(e){if(e instanceof rl)return e.field.canonicalString()+e.op.toString()+Vs(e.value);if(al(e))return e.filters.map(e=>ll(e)).join(",");{const t=e.filters.map(e=>ll(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function cl(e,t){return e instanceof rl?function(e,t){return t instanceof rl&&e.op===t.op&&e.field.isEqual(t.field)&&Ls(e.value,t.value)}(e,t):e instanceof ol?function(e,t){return t instanceof ol&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&cl(n,t.filters[r]),!0)}(e,t):void Aa()}function ul(e){return e instanceof rl?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Vs(e.value))}(e):e instanceof ol?function(e){return e.op.toString()+" {"+e.getFilters().map(ul).join(" ,")+"}"}(e):"Filter"}class dl extends rl{constructor(e,t,n){super(e,t,n),this.key=Ja.fromName(n.referenceValue)}matches(e){const t=Ja.comparator(e.key,this.key);return this.matchesComparison(t)}}class hl extends rl{constructor(e,t){super(e,"in",t),this.keys=pl("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class fl extends rl{constructor(e,t){super(e,"not-in",t),this.keys=pl("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function pl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Ja.fromName(e.referenceValue))}class gl extends rl{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ks(t)&&js(t.arrayValue,this.value)}}class ml extends rl{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&js(this.value.arrayValue,t)}}class vl extends rl{constructor(e,t){super(e,"not-in",t)}matches(e){if(js(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!js(this.value.arrayValue,t)}}class yl extends rl{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ks(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>js(this.value.arrayValue,e))}}class bl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=o,this.startAt=i,this.endAt=a,this.ue=null}}function wl(e){return new bl(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function El(e){const t=Oa(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>ll(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),cs(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Vs(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Vs(e)).join(",")),t.ue=e}return t.ue}function Sl(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!tl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!cl(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Zs(e.startAt,t.startAt)&&Zs(e.endAt,t.endAt)}class _l{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=o,this.limitType=i,this.startAt=a,this.endAt=s,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function kl(e,t,n,r,o,i,a,s){return new _l(e,t,n,r,o,i,a,s)}function xl(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Cl(e){return null!==e.collectionGroup}function Nl(e){const t=Oa(e);if(null===t.ce){t.ce=[];const e=new Set;for(const o of t.explicitOrderBy)t.ce.push(o),e.add(o.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Es($a.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new el(r,n))}),e.has($a.keyField().canonicalString())||t.ce.push(new el($a.keyField(),n))}return t.ce}function Tl(e){const t=Oa(e);return t.le||(t.le=Il(t,Nl(e))),t.le}function Il(e,t){if("F"===e.limitType)return wl(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new el(e.field,t)});const n=e.endAt?new $s(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new $s(e.startAt.position,e.startAt.inclusive):null;return wl(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Al(e,t,n){return new _l(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Pl(e,t){return Sl(Tl(e),Tl(t))&&e.limitType===t.limitType}function Ol(e){return"".concat(El(Tl(e)),"|lt:").concat(e.limitType)}function Rl(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>ul(e)).join(", "),"]")),cs(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Vs(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Vs(e)).join(",")),"Target(".concat(t,")")}(Tl(e)),"; limitType=").concat(e.limitType,")")}function Dl(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ja.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Nl(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Js(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Nl(e),t))&&!(e.endAt&&!function(e,t,n){const r=Js(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Nl(e),t))}(e,t)}function Ml(e){return(t,n)=>{let r=!1;for(const o of Nl(e)){const e=Ll(o,t,n);if(0!==e)return e;r=r||o.field.isKeyField()}return 0}}function Ll(e,t,n){const r=e.field.isKeyField()?Ja.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),o=n.data.field(e);return null!==r&&null!==o?Us(r,o):Aa()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Aa()}}class jl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,o]of n)if(this.equalsFn(r,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ms(this.inner,(t,n)=>{for(const[r,o]of n)e(r,o)})}isEmpty(){return vs(this.inner)}size(){return this.innerSize}}const Ul=new ys(Ja.comparator);function Fl(){return Ul}const zl=new ys(Ja.comparator);function Vl(){let e=zl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const o of n)e=e.insert(o.key,o);return e}function Bl(e){let t=zl;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Hl(){return Wl()}function Kl(){return Wl()}function Wl(){return new jl(e=>e.toString(),(e,t)=>e.isEqual(t))}new ys(Ja.comparator);const ql=new Es(Ja.comparator);function Gl(){let e=ql;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const o of n)e=e.add(o);return e}const Xl=new Es(Ka);function Yl(){return Xl}function Ql(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:us(t)?"-0":t}}function $l(e){return{integerValue:""+e}}class Jl{constructor(){this._=void 0}}function Zl(e,t,n){return e instanceof nc?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&As(t)&&(t=Ps(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof rc?oc(e,t):e instanceof ic?ac(e,t):function(e,t){const n=tc(e,t),r=lc(n)+lc(e.Pe);return Hs(n)&&Hs(e.Pe)?$l(r):Ql(e.serializer,r)}(e,t)}function ec(e,t,n){return e instanceof rc?oc(e,t):e instanceof ic?ac(e,t):n}function tc(e,t){return e instanceof sc?function(e){return Hs(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class nc extends Jl{}class rc extends Jl{constructor(e){super(),this.elements=e}}function oc(e,t){const n=cc(t);for(const r of e.elements)n.some(e=>Ls(e,r))||n.push(r);return{arrayValue:{values:n}}}class ic extends Jl{constructor(e){super(),this.elements=e}}function ac(e,t){let n=cc(t);for(const r of e.elements)n=n.filter(e=>!Ls(e,r));return{arrayValue:{values:n}}}class sc extends Jl{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function lc(e){return Ts(e.integerValue||e.doubleValue)}function cc(e){return Ks(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class uc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new uc}static exists(e){return new uc(void 0,e)}static updateTime(e){return new uc(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class hc{}function fc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Sc(e.key,uc.none()):new vc(e.key,e.data,uc.none());{const n=e.data,r=Ys.empty();let o=new Es($a.comparator);for(let e of t.fields)if(!o.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),o=o.add(e)}return new yc(e.key,r,new _s(o.toArray()),uc.none())}}function pc(e,t,n){e instanceof vc?function(e,t,n){const r=e.value.clone(),o=wc(e.fieldTransforms,t,n.transformResults);r.setAll(o),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof yc?function(e,t,n){if(!dc(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=wc(e.fieldTransforms,t,n.transformResults),o=t.data;o.setAll(bc(e)),o.setAll(r),t.convertToFoundDocument(n.version,o).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function gc(e,t,n,r){return e instanceof vc?function(e,t,n,r){if(!dc(e.precondition,t))return n;const o=e.value.clone(),i=Ec(e.fieldTransforms,r,t);return o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null}(e,t,n,r):e instanceof yc?function(e,t,n,r){if(!dc(e.precondition,t))return n;const o=Ec(e.fieldTransforms,r,t),i=t.data;return i.setAll(bc(e)),i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return dc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function mc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Wa(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof rc&&t instanceof rc||e instanceof ic&&t instanceof ic?Wa(e.elements,t.elements,Ls):e instanceof sc&&t instanceof sc?Ls(e.Pe,t.Pe):e instanceof nc&&t instanceof nc}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class vc extends hc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class yc extends hc{constructor(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function bc(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function wc(e,t,n){const r=new Map;Pa(e.length===n.length);for(let o=0;o<n.length;o++){const i=e[o],a=i.transform,s=t.data.field(i.field);r.set(i.field,ec(a,s,n[o]))}return r}function Ec(e,t,n){const r=new Map;for(const o of e){const e=o.transform,i=n.data.field(o.field);r.set(o.field,Zl(e,i,t))}return r}class Sc extends hc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _c{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&pc(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=gc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=gc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Kl();return this.mutations.forEach(r=>{const o=e.get(r.key),i=o.overlayedDocument;let a=this.applyToLocalView(i,o.mutatedFields);a=t.has(r.key)?null:a;const s=fc(i,a);null!==s&&n.set(r.key,s),i.isValidDocument()||i.convertToNoDocument(Ga.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Gl())}isEqual(e){return this.batchId===e.batchId&&Wa(this.mutations,e.mutations,(e,t)=>mc(e,t))&&Wa(this.baseMutations,e.baseMutations,(e,t)=>mc(e,t))}}class kc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}var xc,Cc;function Nc(e){if(void 0===e)return Na("GRPC error has no .code"),Ra.UNKNOWN;switch(e){case xc.OK:return Ra.OK;case xc.CANCELLED:return Ra.CANCELLED;case xc.UNKNOWN:return Ra.UNKNOWN;case xc.DEADLINE_EXCEEDED:return Ra.DEADLINE_EXCEEDED;case xc.RESOURCE_EXHAUSTED:return Ra.RESOURCE_EXHAUSTED;case xc.INTERNAL:return Ra.INTERNAL;case xc.UNAVAILABLE:return Ra.UNAVAILABLE;case xc.UNAUTHENTICATED:return Ra.UNAUTHENTICATED;case xc.INVALID_ARGUMENT:return Ra.INVALID_ARGUMENT;case xc.NOT_FOUND:return Ra.NOT_FOUND;case xc.ALREADY_EXISTS:return Ra.ALREADY_EXISTS;case xc.PERMISSION_DENIED:return Ra.PERMISSION_DENIED;case xc.FAILED_PRECONDITION:return Ra.FAILED_PRECONDITION;case xc.ABORTED:return Ra.ABORTED;case xc.OUT_OF_RANGE:return Ra.OUT_OF_RANGE;case xc.UNIMPLEMENTED:return Ra.UNIMPLEMENTED;case xc.DATA_LOSS:return Ra.DATA_LOSS;default:return Aa()}}(Cc=xc||(xc={}))[Cc.OK=0]="OK",Cc[Cc.CANCELLED=1]="CANCELLED",Cc[Cc.UNKNOWN=2]="UNKNOWN",Cc[Cc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Cc[Cc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Cc[Cc.NOT_FOUND=5]="NOT_FOUND",Cc[Cc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Cc[Cc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Cc[Cc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Cc[Cc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Cc[Cc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Cc[Cc.ABORTED=10]="ABORTED",Cc[Cc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Cc[Cc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Cc[Cc.INTERNAL=13]="INTERNAL",Cc[Cc.UNAVAILABLE=14]="UNAVAILABLE",Cc[Cc.DATA_LOSS=15]="DATA_LOSS";new la([4294967295,4294967295],0);Error;class Tc{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ic(e){return Pa(!!e),Ga.fromTimestamp(function(e){const t=Ns(e);return new qa(t.seconds,t.nanos)}(e))}function Ac(e,t){const n=function(e){return new Ya(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Pc(e){const t=Ya.fromString(e);return Pa(jc(t)),t}function Oc(e){const t=Pc(e);return 4===t.length?Ya.emptyPath():Rc(t)}function Rc(e){return Pa(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Dc(e){let t=Oc(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){Pa(1===r);const e=n.from[0];e.allDescendants?o=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Mc(e);return t instanceof ol&&al(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new el(Lc(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t="object"==typeof e?e.value:e,cs(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new $s(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new $s(n,t)}(n.endAt)),kl(t,o,a,i,s,"F",l,c)}function Mc(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Lc(e.unaryFilter.field);return rl.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Lc(e.unaryFilter.field);return rl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Lc(e.unaryFilter.field);return rl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Lc(e.unaryFilter.field);return rl.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Aa()}}(e):void 0!==e.fieldFilter?function(e){return rl.create(Lc(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Aa()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ol.create(e.compositeFilter.filters.map(e=>Mc(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Aa()}}(e.compositeFilter.op))}(e):Aa()}function Lc(e){return $a.fromServerFormat(e.fieldPath)}function jc(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Uc{constructor(e){this.ct=e}}function Fc(e){const t=Dc({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Al(t,t.limit,"L"):t}class zc{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ts(e.integerValue));else if("doubleValue"in e){const n=Ts(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),us(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=Ns(n)),t.Rt("".concat(n.seconds||"")),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Is(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?Xs(e)?this.dt(t,Number.MAX_SAFE_INTEGER):qs(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Aa()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const o=e.fields||{};this.dt(t,53);const i="value",a=(null===(r=null===(n=o[i].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(Ts(a)),this.Vt(i,t),this.Tt(o[i],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),Ja.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}zc.vt=new zc;class Vc{constructor(){this.un=new Bc}addToCollectionParentIndex(e,t){return this.un.add(t),is.resolve()}getCollectionParents(e,t){return is.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return is.resolve()}deleteFieldIndex(e,t){return is.resolve()}deleteAllFieldIndexes(e){return is.resolve()}createTargetIndexes(e,t){return is.resolve()}getDocumentsMatchingTarget(e,t){return is.resolve(null)}getIndexType(e,t){return is.resolve(0)}getFieldIndexes(e,t){return is.resolve([])}getNextCollectionGroupToUpdate(e){return is.resolve(null)}getMinOffset(e,t){return is.resolve(ns.min())}getMinOffsetFromCollectionGroup(e,t){return is.resolve(ns.min())}updateCollectionGroup(e,t,n){return is.resolve()}updateIndexEntries(e,t){return is.resolve()}}class Bc{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Es(Ya.comparator),o=!r.has(n);return this.index[t]=r.add(n),o}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Es(Ya.comparator)).toArray()}}new Uint8Array(0);class Hc{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Hc(e,Hc.DEFAULT_COLLECTION_PERCENTILE,Hc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Hc.DEFAULT_COLLECTION_PERCENTILE=10,Hc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hc.DEFAULT=new Hc(41943040,Hc.DEFAULT_COLLECTION_PERCENTILE,Hc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hc.DISABLED=new Hc(-1,0,0);class Kc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Kc(0)}static kn(){return new Kc(-1)}}class Wc{constructor(){this.changes=new jl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Qs.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?is.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class qc{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Gc{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&gc(n.mutation,e,_s.empty(),qa.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Gl()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gl();const r=Hl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Vl();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Hl();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Gl()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let o=Fl();const i=Wl(),a=Wl();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof yc)?o=o.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),gc(a.mutation,t,a.mutation.getFieldMask(),qa.now())):i.set(t.key,_s.empty())}),this.recalculateAndSaveOverlays(e,o).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new qc(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=Wl();let r=new ys((e,t)=>e-t),o=Gl();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const o of e)o.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||_s.empty();a=o.applyToLocalView(i,a),n.set(e,a);const s=(r.get(o.batchId)||Gl()).add(e);r=r.insert(o.batchId,s)})}).next(()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),s=r.key,l=r.value,c=Kl();l.forEach(e=>{if(!o.has(e)){const r=fc(t.get(e),n.get(e));null!==r&&c.set(e,r),o=o.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,s,c))}return is.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Ja.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Cl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(o=>{const i=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-o.size):is.resolve(Hl());let a=-1,s=o;return i.next(t=>is.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),o.get(t)?is.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{s=s.insert(t,e)}))).next(()=>this.populateOverlays(e,t,o)).next(()=>this.computeViews(e,s,t,Gl())).next(e=>({batchId:a,changes:Bl(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ja(t)).next(e=>{let t=Vl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const o=t.collectionGroup;let i=Vl();return this.indexManager.getCollectionParents(e,o).next(a=>is.forEach(a,a=>{const s=function(e,t){return new _l(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(o));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(o=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,o,r))).next(e=>{o.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Qs.newInvalidDocument(r)))});let n=Vl();return e.forEach((e,r)=>{const i=o.get(e);void 0!==i&&gc(i.mutation,r,_s.empty(),qa.now()),Dl(t,r)&&(n=n.insert(e,r))}),n})}}class Xc{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return is.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Ic(e.createTime)}}(t)),is.resolve()}getNamedQuery(e,t){return is.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:Fc(e.bundledQuery),readTime:Ic(e.readTime)}}(t)),is.resolve()}}class Yc{constructor(){this.overlays=new ys(Ja.comparator),this.Ir=new Map}getOverlay(e,t){return is.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Hl();return is.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),is.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),is.resolve()}getOverlaysForCollection(e,t,n){const r=Hl(),o=t.length+1,i=new Ja(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===o&&e.largestBatchId>n&&r.set(e.getKey(),e)}return is.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let o=new ys((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=o.get(e.largestBatchId);null===t&&(t=Hl(),o=o.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Hl(),s=o.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return is.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new kc(t,n));let o=this.Ir.get(t);void 0===o&&(o=Gl(),this.Ir.set(t,o)),this.Ir.set(t,o.add(n.key))}}class Qc{constructor(){this.sessionToken=xs.EMPTY_BYTE_STRING}getSessionToken(e){return is.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,is.resolve()}}class $c{constructor(){this.Tr=new Es(Jc.Er),this.dr=new Es(Jc.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new Jc(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new Jc(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new Ja(new Ya([])),n=new Jc(t,e),r=new Jc(t,e+1),o=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),o.push(e.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Ja(new Ya([])),n=new Jc(t,e),r=new Jc(t,e+1);let o=Gl();return this.dr.forEachInRange([n,r],e=>{o=o.add(e.key)}),o}containsKey(e){const t=new Jc(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Jc{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ja.comparator(e.key,t.key)||Ka(e.wr,t.wr)}static Ar(e,t){return Ka(e.wr,t.wr)||Ja.comparator(e.key,t.key)}}class Zc{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Es(Jc.Er)}checkEmpty(e){return is.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new _c(o,t,n,r);this.mutationQueue.push(i);for(const a of r)this.br=this.br.add(new Jc(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return is.resolve(i)}lookupMutationBatch(e,t){return is.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),o=r<0?0:r;return is.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return is.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return is.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Jc(t,0),r=new Jc(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);o.push(t)}),is.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Es(Ka);return t.forEach(e=>{const t=new Jc(e,0),r=new Jc(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),is.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let o=n;Ja.isDocumentKey(o)||(o=o.child(""));const i=new Jc(new Ja(o),0);let a=new Es(Ka);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.wr)),!0)},i),is.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Pa(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return is.forEach(t.mutations,r=>{const o=new Jc(r.key,t.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new Jc(t,0),r=this.br.firstAfterOrEqual(n);return is.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,is.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class eu{constructor(e){this.Mr=e,this.docs=new ys(Ja.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),o=r?r.size:0,i=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return is.resolve(n?n.document.mutableCopy():Qs.newInvalidDocument(t))}getEntries(e,t){let n=Fl();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Qs.newInvalidDocument(e))}),is.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let o=Fl();const i=t.path,a=new Ja(i.child("")),s=this.docs.getIteratorFrom(a);for(;s.hasNext();){const{key:e,value:{document:a}}=s.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||rs(ts(a),n)<=0||(r.has(a.key)||Dl(t,a))&&(o=o.insert(a.key,a.mutableCopy()))}return is.resolve(o)}getAllFromCollectionGroup(e,t,n,r){Aa()}Or(e,t){return is.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new tu(this)}getSize(e){return is.resolve(this.size)}}class tu extends Wc{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),is.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class nu{constructor(e){this.persistence=e,this.Nr=new jl(e=>El(e),Sl),this.lastRemoteSnapshotVersion=Ga.min(),this.highestTargetId=0,this.Lr=0,this.Br=new $c,this.targetCount=0,this.kr=Kc.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),is.resolve()}getLastRemoteSnapshotVersion(e){return is.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return is.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),is.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),is.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Kc(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,is.resolve()}updateTargetData(e,t){return this.Kn(t),is.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,is.resolve()}removeTargets(e,t,n){let r=0;const o=[];return this.Nr.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(i),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),is.waitFor(o).next(()=>r)}getTargetCount(e){return is.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return is.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),is.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,o=[];return r&&t.forEach(t=>{o.push(r.markPotentiallyOrphaned(e,t))}),is.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),is.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return is.resolve(n)}containsKey(e,t){return is.resolve(this.Br.containsKey(t))}}class ru{constructor(e,t){this.qr={},this.overlays={},this.Qr=new ls(0),this.Kr=!1,this.Kr=!0,this.$r=new Qc,this.referenceDelegate=e(this),this.Ur=new nu(this),this.indexManager=new Vc,this.remoteDocumentCache=function(e){return new eu(e)}(e=>this.referenceDelegate.Wr(e)),this.serializer=new Uc(t),this.Gr=new Xc(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Yc,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new Zc(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){Ca("MemoryPersistence","Starting transaction:",e);const r=new ou(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return is.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class ou extends os{constructor(e){super(),this.currentSequenceNumber=e}}class iu{constructor(e){this.persistence=e,this.Jr=new $c,this.Yr=null}static Zr(e){return new iu(e)}get Xr(){if(this.Yr)return this.Yr;throw Aa()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),is.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),is.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),is.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return is.forEach(this.Xr,n=>{const r=Ja.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,Ga.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return is.or([()=>is.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class au{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=Gl(),r=Gl();for(const o of t.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new au(e,t.fromCache,n,r)}}class su{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class lu{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=rt()?8:as(nt())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const o={result:null};return this.Yi(e,t).next(e=>{o.result=e}).next(()=>{if(!o.result)return this.Zi(e,t,r,n).next(e=>{o.result=e})}).next(()=>{if(o.result)return;const n=new su;return this.Xi(e,t,n).next(r=>{if(o.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>o.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(xa()<=Et.DEBUG&&Ca("QueryEngine","SDK will not create cache indexes for query:",Rl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),is.resolve()):(xa()<=Et.DEBUG&&Ca("QueryEngine","Query:",Rl(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(xa()<=Et.DEBUG&&Ca("QueryEngine","The SDK decides to create cache indexes for query:",Rl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tl(t))):is.resolve())}Yi(e,t){if(xl(t))return is.resolve(null);let n=Tl(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Al(t,null,"F"),n=Tl(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const o=Gl(...r);return this.Ji.getDocuments(e,o).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.ts(t,r);return this.ns(t,i,o,n.readTime)?this.Yi(e,Al(t,null,"F")):this.rs(e,i,t,n)}))})))}Zi(e,t,n,r){return xl(t)||r.isEqual(Ga.min())?is.resolve(null):this.Ji.getDocuments(e,n).next(o=>{const i=this.ts(t,o);return this.ns(t,i,n,r)?is.resolve(null):(xa()<=Et.DEBUG&&Ca("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Rl(t)),this.rs(e,i,t,es(r,-1)).next(e=>e))})}ts(e,t){let n=new Es(Ml(e));return t.forEach((t,r)=>{Dl(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Xi(e,t,n){return xa()<=Et.DEBUG&&Ca("QueryEngine","Using full collection scan to execute query:",Rl(t)),this.Ji.getDocumentsMatchingQuery(e,t,ns.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class cu{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new ys(Ka),this._s=new jl(e=>El(e),Sl),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gc(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function uu(e,t,n,r){return new cu(e,t,n,r)}async function du(e,t){const n=Oa(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(o=>(r=o,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const o=[],i=[];let a=Gl();for(const e of r){o.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({hs:e,removedBatchIds:o,addedBatchIds:i}))})})}class hu{constructor(){this.activeTargetIds=Yl()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fu{constructor(){this.so=new hu,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new hu,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class pu{_o(e){}shutdown(){}}class gu{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ca("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ca("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let mu=null;function vu(){return null===mu?mu=268435456+Math.round(2147483648*Math.random()):mu++,"0x"+mu.toString(16)}const yu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bu{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const wu="WebChannelConnection";class Eu extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo="projects/".concat(n,"/databases/").concat(r),this.Co="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Fo(){return!1}Mo(e,t,n,r,o){const i=vu(),a=this.xo(e,t.toUriEncodedString());Ca("RestConnection","Sending RPC '".concat(e,"' ").concat(i,":"),a,n);const s={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(s,r,o),this.No(e,a,s,n).then(t=>(Ca("RestConnection","Received RPC '".concat(e,"' ").concat(i,": "),t),t),t=>{throw Ta("RestConnection","RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",a,"request:",n),t})}Lo(e,t,n,r,o,i){return this.Mo(e,t,n,r,o)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+_a,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=yu[e];return"".concat(this.Do,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const o=vu();return new Promise((i,a)=>{const s=new da;s.setWithCredentials(!0),s.listenOnce(fa.COMPLETE,()=>{try{switch(s.getLastErrorCode()){case pa.NO_ERROR:const t=s.getResponseJson();Ca(wu,"XHR for RPC '".concat(e,"' ").concat(o," received:"),JSON.stringify(t)),i(t);break;case pa.TIMEOUT:Ca(wu,"RPC '".concat(e,"' ").concat(o," timed out")),a(new Da(Ra.DEADLINE_EXCEEDED,"Request time out"));break;case pa.HTTP_ERROR:const n=s.getStatus();if(Ca(wu,"RPC '".concat(e,"' ").concat(o," failed with status:"),n,"response text:",s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ra).indexOf(t)>=0?t:Ra.UNKNOWN}(t.status);a(new Da(e,t.message))}else a(new Da(Ra.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new Da(Ra.UNAVAILABLE,"Connection failed."));break;default:Aa()}}finally{Ca(wu,"RPC '".concat(e,"' ").concat(o," completed."))}});const l=JSON.stringify(r);Ca(wu,"RPC '".concat(e,"' ").concat(o," sending request:"),r),s.send(t,"POST",l,n,15)})}Bo(e,t,n){const r=vu(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=ya(),a=va(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(s.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Oo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const c=o.join("");Ca(wu,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),s);const u=i.createWebChannel(c,s);let d=!1,h=!1;const f=new bu({Io:t=>{h?Ca(wu,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(Ca(wu,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),Ca(wu,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},To:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,ha.EventType.OPEN,()=>{h||(Ca(wu,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.yo())}),p(u,ha.EventType.CLOSE,()=>{h||(h=!0,Ca(wu,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.So())}),p(u,ha.EventType.ERROR,t=>{h||(h=!0,Ta(wu,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.So(new Da(Ra.UNAVAILABLE,"The operation could not be completed")))}),p(u,ha.EventType.MESSAGE,t=>{var n;if(!h){const o=t.data[0];Pa(!!o);const i=o,a=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){Ca(wu,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=xc[e];if(void 0!==t)return Nc(t)}(t),o=a.message;void 0===n&&(n=Ra.INTERNAL,o="Unknown error status: "+t+" with message "+a.message),h=!0,f.So(new Da(n,o)),u.close()}else Ca(wu,"RPC '".concat(e,"' stream ").concat(r," received:"),o),f.bo(o)}}),p(a,ma.STAT_EVENT,t=>{t.stat===ga.PROXY?Ca(wu,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===ga.NOPROXY&&Ca(wu,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.wo()},0),f}}function Su(){return"undefined"!=typeof document?document:null}function _u(e){return new Tc(e,!0)}class ku{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&Ca("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class xu extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Da(Ra.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(o=>{let[i,a]=o;return this.connection.Mo(e,Ac(t,n),r,i,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ra.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Da(Ra.UNKNOWN,e.toString())})}Lo(e,t,n,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,s]=i;return this.connection.Lo(e,Ac(t,n),r,a,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ra.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Da(Ra.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Cu{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.D_?(Na(t),this.D_=!1):Ca("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Nu{constructor(e,t,n,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(e=>{n.enqueueAndForget(async()=>{Au(this)&&(Ca("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Oa(e);t.L_.add(4),await Iu(t),t.q_.set("Unknown"),t.L_.delete(4),await Tu(t)}(this))})}),this.q_=new Cu(n,r)}}async function Tu(e){if(Au(e))for(const t of e.B_)await t(!0)}async function Iu(e){for(const t of e.B_)await t(!1)}function Au(e){return 0===Oa(e).L_.size}async function Pu(e,t){const n=Oa(e);t?(n.L_.delete(2),await Tu(n)):t||(n.L_.add(2),await Iu(n),n.q_.set("Unknown"))}class Ou{constructor(e,t,n,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=o,this.deferred=new Ma,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,o){const i=Date.now()+n,a=new Ou(e,t,i,r,o);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Da(Ra.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}class Ru{constructor(){this.queries=Du(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=Oa(e),r=n.queries;n.queries=Du(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new Da(Ra.ABORTED,"Firestore shutting down"))}}function Du(){return new jl(e=>Ol(e),Pl)}function Mu(e){e.Y_.forEach(e=>{e.next()})}var Lu,ju;(ju=Lu||(Lu={})).ea="default",ju.Cache="cache";class Uu{constructor(e,t,n,r,o,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new jl(e=>Ol(e),Pl),this.Ma=new Map,this.xa=new Set,this.Oa=new ys(Ja.comparator),this.Na=new Map,this.La=new $c,this.Ba={},this.ka=new Map,this.qa=Kc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function Fu(e,t,n){const r=Oa(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const o=r.view.Z_(t);o.snapshot&&e.push(o.snapshot)}),function(e,t){const n=Oa(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const o of n.j_)o.Z_(t)&&(r=!0)}),r&&Mu(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function zu(e,t,n){const r=Oa(e),o=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((e,s)=>{a.push(r.Ka(s,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const o=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(s.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(s.targetId,o?"current":"not-current")}if(e){o.push(e);const t=au.Wi(s.targetId,e);i.push(t)}}))}),await Promise.all(a),r.Ca.d_(o),await async function(e,t){const n=Oa(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>is.forEach(t,t=>is.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>is.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!ss(e))throw e;Ca("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,o=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,o)}}}(r.localStore,i))}async function Vu(e,t){const n=Oa(e);if(!n.currentUser.isEqual(t)){Ca("SyncEngine","User change. New user:",t.toKey());const e=await du(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach(e=>{e.forEach(e=>{e.reject(new Da(Ra.CANCELLED,t))})}),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await zu(n,e.hs)}}class Bu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_u(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return uu(this.persistence,new lu,e.initialUser,this.serializer)}Ga(e){return new ru(iu.Zr,this.serializer)}Wa(e){return new fu}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bu.provider={build:()=>new Bu};class Hu{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Fu(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Vu.bind(null,this.syncEngine),await Pu(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ru}createDatastore(e){const t=_u(e.databaseInfo.databaseId),n=function(e){return new Eu(e)}(e.databaseInfo);return function(e,t,n,r){return new xu(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,o){return new Nu(e,t,n,r,o)}(this.localStore,this.datastore,e.asyncQueue,e=>Fu(this.syncEngine,e,0),gu.D()?new gu:new pu)}createSyncEngine(e,t){return function(e,t,n,r,o,i,a){const s=new Uu(e,t,n,r,o,i);return a&&(s.Qa=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Oa(e);Ca("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await Iu(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Hu.provider={build:()=>new Hu};function Ku(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Wu=new Map;function qu(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Aa()}function Gu(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Da(Ra.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qu(e);throw new Da(Ra.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class Xu{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Da(Ra.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Da(Ra.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Da(Ra.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ku(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Da(Ra.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Da(Ra.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Da(Ra.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yu{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xu({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Da(Ra.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Da(Ra.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xu(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ja;switch(e.type){case"firstParty":return new Va(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Da(Ra.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Wu.get(e);t&&(Ca("ComponentProvider","Removing Datastore"),Wu.delete(e),t.terminate())}(this),Promise.resolve()}}class Qu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ku(this,"async_queue_retry"),this.Vu=()=>{const e=Su();e&&Ca("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=Su();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Su();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Ma;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(Zw){if(!ss(Zw))throw Zw;Ca("AsyncQueue","Operation failed with retryable error: "+Zw)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Na("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=Ou.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&Aa()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class $u extends Yu{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Qu,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Qu(e),this._firestoreClient=void 0,await e}}}new RegExp("[~\\*/\\[\\]]");new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){_a=e}(Ln),Pn(new mt("firestore",(e,n)=>{let{instanceIdentifier:r,options:o}=n;const i=e.getProvider("app").getImmediate(),a=new $u(new Fa(e.getProvider("auth-internal")),new Ha(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Da(Ra.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rs(e.options.projectId,t)}(i,r),i);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Fn(Ea,"4.7.3",e),Fn(Ea,"4.7.3","esm2017")}();const Ju="firebasestorage.googleapis.com",Zu="storageBucket";class ed extends it{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(rd(e),"Firebase Storage: ".concat(t," (").concat(rd(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ed.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return rd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var td,nd;function rd(e){return"storage/"+e}function od(){return new ed(td.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function id(){return new ed(td.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ad(){return new ed(td.CANCELED,"User canceled the upload/download.")}function sd(e){return new ed(td.INVALID_ARGUMENT,e)}function ld(){return new ed(td.APP_DELETED,"The Firebase app was deleted.")}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(td||(td={}));class cd{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=cd.makeFromUrl(e,t)}catch(Zw){return new cd(e,"")}if(""===n.path)return n;throw r=e,new ed(td.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const o=new RegExp("^gs://"+r+"(/(.*))?$","i");function i(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),s=[{regex:o,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(a,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://".concat(t===Ju?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:i}];for(let l=0;l<s.length;l++){const t=s[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let o=r[t.indices.path];o||(o=""),n=new cd(e,o),t.postModify(n);break}}if(null==n)throw function(e){return new ed(td.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class ud{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function dd(e,t,n,r){if(r<t)throw sd("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw sd("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function hd(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function fd(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),o=-1!==t.indexOf(e);return n||r||o}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(nd||(nd={}));class pd{constructor(e,t,n,r,o,i,a,s,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=i,this.callback_=a,this.errorCallback_=s,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new gd(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===nd.NO_ERROR,o=n.getStatus();if(!t||fd(o,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===nd.ABORT;return void e(!1,new gd(!1,null,t))}const i=-1!==this.successCodes_.indexOf(o);e(!0,new gd(i,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,o=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(o,o.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(Zw){r(Zw)}else if(null!==o){const e=od();e.serverResponse=o.getErrorText(),this.errorCallback_?r(this.errorCallback_(o,e)):r(e)}else if(t.canceled){r(this.appDelete_?ld():ad())}else{r(id())}};this.canceled_?t(0,new gd(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,o=null,i=null,a=!1,s=0;function l(){return 2===s}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){o=setTimeout(()=>{o=null,e(f,l())},t)}function h(){i&&clearTimeout(i)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let i;r<64&&(r*=2),1===s?(s=2,i=0):i=1e3*(r+Math.random()),d(i)}let p=!1;function g(e){p||(p=!0,h(),c||(null!==o?(e||(s=2),clearTimeout(o),d(0)):e||(s=1)))}return d(0),i=setTimeout(()=>{a=!0,g(!0)},n),g}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class gd{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function md(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}class vd{constructor(e,t){this._service=e,this._location=t instanceof cd?t:cd.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new vd(e,t)}get root(){const e=new cd(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return md(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new cd(this._location.bucket,e);return new vd(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new ed(td.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function yd(e,t){const n=null===t||void 0===t?void 0:t[Zu];return null==n?null:cd.makeFromBucketSpec(n,e)}class bd{constructor(e,t,n,r,o){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=Ju,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?cd.makeFromBucketSpec(r,this._host):yd(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=cd.makeFromBucketSpec(this._url,e):this._bucket=yd(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dd("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dd("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new vd(this,e)}_makeRequest(e,t,n,r){let o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new ud(ld());{const i=function(e,t,n,r,o,i){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const s=hd(e.urlParams),l=e.url+s,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,i),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new pd(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,o,a)}(e,this._appId,n,r,t,this._firebaseVersion,o);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const wd="@firebase/storage",Ed="0.13.2",Sd="storage";function _d(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new bd(r,o,i,n,Ln)}Pn(new mt(Sd,_d,"PUBLIC").setMultipleInstances(!0)),Fn(wd,Ed,""),Fn(wd,Ed,"esm2017");function kd(e,t){const n={};for(const r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}function xd(e){if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(e=>xd(e));if("function"===typeof e||"object"===typeof e)return kd(e,e=>xd(e));throw new Error("Data cannot be encoded in JSON: "+e)}function Cd(e){if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(e=>Cd(e)):"function"===typeof e||"object"===typeof e?kd(e,e=>Cd(e)):e}const Nd="functions",Td={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Id extends it{constructor(e,t,n){super("".concat(Nd,"/").concat(e),t||""),this.details=n}}class Ad{constructor(e,t,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(e=>this.auth=e,()=>{}),this.messaging||t.get().then(e=>this.messaging=e,()=>{}),this.appCheck||n.get().then(e=>this.appCheck=e,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return null===e||void 0===e?void 0:e.accessToken}catch(Zw){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(Zw){return}}async getAppCheckToken(e){if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(e)}}}const Pd="us-central1";class Od{constructor(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Pd,i=arguments.length>5?arguments[5]:void 0;this.app=e,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new Ad(t,n,r),this.cancelAllRequests=new Promise(e=>{this.deleteService=()=>Promise.resolve(e())});try{const e=new URL(o);this.customDomain=e.origin+("/"===e.pathname?"":e.pathname),this.region=Pd}catch(Zw){this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;if(null!==this.emulatorOrigin){const n=this.emulatorOrigin;return"".concat(n,"/").concat(t,"/").concat(this.region,"/").concat(e)}return null!==this.customDomain?"".concat(this.customDomain,"/").concat(e):"https://".concat(this.region,"-").concat(t,".cloudfunctions.net/").concat(e)}}function Rd(e,t,n){return r=>function(e,t,n,r){const o=e._url(t);return Md(e,o,n,r)}(e,t,r,n||{})}async function Dd(e,t,n,r){let o;n["Content-Type"]="application/json";try{o=await r(e,{method:"POST",body:JSON.stringify(t),headers:n})}catch(Zw){return{status:0,json:null}}let i=null;try{i=await o.json()}catch(Zw){}return{status:o.status,json:i}}async function Md(e,t,n,r){const o={data:n=xd(n)},i={},a=await e.contextProvider.getContext(r.limitedUseAppCheckTokens);a.authToken&&(i.Authorization="Bearer "+a.authToken),a.messagingToken&&(i["Firebase-Instance-ID-Token"]=a.messagingToken),null!==a.appCheckToken&&(i["X-Firebase-AppCheck"]=a.appCheckToken);const s=function(e){let t=null;return{promise:new Promise((n,r)=>{t=setTimeout(()=>{r(new Id("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}(r.timeout||7e4),l=await Promise.race([Dd(t,o,i,e.fetchImpl),s.promise,e.cancelAllRequests]);if(s.cancel(),!l)throw new Id("cancelled","Firebase Functions instance was deleted.");const c=function(e,t){let n,r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),o=r;try{const e=t&&t.error;if(e){const t=e.status;if("string"===typeof t){if(!Td[t])return new Id("internal","internal");r=Td[t],o=t}const i=e.message;"string"===typeof i&&(o=i),n=e.details,void 0!==n&&(n=Cd(n))}}catch(Zw){}return"ok"===r?null:new Id(r,o,n)}(l.status,l.json);if(c)throw c;if(!l.json)throw new Id("internal","Response is not valid JSON object.");let u=l.json.data;if("undefined"===typeof u&&(u=l.json.result),"undefined"===typeof u)throw new Id("internal","Response is missing data field.");return{data:Cd(u)}}const Ld="@firebase/functions",jd="0.11.8";!function(e,t){Pn(new mt(Nd,(t,n)=>{let{instanceIdentifier:r}=n;const o=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),a=t.getProvider("messaging-internal"),s=t.getProvider("app-check-internal");return new Od(o,i,a,s,r,e)},"PUBLIC").setMultipleInstances(!0)),Fn(Ld,jd,t),Fn(Ld,jd,"esm2017")}(fetch.bind(self));const Ud={apiKey:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_API_KEY,authDomain:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_AUTH_DOMAIN,projectId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_PROJECT_ID,storageBucket:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_STORAGE_BUCKET,messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,appId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_APP_ID},Fd=0===["REACT_APP_FIREBASE_API_KEY","REACT_APP_FIREBASE_AUTH_DOMAIN","REACT_APP_FIREBASE_PROJECT_ID","REACT_APP_FIREBASE_STORAGE_BUCKET","REACT_APP_FIREBASE_MESSAGING_SENDER_ID","REACT_APP_FIREBASE_APP_ID"].filter(e=>!{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[e]).length,zd=Fd?jn(Ud):null,Vd=Fd?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Un();const t=On(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=On(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(lt(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;nr(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:ta,persistence:[fi,Qo,Jo]}),r=Ze("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(o=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>ia)return;const r=null===t||void 0===t?void 0:t.token;aa!==r&&(aa=r,await fetch(o,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){gt(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){gt(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var o;const i=Qe("auth");return i&&wo(n,"http://".concat(i)),n}(zd):null,Bd=(Fd&&function(e,t){const n="string"==typeof e?e:t||"(default)",r=On("object"==typeof e?e:Un(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=$e("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var o;const i=(e=Gu(e,Yu))._getSettings(),a="".concat(t,":").concat(n);if("firestore.googleapis.com"!==i.host&&i.host!==a&&Ta("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Sa.MOCK_USER;else{t=tt(r.mockUserToken,null===(o=e._app)||void 0===o?void 0:o.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Da(Ra.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Sa(i)}e._authCredentials=new Ua(new La(t,n))}}(r,...e)}}(zd),Fd&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Un(),t=arguments.length>1?arguments[1]:void 0;e=gt(e);const n=On(e,Sd).getImmediate({identifier:t}),r=$e("storage");r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:o}=r;o&&(e._overrideAuthToken="string"===typeof o?o:tt(o,e.app.options.projectId))}(e,t,n,r)}(n,...r)}(zd),Fd?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Un(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pd;const n=On(gt(e),Nd).getImmediate({identifier:t}),r=$e("functions");return r&&function(e,t,n){!function(e,t,n){e.emulatorOrigin="http://".concat(t,":").concat(n)}(gt(e),t,n)}(n,...r),n}(zd):null);function Hd(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const Kd=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Wd=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&n.indexOf(e)===t).join(" ")};var qd={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Gd=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],Xd=(0,o.forwardRef)((e,t)=>{let{color:n="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:s="",children:l,iconNode:c}=e,u=Hd(e,Gd);return(0,o.createElement)("svg",Pt(Pt({ref:t},qd),{},{width:r,height:r,stroke:n,strokeWidth:a?24*Number(i)/Number(r):i,className:Wd("lucide",s)},u),[...c.map(e=>{let[t,n]=e;return(0,o.createElement)(t,n)}),...Array.isArray(l)?l:[l]])}),Yd=["className"],Qd=(e,t)=>{const n=(0,o.forwardRef)((n,r)=>{let{className:i}=n,a=Hd(n,Yd);return(0,o.createElement)(Xd,Pt({ref:r,iconNode:t,className:Wd("lucide-".concat(Kd(e)),i)},a))});return n.displayName="".concat(e),n},$d=Qd("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Jd=Qd("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),Zd=()=>{const[e,t]=(0,o.useState)(null),n=Fd&&!!Vd;(0,o.useEffect)(()=>{if(!n)return()=>{};const e=qo(Vd,e=>{t(e)});return()=>e()},[n]);return(0,Ue.jsx)("div",{children:n?e?(0,Ue.jsxs)("button",{onClick:async()=>{if(n)try{await function(e){return gt(e).signOut()}(Vd)}catch(e){console.error("Error signing out",e)}},className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-black/10 dark:hover:bg-white/10 transition-colors text-sm",children:[(0,Ue.jsx)($d,{size:16}),(0,Ue.jsx)("span",{children:"Sign Out"})]}):(0,Ue.jsxs)("button",{onClick:async()=>{if(!n)return;const e=new Lo;try{await async function(e,t,n){if(Rn(e.app))return Promise.reject(rr(e,"operation-not-supported-in-this-environment"));const r=ho(e);ar(e,t,Ro);const o=vi(r,n);return new ki(r,"signInViaPopup",t,o).executeNotNull()}(Vd,e)}catch(t){console.error("Error signing in with Google",t)}},className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-black/10 dark:hover:bg-white/10 transition-colors text-sm",children:[(0,Ue.jsx)(Jd,{size:16}),(0,Ue.jsx)("span",{children:"Sign In"})]}):null})},eh=()=>(0,Ue.jsx)("header",{className:"sticky top-0 z-50 p-4",children:(0,Ue.jsxs)("nav",{className:"container mx-auto flex items-center justify-between rounded-xl border border-white/20 bg-white/10 p-4 shadow-lg backdrop-blur-xl glass-card",children:[(0,Ue.jsx)(Re,{to:"/",className:"text-2xl font-bold tracking-tighter font-display bg-gradient-to-r from-light-accent to-light-heading dark:from-dark-button dark:to-dark-accent bg-clip-text text-transparent",children:"LunaNotes \ud83c\udf19"}),(0,Ue.jsxs)("div",{className:"hidden md:flex items-center space-x-6 text-light-heading/80 dark:text-dark-glow/80",children:[(0,Ue.jsx)(De,{to:"/output",className:e=>{let{isActive:t}=e;return t?"font-bold text-light-accent dark:text-dark-button":"hover:text-light-accent dark:hover:text-dark-button transition-colors"},children:"Notes"}),(0,Ue.jsx)(De,{to:"/mindmap",className:e=>{let{isActive:t}=e;return t?"font-bold text-light-accent dark:text-dark-button":"hover:text-light-accent dark:hover:text-dark-button transition-colors"},children:"Mindmap"}),(0,Ue.jsx)(De,{to:"/chat",className:e=>{let{isActive:t}=e;return t?"font-bold text-light-accent dark:text-dark-button":"hover:text-light-accent dark:hover:text-dark-button transition-colors"},children:"Chat"}),(0,Ue.jsx)(De,{to:"/history",className:e=>{let{isActive:t}=e;return t?"font-bold text-light-accent dark:text-dark-button":"hover:text-light-accent dark:hover:text-dark-button transition-colors"},children:"History"})]}),(0,Ue.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Ue.jsx)(Zd,{}),(0,Ue.jsx)(Be,{})]})]})}),th=(0,o.createContext)(),nh=()=>(0,o.useContext)(th),rh=e=>{let{children:t}=e;const[n,r]=(0,o.useState)(null),[i,a]=(0,o.useState)(null),s={processedNotes:n,setProcessedNotes:r,mindmapData:i,setMindmapData:a,clearNotes:()=>{r(null),a(null)}};return(0,Ue.jsx)(th.Provider,{value:s,children:t})},oh=[{noteId:"demo-astro-luna",createdAt:"2024-10-12T10:00:00.000Z",summary:"Phases of the Moon explain how sunlight reflects off the lunar surface as it orbits Earth.",data:{summary:"The Moon\u2019s phases are driven by orbital geometry: new moon aligns with the Sun, while full moon occurs opposite Earth with maximal illumination.",keypoints:["1. Orbital period is ~29.5 days (synodic month).","2. Waxing phases increase visible illumination; waning phases reduce it.","3. Lunar eclipses require perfect Sun-Earth-Moon alignment during full moon.","4. Tidal locking keeps the same lunar hemisphere facing Earth.","5. Crescent, quarter, gibbous describe illuminated fraction."],definitions:[{term:"Synodic Month",definition:"Time for the Moon to reach the same phase (\u224829.5 days)."},{term:"Waxing",definition:"The illuminated portion visible from Earth is increasing."},{term:"Waning",definition:"The illuminated portion visible from Earth is decreasing."},{term:"Tidal Locking",definition:"Rotation period matches orbital period, so one face points toward Earth."}],formulas:[{formula:"Illumination \u2248 (1 + cos \u03b8) / 2",result:"\u03b8 is the Sun-Earth-Moon angle."}]}},{noteId:"demo-bio-neuro",createdAt:"2024-09-02T08:30:00.000Z",summary:"Neurons transmit electrical and chemical signals enabling reflexes, memory, and emotion.",data:{summary:"The neuron is the functional unit of the nervous system, integrating dendritic input and propagating action potentials along axons.",keypoints:["1. Dendrites collect graded potentials from upstream cells.","2. Axon hillock sums inputs before triggering an action potential.","3. Myelin sheaths accelerate conduction through saltatory propagation.","4. Neurotransmitters cross synaptic clefts to bind receptors.","5. Plasticity alters synaptic strength during learning."],definitions:[{term:"Action Potential",definition:"All-or-none depolarization that travels down the axon."},{term:"Synapse",definition:"Junction where neurons communicate via neurotransmitters."},{term:"Myelin",definition:"Insulating lipid layer produced by glial cells."}],formulas:[{formula:"V_m = 61.5 log10 ( [K+]_out / [K+]_in )",result:"Nernst potential for potassium at 37\xb0C."}]}},{noteId:"demo-chem-climate",createdAt:"2024-08-18T14:45:00.000Z",summary:"Greenhouse gases trap infrared radiation, elevating global mean temperature.",data:{summary:"CO\u2082, methane, and nitrous oxide absorb outgoing IR radiation; radiative forcing scales with gas concentration and feedback loops.",keypoints:["1. CO\u2082 concentration passed 420 ppm in 2024.","2. Methane has ~28x higher GWP over 100 years compared to CO\u2082.","3. Positive feedbacks include water vapor and ice-albedo changes.","4. Aerosols provide short-term cooling by scattering sunlight.","5. Mitigation needs both emission cuts and carbon sequestration."],definitions:[{term:"Radiative Forcing",definition:"Change in net irradiance (W/m\xb2) at the tropopause due to perturbations."},{term:"GWP",definition:"Global Warming Potential, comparing heat trapping to CO\u2082."}],formulas:[{formula:"\u0394F = 5.35 \xb7 ln(C/C\u2080)",result:"CO\u2082 radiative forcing (W/m\xb2) from concentration change."}]}}],ih=e=>Pt(Pt({},e),{},{data:Pt(Pt({},e.data),{},{keypoints:[...e.data.keypoints||[]],definitions:(e.data.definitions||[]).map(e=>Pt({},e)),formulas:(e.data.formulas||[]).map(e=>Pt({},e))})}),ah=["data"],sh="lunanotes-history",lh=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:400;return new Promise(t=>setTimeout(t,e))},ch=()=>{if("undefined"===typeof window)return null;try{return window.localStorage}catch(e){return console.warn("[LunaNotes] Local storage is unavailable:",e),null}},uh=()=>oh.map(ih),dh=e=>{const t=ch();if(t)try{t.setItem(sh,JSON.stringify(e))}catch(n){console.warn("[LunaNotes] Failed to persist history to storage:",n)}},hh=()=>{const e=ch();if(!e)return uh();try{const t=e.getItem(sh);if(!t){const e=uh();return dh(e),e}const n=JSON.parse(t);if(!Array.isArray(n)||0===n.length){const e=uh();return dh(e),e}return n}catch(t){console.warn("[LunaNotes] Failed to read history from storage:",t);const e=uh();return dh(e),e}},fh=async e=>{await lh();const t=(e=>e.split(/(?<=[.!?])\s+/).map(e=>e.trim()).filter(Boolean))(e);return{summary:t.slice(0,3).join(" ")||e.slice(0,240)||"No summary available yet.",keypoints:t.slice(0,8).map((e,t)=>"".concat(t+1,". ").concat(e)),definitions:t.filter(e=>e.includes(":")).slice(0,4).map(e=>{const[t,...n]=e.split(":");return{term:t.trim(),definition:n.join(":").trim()||"Definition unavailable"}}),formulas:Array.from(e.matchAll(/([\w\s]+)=([^\n\r]+)/g)).slice(0,3).map(e=>{var t;return{formula:e[0].trim(),result:(null===(t=e[2])||void 0===t?void 0:t.trim())||""}})}},ph=async e=>{await lh();const t=hh(),n="local-".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2,6)),r={noteId:n,summary:(null===e||void 0===e?void 0:e.summary)||"Untitled notes",createdAt:(new Date).toISOString(),data:e};return t.unshift(r),t.length>25&&(t.length=25),dh(t),{noteId:n}},gh=async(e,t)=>{const n=function(e,t,n){return Rd(gt(e),t,n)}(Bd,e);return(await n(t)).data},mh=async e=>Fd&&Bd?gh("generateMindmap",{processedNotes:e}):(async e=>{await lh();const t=[],n=[];return t.push({id:"root",data:{label:"Summary"},position:{x:300,y:50},type:"input"}),((null===e||void 0===e?void 0:e.keypoints)||[]).slice(0,8).forEach((e,r)=>{const o="kp-".concat(r);t.push({id:o,data:{label:e.replace(/^\d+\.\s*/,"")},position:{x:80+r%4*200,y:180+140*Math.floor(r/4)}}),n.push({id:"root-".concat(o),source:"root",target:o})}),{nodes:t,edges:n}})(e),vh=async e=>{let{processedNotes:t,history:n,question:r}=e;return Fd&&Bd?gh("chatWithNotes",{processedNotes:t,history:n,question:r}):(async e=>{var t;let{question:n,processedNotes:r}=e;await lh();const o=(null===r||void 0===r?void 0:r.summary)||"your notes";return{answer:"Based on ".concat(o.toLowerCase().startsWith("your")?o:"your notes",", I would focus on: ").concat((null===r||void 0===r||null===(t=r.keypoints)||void 0===t?void 0:t.slice(0,2).join(" \xb7 "))||"the main ideas you highlighted",". Keep exploring!"),question:n}})({processedNotes:t,question:r})},yh=async()=>Fd&&Bd?gh("getNotesHistory"):(async()=>(await lh(),hh().map(e=>{let{data:t}=e;return Hd(e,ah)})))(),bh=async e=>Fd&&Bd?gh("getNoteDetails",{noteId:e}):(async e=>{await lh();const t=hh().find(t=>t.noteId===e);if(!t)throw new Error("Note not found");return t.data})(e),wh=e=>{const t=String(Math.floor(e/60)).padStart(2,"0"),n=String(e%60).padStart(2,"0");return"".concat(t,":").concat(n)},Eh={focus:25,shortBreak:5,longBreak:15},Sh=()=>{const[e,t]=(0,o.useState)(Eh),[n,r]=(0,o.useState)("focus"),[i,a]=(0,o.useState)(0),[s,l]=(0,o.useState)(!1),[c,u]=(0,o.useState)(60*e.focus);(0,o.useEffect)(()=>{u(60*e[n])},[e,n]),(0,o.useEffect)(()=>{if(!s)return;const t=setInterval(()=>{u(t=>{if(t<=1){const t=((e,t)=>"focus"===e?(t+1)%4===0?"longBreak":"shortBreak":"focus")(n,i);return"focus"===n&&a(e=>e+1),r(t),60*e[t]}return t-1})},1e3);return()=>clearInterval(t)},[s,i,n,e]);const d=(0,o.useMemo)(()=>{const t=60*e[n];return(t-c)/t*100},[c,e,n]);return(0,Ue.jsxs)("div",{className:"glass-card p-6 space-y-6",children:[(0,Ue.jsxs)("div",{children:[(0,Ue.jsx)("p",{className:"uppercase tracking-wide text-xs text-light-heading/70 dark:text-dark-glow/60",children:"Pomodoro Timer"}),(0,Ue.jsx)("h2",{className:"text-3xl font-display font-bold text-light-heading dark:text-dark-glow",children:"focus"===n?"Deep Focus":"shortBreak"===n?"Micro Break":"Long Recharge"})]}),(0,Ue.jsxs)("div",{className:"text-center space-y-3",children:[(0,Ue.jsx)("div",{className:"text-6xl font-mono font-semibold",children:wh(c)}),(0,Ue.jsx)("div",{className:"w-full bg-white/20 dark:bg-black/30 rounded-full h-3 overflow-hidden",children:(0,Ue.jsx)("div",{className:"h-full bg-gradient-to-r from-light-accent to-light-heading dark:from-dark-button dark:to-dark-accent transition-all",style:{width:"".concat(d,"%")}})}),(0,Ue.jsxs)("p",{className:"text-sm text-light-heading/80 dark:text-dark-glow/80",children:["Completed focus rounds: ",(0,Ue.jsx)("span",{className:"font-semibold",children:i})]})]}),(0,Ue.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,Ue.jsx)("button",{onClick:()=>l(e=>!e),className:"px-4 py-2 rounded-full font-semibold text-white bg-gradient-to-r from-light-accent to-light-heading dark:from-dark-button dark:to-dark-accent",children:s?"Pause":"Start"}),(0,Ue.jsx)("button",{onClick:()=>{l(!1),r("focus"),a(0),u(60*e.focus)},className:"px-4 py-2 rounded-full font-semibold border border-light-accent/60 dark:border-dark-button/60",children:"Reset"})]}),(0,Ue.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{label:"Focus (min)",key:"focus"},{label:"Short Break",key:"shortBreak"},{label:"Long Break",key:"longBreak"}].map(n=>{let{label:r,key:o}=n;return(0,Ue.jsxs)("label",{className:"flex flex-col gap-2 text-sm font-semibold",children:[(0,Ue.jsx)("span",{children:r}),(0,Ue.jsx)("input",{type:"number",min:"1",max:"60",value:e[o],onChange:e=>((e,n)=>{const r=Math.max(1,Math.min(60,Number(n)||0));t(t=>Pt(Pt({},t),{},{[e]:r}))})(o,e.target.value),className:"rounded-xl border border-light-accent/40 dark:border-dark-button/40 bg-white/40 dark:bg-black/20 px-3 py-2 focus:outline-none"})]},o)})})]})},_h=Qd("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),kh=Qd("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),xh=Qd("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),Ch=Qd("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),Nh=[{title:"Handwritten Quantum Notes",context:"Scan recognizes chalkboard-style derivations, translating LaTeX-like scribbles into editable text.",observations:["Detected Schr\xf6dinger equation with potential well boundary conditions.","Highlights mis-labeled axes on energy diagram.","Extracted three follow-up study prompts."]},{title:"Biology Textbook Diagram",context:"Explains labeled cell organelles from a smartphone snapshot.",observations:["Corrects incorrectly numbered mitochondria labels.","Summarizes ATP flow between mitochondria and cytoplasm.","Suggests mnemonic for remembering organelle functions."]},{title:"History Flashcards",context:"Turns sticky-note timelines into structured bullet points.",observations:["Chronologically sorts WWII events that were originally scattered.","Adds quick context sentences for each date.","Groups events by theater (Europe vs Pacific)."]}],Th=[{label:"Environmental Chemistry Lecture",transcript:"Captured discussion on carbon sinks, with a reminder to compare peat bog vs. reforestation efficiency.",takeaways:["Auto-tagged \u201cradiative forcing\u201d and linked to past notes.","Suggested follow-up question: \u201cHow do wetlands amplify methane flux?\u201d."]},{label:"Neuroscience Seminar",transcript:"Summarized Q&A about synaptic pruning during adolescence in three crisp bullet points.",takeaways:["Flagged \u201cmicroglia\u201d as a focus term and added definition to glossary.","Created spaced-repetition cards for neurotransmitter pathways."]},{label:"Design Critique Meeting",transcript:"Converted casual conversation into action items with owners and due dates.",takeaways:["Associated Figma file links directly inside the transcript.","Suggested tone improvements for user onboarding copy."]}],Ih=()=>{const[e,t]=(0,o.useState)(0),[n,r]=(0,o.useState)(0),i=Nh[e],a=Th[n];return(0,Ue.jsxs)("div",{className:"space-y-6",children:[(0,Ue.jsxs)("div",{className:"glass-card p-6 space-y-4",children:[(0,Ue.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ue.jsxs)("div",{children:[(0,Ue.jsx)("p",{className:"text-xs uppercase tracking-wide text-light-heading/60 dark:text-dark-glow/60",children:"Image Scan & Explain"}),(0,Ue.jsx)("h3",{className:"text-2xl font-display font-bold",children:i.title}),(0,Ue.jsx)("p",{className:"text-sm text-light-heading/80 dark:text-dark-glow/80",children:i.context})]}),(0,Ue.jsx)("button",{onClick:()=>t(e=>(e+1)%Nh.length),className:"p-2 rounded-full border border-light-accent/40 dark:border-dark-button/40 hover:scale-105 transition","aria-label":"Try another demo image",children:(0,Ue.jsx)(_h,{size:18})})]}),(0,Ue.jsxs)("div",{className:"flex items-center gap-3 text-light-accent dark:text-dark-button",children:[(0,Ue.jsx)(kh,{size:20}),(0,Ue.jsx)("span",{className:"text-sm font-semibold",children:"Auto OCR + context clues unlocked"})]}),(0,Ue.jsx)("ul",{className:"list-disc list-inside space-y-2 text-sm",children:i.observations.map(e=>(0,Ue.jsx)("li",{children:e},e))})]}),(0,Ue.jsxs)("div",{className:"glass-card p-6 space-y-4",children:[(0,Ue.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ue.jsxs)("div",{children:[(0,Ue.jsx)("p",{className:"text-xs uppercase tracking-wide text-light-heading/60 dark:text-dark-glow/60",children:"Voice-to-Notes Studio"}),(0,Ue.jsx)("h3",{className:"text-2xl font-display font-bold",children:a.label}),(0,Ue.jsx)("p",{className:"text-sm text-light-heading/80 dark:text-dark-glow/80",children:a.transcript})]}),(0,Ue.jsxs)("div",{className:"flex gap-2",children:[(0,Ue.jsx)("button",{onClick:()=>r(e=>(e+1)%Th.length),className:"p-2 rounded-full border border-light-accent/40 dark:border-dark-button/40 hover:scale-105 transition","aria-label":"Play next voice demo",children:(0,Ue.jsx)(_h,{size:18})}),(0,Ue.jsx)("button",{className:"p-2 rounded-full border border-light-accent/40 dark:border-dark-button/40 hover:scale-105 transition","aria-label":"Listen to synthesized note",children:(0,Ue.jsx)(xh,{size:18})})]})]}),(0,Ue.jsxs)("div",{className:"flex items-center gap-3 text-light-accent dark:text-dark-button",children:[(0,Ue.jsx)(Ch,{size:20}),(0,Ue.jsx)("span",{className:"text-sm font-semibold",children:"Real-time transcription + automatic tagging"})]}),(0,Ue.jsx)("ul",{className:"list-disc list-inside space-y-2 text-sm",children:a.takeaways.map(e=>(0,Ue.jsx)("li",{children:e},e))})]})]})},Ah=()=>{const[e,t]=(0,o.useState)(""),[n,r]=(0,o.useState)(null),i=ie(),{setProcessedNotes:a,clearNotes:s}=nh();return(0,Ue.jsxs)("div",{className:"flex flex-col items-center text-center gap-12",children:[(0,Ue.jsx)("h1",{className:"text-4xl md:text-6xl font-bold mb-4 font-display bg-gradient-to-r from-light-accent to-light-heading dark:from-dark-button dark:to-dark-accent bg-clip-text text-transparent",children:"Unlock Your Notes with Luna"}),(0,Ue.jsx)("p",{className:"text-lg md:text-xl mb-8 max-w-2xl text-light-heading/80 dark:text-dark-glow/80",children:"Paste any text \u2014 lecture notes, articles, or study guides \u2014 and our AI will instantly structure it for you."}),(0,Ue.jsxs)("div",{className:"w-full max-w-3xl",children:[(0,Ue.jsx)("textarea",{value:e,onChange:e=>t(e.target.value),placeholder:"Paste your notes here...",className:"w-full h-64 p-4 rounded-2xl bg-white/30 dark:bg-black/20 border border-light-accent/30 dark:border-dark-button/30 focus:ring-2 focus:ring-light-accent dark:focus:ring-dark-button focus:outline-none backdrop-blur-md transition placeholder:text-light-heading/50 dark:placeholder:text-dark-glow/50 text-base resize-none"}),(0,Ue.jsx)("button",{onClick:async()=>{if(e.trim())if(!Fd||null!==Vd&&void 0!==Vd&&Vd.currentUser){r(null),s(),i("/processing");try{const t=await(async e=>Fd&&Bd?gh("processNotes",{text:e}):fh(e))(e);a(t),i("/output")}catch(t){console.error("Error calling processNotes function:",t),r("Sorry, something went wrong while processing your notes. Please try again."),i("/")}}else r("Please sign in to process your notes.");else r("Please paste some notes to process.")},className:"mt-4 px-8 py-3 rounded-full font-bold text-lg text-white bg-gradient-to-r from-light-accent to-light-heading dark:bg-gradient-to-r dark:from-dark-button dark:to-dark-accent dark:text-dark-bg hover:scale-105 transform transition-transform duration-300 disabled:opacity-50 disabled:cursor-not-allowed shadow-soft-light dark:shadow-soft-dark",children:"Process Notes"}),n&&(0,Ue.jsx)("p",{className:"mt-4 text-red-500",children:n})]}),(0,Ue.jsxs)("section",{className:"w-full grid grid-cols-1 xl:grid-cols-2 gap-8 text-left",children:[(0,Ue.jsx)(Sh,{}),(0,Ue.jsx)(Ih,{})]})]})},Ph=e=>{let{text:t="Processing..."}=e;return(0,Ue.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(0,Ue.jsx)("div",{className:"w-12 h-12 border-4 border-light-accent dark:border-dark-button border-t-transparent rounded-full animate-spin"}),(0,Ue.jsx)("p",{className:"text-lg font-semibold",children:t})]})},Oh=()=>(0,Ue.jsxs)("div",{className:"flex flex-col items-center justify-center text-center h-96",children:[(0,Ue.jsx)(Ph,{text:"Luna is analyzing your notes..."}),(0,Ue.jsx)("p",{className:"mt-4 text-light-heading/80 dark:text-dark-glow/80",children:"This might take a moment. Great insights are on their way!"})]}),Rh=Qd("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Dh=Qd("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Mh=Qd("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]),Lh=Qd("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),jh=()=>{const{processedNotes:e}=nh(),t=ie();if((0,o.useEffect)(()=>{e||t("/")},[e,t]),!e)return null;const{summary:n,keypoints:r,definitions:i,formulas:a}=e;return(0,Ue.jsxs)("div",{className:"flex flex-col gap-8 animate-fade-in",children:[(0,Ue.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Ue.jsx)("h1",{className:"text-4xl font-bold font-display",children:"Your Structured Notes"}),(0,Ue.jsxs)("div",{className:"flex gap-4",children:[(0,Ue.jsxs)("button",{onClick:async()=>{if(!Fd||null!==Vd&&void 0!==Vd&&Vd.currentUser)try{await(async e=>Fd&&Bd?gh("saveNotes",{processedData:e}):ph(e))(e),alert(Fd?"Notes saved successfully!":"Notes saved to your browser.")}catch(t){console.error("Error saving notes:",t),alert("Failed to save notes. Please try again.")}else alert("Please sign in to save your notes.")},className:"action-btn",children:[(0,Ue.jsx)(Rh,{size:18})," Save"]}),(0,Ue.jsxs)("button",{onClick:()=>{const t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),o=document.createElement("a");o.href=r,o.download="lunanotes-".concat((new Date).toISOString().split("T")[0],".json"),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(r)},className:"action-btn",children:[(0,Ue.jsx)(Dh,{size:18})," Download"]})]})]}),(0,Ue.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Ue.jsxs)(Re,{to:"/mindmap",className:"card-action group",children:[(0,Ue.jsx)(Mh,{size:40,className:"text-light-accent dark:text-dark-button"}),(0,Ue.jsxs)("div",{children:[(0,Ue.jsx)("h3",{className:"text-xl font-bold",children:"Mindmap View"}),(0,Ue.jsx)("p",{className:"text-sm opacity-80",children:"Visualize connections and ideas."})]})]}),(0,Ue.jsxs)(Re,{to:"/chat",className:"card-action group",children:[(0,Ue.jsx)(Lh,{size:40,className:"text-light-accent dark:text-dark-button"}),(0,Ue.jsxs)("div",{children:[(0,Ue.jsx)("h3",{className:"text-xl font-bold",children:"Chat with Notes"}),(0,Ue.jsx)("p",{className:"text-sm opacity-80",children:"Ask questions and get instant answers."})]})]})]}),(0,Ue.jsxs)("div",{className:"output-card",children:[(0,Ue.jsx)("h2",{className:"card-title",children:"Summary"}),(0,Ue.jsx)("p",{children:n})]}),(0,Ue.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,Ue.jsxs)("div",{className:"output-card",children:[(0,Ue.jsx)("h2",{className:"card-title",children:"Key Points"}),(0,Ue.jsx)("ul",{className:"list-disc list-inside space-y-2",children:r.map((e,t)=>(0,Ue.jsx)("li",{children:e},t))})]}),(0,Ue.jsxs)("div",{className:"output-card",children:[(0,Ue.jsx)("h2",{className:"card-title",children:"Definitions"}),(0,Ue.jsx)("div",{className:"space-y-4",children:i.map(e=>(0,Ue.jsxs)("div",{children:[(0,Ue.jsx)("h3",{className:"font-bold",children:e.term}),(0,Ue.jsx)("p",{children:e.definition})]},e.term))})]})]}),a&&a.length>0&&(0,Ue.jsxs)("div",{className:"output-card",children:[(0,Ue.jsx)("h2",{className:"card-title",children:"Formulas"}),(0,Ue.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,Ue.jsxs)("div",{className:"p-3 rounded-lg bg-black/5 dark:bg-white/5",children:[(0,Ue.jsx)("p",{className:"font-mono font-semibold",children:e.formula}),(0,Ue.jsx)("p",{className:"text-sm opacity-90",children:e.result})]},e.formula))})]}),(0,Ue.jsx)("style",{jsx:!0,children:"\n        .output-card {\n          @apply p-6 rounded-2xl bg-light-card/60 dark:bg-dark-card/60 border border-white/20 shadow-lg backdrop-blur-xl;\n        }\n        .card-title {\n          @apply text-2xl font-bold mb-4 font-display text-light-heading dark:text-dark-glow;\n        }\n        .card-action {\n          @apply flex items-center gap-4 text-left p-6 rounded-2xl bg-white/30 dark:bg-black/20 border border-light-accent/30 dark:border-dark-button/30 hover:border-light-accent dark:hover:border-dark-button shadow-md backdrop-blur-md transition-all duration-300 hover:scale-105;\n        }\n        .action-btn {\n            @apply flex items-center gap-2 px-4 py-2 rounded-lg font-semibold border-2 border-light-accent dark:border-dark-button hover:bg-light-accent/20 dark:hover:bg-dark-button/20 transition-colors;\n        }\n        .animate-fade-in {\n          animation: fadeIn 0.5s ease-in-out;\n        }\n        @keyframes fadeIn {\n          from { opacity: 0; transform: translateY(10px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n      "})]})};function Uh(e){if("string"===typeof e||"number"===typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,r=0;r<e.length;r++)""!==(n=Uh(e[r]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Fh=n(443);const zh=e=>{let t;const n=new Set,r=(e,r)=>{const o="function"===typeof e?e(t):e;if(!Object.is(o,t)){const e=t;t=(null!=r?r:"object"!==typeof o||null===o)?o:Object.assign({},t,o),n.forEach(n=>n(t,e))}},o=()=>t,i={setState:r,getState:o,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},a=t=e(r,o,i);return i},Vh=e=>e?zh(e):zh;const{useDebugValue:Bh}=o,{useSyncExternalStoreWithSelector:Hh}=Fh,Kh=e=>e;function Wh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kh,n=arguments.length>2?arguments[2]:void 0;const r=Hh(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Bh(r),r}const qh=(e,t)=>{const n=Vh(e),r=function(e){return Wh(n,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:t)};return Object.assign(r,n),r};function Gh(e,t){if(Object.is(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var Xh={value:()=>{}};function Yh(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new Qh(r)}function Qh(e){this._=e}function $h(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}function Jh(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=Xh,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}Qh.prototype=Yh.prototype={constructor:Qh,on:function(e,t){var n,r,o=this._,i=(r=o,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),a=-1,s=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++a<s;)if(n=(e=i[a]).type)o[n]=Jh(o[n],e.name,t);else if(null==t)for(n in o)o[n]=Jh(o[n],e.name,null);return this}for(;++a<s;)if((n=(e=i[a]).type)&&(n=$h(o[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Qh(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(r=this._[e]).length;i<n;++i)r[i].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};const Zh=Yh;function ef(){}function tf(e){return null==e?ef:function(){return this.querySelector(e)}}function nf(){return[]}function rf(e){return null==e?nf:function(){return this.querySelectorAll(e)}}function of(e){return function(){return function(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}(e.apply(this,arguments))}}function af(e){return function(){return this.matches(e)}}function sf(e){return function(t){return t.matches(e)}}var lf=Array.prototype.find;function cf(){return this.firstElementChild}var uf=Array.prototype.filter;function df(){return Array.from(this.children)}function hf(e){return new Array(e.length)}function ff(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function pf(e,t,n,r,o,i){for(var a,s=0,l=t.length,c=i.length;s<c;++s)(a=t[s])?(a.__data__=i[s],r[s]=a):n[s]=new ff(e,i[s]);for(;s<l;++s)(a=t[s])&&(o[s]=a)}function gf(e,t,n,r,o,i,a){var s,l,c,u=new Map,d=t.length,h=i.length,f=new Array(d);for(s=0;s<d;++s)(l=t[s])&&(f[s]=c=a.call(l,l.__data__,s,t)+"",u.has(c)?o[s]=l:u.set(c,l));for(s=0;s<h;++s)c=a.call(e,i[s],s,i)+"",(l=u.get(c))?(r[s]=l,l.__data__=i[s],u.delete(c)):n[s]=new ff(e,i[s]);for(s=0;s<d;++s)(l=t[s])&&u.get(f[s])===l&&(o[s]=l)}function mf(e){return e.__data__}function vf(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function yf(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}ff.prototype={constructor:ff,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var bf="http://www.w3.org/1999/xhtml";const wf={svg:"http://www.w3.org/2000/svg",xhtml:bf,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ef(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),wf.hasOwnProperty(t)?{space:wf[t],local:e}:e}function Sf(e){return function(){this.removeAttribute(e)}}function _f(e){return function(){this.removeAttributeNS(e.space,e.local)}}function kf(e,t){return function(){this.setAttribute(e,t)}}function xf(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Cf(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Nf(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Tf(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function If(e){return function(){this.style.removeProperty(e)}}function Af(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Pf(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Of(e,t){return e.style.getPropertyValue(t)||Tf(e).getComputedStyle(e,null).getPropertyValue(t)}function Rf(e){return function(){delete this[e]}}function Df(e,t){return function(){this[e]=t}}function Mf(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Lf(e){return e.trim().split(/^|\s+/)}function jf(e){return e.classList||new Uf(e)}function Uf(e){this._node=e,this._names=Lf(e.getAttribute("class")||"")}function Ff(e,t){for(var n=jf(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function zf(e,t){for(var n=jf(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function Vf(e){return function(){Ff(this,e)}}function Bf(e){return function(){zf(this,e)}}function Hf(e,t){return function(){(t.apply(this,arguments)?Ff:zf)(this,e)}}function Kf(){this.textContent=""}function Wf(e){return function(){this.textContent=e}}function qf(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Gf(){this.innerHTML=""}function Xf(e){return function(){this.innerHTML=e}}function Yf(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Qf(){this.nextSibling&&this.parentNode.appendChild(this)}function $f(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Jf(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===bf&&t.documentElement.namespaceURI===bf?t.createElement(e):t.createElementNS(n,e)}}function Zf(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ep(e){var t=Ef(e);return(t.local?Zf:Jf)(t)}function tp(){return null}function np(){var e=this.parentNode;e&&e.removeChild(this)}function rp(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function op(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ip(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,i=t.length;r<i;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function ap(e,t,n){return function(){var r,o=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(o)for(var a=0,s=o.length;a<s;++a)if((r=o[a]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),void(r.value=t);this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function sp(e,t,n){var r=Tf(e),o=r.CustomEvent;"function"===typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function lp(e,t){return function(){return sp(this,e,t)}}function cp(e,t){return function(){return sp(this,e,t.apply(this,arguments))}}Uf.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var up=[null];function dp(e,t){this._groups=e,this._parents=t}function hp(){return new dp([[document.documentElement]],up)}dp.prototype=hp.prototype={constructor:dp,select:function(e){"function"!==typeof e&&(e=tf(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a,s=t[o],l=s.length,c=r[o]=new Array(l),u=0;u<l;++u)(i=s[u])&&(a=e.call(i,i.__data__,u,s))&&("__data__"in i&&(a.__data__=i.__data__),c[u]=a);return new dp(r,this._parents)},selectAll:function(e){e="function"===typeof e?of(e):rf(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var a,s=t[i],l=s.length,c=0;c<l;++c)(a=s[c])&&(r.push(e.call(a,a.__data__,c,s)),o.push(a));return new dp(r,o)},selectChild:function(e){return this.select(null==e?cf:function(e){return function(){return lf.call(this.children,e)}}("function"===typeof e?e:sf(e)))},selectChildren:function(e){return this.selectAll(null==e?df:function(e){return function(){return uf.call(this.children,e)}}("function"===typeof e?e:sf(e)))},filter:function(e){"function"!==typeof e&&(e=af(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a=t[o],s=a.length,l=r[o]=[],c=0;c<s;++c)(i=a[c])&&e.call(i,i.__data__,c,a)&&l.push(i);return new dp(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,mf);var n=t?gf:pf,r=this._parents,o=this._groups;"function"!==typeof e&&(e=function(e){return function(){return e}}(e));for(var i=o.length,a=new Array(i),s=new Array(i),l=new Array(i),c=0;c<i;++c){var u=r[c],d=o[c],h=d.length,f=vf(e.call(u,u&&u.__data__,c,r)),p=f.length,g=s[c]=new Array(p),m=a[c]=new Array(p);n(u,d,g,m,l[c]=new Array(h),f,t);for(var v,y,b=0,w=0;b<p;++b)if(v=g[b]){for(b>=w&&(w=b+1);!(y=m[w])&&++w<p;);v._next=y||null}}return(a=new dp(a,r))._enter=s,a._exit=l,a},enter:function(){return new dp(this._enter||this._groups.map(hf),this._parents)},exit:function(){return new dp(this._exit||this._groups.map(hf),this._parents)},join:function(e,t,n){var r=this.enter(),o=this,i=this.exit();return"function"===typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(o=t(o))&&(o=o.selection()),null==n?i.remove():n(i),r&&o?r.merge(o).order():o},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,a=Math.min(o,i),s=new Array(o),l=0;l<a;++l)for(var c,u=n[l],d=r[l],h=u.length,f=s[l]=new Array(h),p=0;p<h;++p)(c=u[p]||d[p])&&(f[p]=c);for(;l<o;++l)s[l]=n[l];return new dp(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],i=o.length-1,a=o[i];--i>=0;)(r=o[i])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=yf);for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var a,s=n[i],l=s.length,c=o[i]=new Array(l),u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(t)}return new dp(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,i=t[n],a=0,s=i.length;a<s;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this},attr:function(e,t){var n=Ef(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?_f:Sf:"function"===typeof t?n.local?Nf:Cf:n.local?xf:kf)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?If:"function"===typeof t?Pf:Af)(e,t,null==n?"":n)):Of(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Rf:"function"===typeof t?Mf:Df)(e,t)):this.node()[e]},classed:function(e,t){var n=Lf(e+"");if(arguments.length<2){for(var r=jf(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"===typeof t?Hf:t?Vf:Bf)(n,t))},text:function(e){return arguments.length?this.each(null==e?Kf:("function"===typeof e?qf:Wf)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Gf:("function"===typeof e?Yf:Xf)(e)):this.node().innerHTML},raise:function(){return this.each(Qf)},lower:function(){return this.each($f)},append:function(e){var t="function"===typeof e?e:ep(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"===typeof e?e:ep(e),r=null==t?tp:"function"===typeof t?t:tf(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(np)},clone:function(e){return this.select(e?op:rp)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,i=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}(e+""),a=i.length;if(!(arguments.length<2)){for(s=t?ap:ip,r=0;r<a;++r)this.each(s(i[r],t,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<a;++r)if((o=i[r]).type===l.type&&o.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"===typeof t?cp:lp)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,o=e[t],i=0,a=o.length;i<a;++i)(r=o[i])&&(yield r)}};const fp=hp;function pp(e){return"string"===typeof e?new dp([[document.querySelector(e)]],[document.documentElement]):new dp([[e]],up)}const gp={passive:!1},mp={capture:!0,passive:!1};function vp(e){e.stopImmediatePropagation()}function yp(e){e.preventDefault(),e.stopImmediatePropagation()}function bp(e){var t=e.document.documentElement,n=pp(e).on("dragstart.drag",yp,mp);"onselectstart"in t?n.on("selectstart.drag",yp,mp):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function wp(e,t){var n=e.document.documentElement,r=pp(e).on("dragstart.drag",null);t&&(r.on("click.drag",yp,mp),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Ep(e){return((e=Math.exp(e))+1/e)/2}const Sp=function e(t,n,r){function o(e,o){var i,a,s=e[0],l=e[1],c=e[2],u=o[0],d=o[1],h=o[2],f=u-s,p=d-l,g=f*f+p*p;if(g<1e-12)a=Math.log(h/c)/t,i=function(e){return[s+e*f,l+e*p,c*Math.exp(t*e*a)]};else{var m=Math.sqrt(g),v=(h*h-c*c+r*g)/(2*c*n*m),y=(h*h-c*c-r*g)/(2*h*n*m),b=Math.log(Math.sqrt(v*v+1)-v),w=Math.log(Math.sqrt(y*y+1)-y);a=(w-b)/t,i=function(e){var r=e*a,o=Ep(b),i=c/(n*m)*(o*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(t*r+b)-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[s+i*f,l+i*p,c*o/Ep(t*r+b)]}}return i.duration=1e3*a*t/Math.SQRT2,i}return o.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},o}(Math.SQRT2,2,4);function _p(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}var kp,xp,Cp=0,Np=0,Tp=0,Ip=0,Ap=0,Pp=0,Op="object"===typeof performance&&performance.now?performance:Date,Rp="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Dp(){return Ap||(Rp(Mp),Ap=Op.now()+Pp)}function Mp(){Ap=0}function Lp(){this._call=this._time=this._next=null}function jp(e,t,n){var r=new Lp;return r.restart(e,t,n),r}function Up(){Ap=(Ip=Op.now())+Pp,Cp=Np=0;try{!function(){Dp(),++Cp;for(var e,t=kp;t;)(e=Ap-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Cp}()}finally{Cp=0,function(){var e,t,n=kp,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:kp=t);xp=e,zp(r)}(),Ap=0}}function Fp(){var e=Op.now(),t=e-Ip;t>1e3&&(Pp-=t,Ip=e)}function zp(e){Cp||(Np&&(Np=clearTimeout(Np)),e-Ap>24?(e<1/0&&(Np=setTimeout(Up,e-Op.now()-Pp)),Tp&&(Tp=clearInterval(Tp))):(Tp||(Ip=Op.now(),Tp=setInterval(Fp,1e3)),Cp=1,Rp(Up)))}function Vp(e,t,n){var r=new Lp;return t=null==t?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}Lp.prototype=jp.prototype={constructor:Lp,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?Dp():+n)+(null==t?0:+t),this._next||xp===this||(xp?xp._next=this:kp=this,xp=this),this._call=e,this._time=n,zp()},stop:function(){this._call&&(this._call=null,this._time=1/0,zp())}};var Bp=Zh("start","end","cancel","interrupt"),Hp=[];function Kp(e,t,n,r,o,i){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,o=e.__transition;function i(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(i){var c,u,d,h;if(1!==n.state)return l();for(c in o)if((h=o[c]).name===n.name){if(3===h.state)return Vp(a);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[c]):+c<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[c])}if(Vp(function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(i))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=h);r.length=u+1}}function s(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=5,1),i=-1,a=r.length;++i<a;)r[i].call(e,o);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=6,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=jp(i,0,n.time)}(e,n,{name:t,index:r,group:o,on:Bp,tween:Hp,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:0})}function Wp(e,t){var n=Gp(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function qp(e,t){var n=Gp(e,t);if(n.state>3)throw new Error("too late; already running");return n}function Gp(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Xp(e,t){var n,r,o,i=e.__transition,a=!0;if(i){for(o in t=null==t?null:t+"",i)(n=i[o]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[o]):a=!1;a&&delete e.__transition}}function Yp(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Qp,$p=180/Math.PI,Jp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Zp(e,t,n,r,o,i){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*$p,skewX:Math.atan(l)*$p,scaleX:a,scaleY:s}}function eg(e,t,n,r){function o(e){return e.length?e.pop()+" ":""}return function(i,a){var s=[],l=[];return i=e(i),a=e(a),function(e,r,o,i,a,s){if(e!==o||r!==i){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:Yp(e,o)},{i:l-2,x:Yp(r,i)})}else(o||i)&&a.push("translate("+o+t+i+n)}(i.translateX,i.translateY,a.translateX,a.translateY,s,l),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(o(n)+"rotate(",null,r)-2,x:Yp(e,t)})):t&&n.push(o(n)+"rotate("+t+r)}(i.rotate,a.rotate,s,l),function(e,t,n,i){e!==t?i.push({i:n.push(o(n)+"skewX(",null,r)-2,x:Yp(e,t)}):t&&n.push(o(n)+"skewX("+t+r)}(i.skewX,a.skewX,s,l),function(e,t,n,r,i,a){if(e!==n||t!==r){var s=i.push(o(i)+"scale(",null,",",null,")");a.push({i:s-4,x:Yp(e,n)},{i:s-2,x:Yp(t,r)})}else 1===n&&1===r||i.push(o(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,s,l),i=a=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var tg=eg(function(e){const t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Jp:Zp(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),ng=eg(function(e){return null==e?Jp:(Qp||(Qp=document.createElementNS("http://www.w3.org/2000/svg","g")),Qp.setAttribute("transform",e),(e=Qp.transform.baseVal.consolidate())?Zp((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Jp)},", ",")",")");function rg(e,t){var n,r;return function(){var o=qp(this,e),i=o.tween;if(i!==n)for(var a=0,s=(r=n=i).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}o.tween=r}}function og(e,t,n){var r,o;if("function"!==typeof n)throw new Error;return function(){var i=qp(this,e),a=i.tween;if(a!==r){o=(r=a).slice();for(var s={name:t,value:n},l=0,c=o.length;l<c;++l)if(o[l].name===t){o[l]=s;break}l===c&&o.push(s)}i.tween=o}}function ig(e,t,n){var r=e._id;return e.each(function(){var e=qp(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return Gp(e,r).value[t]}}function ag(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function sg(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function lg(){}var cg=.7,ug=1/cg,dg="\\s*([+-]?\\d+)\\s*",hg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pg=/^#([0-9a-f]{3,8})$/,gg=new RegExp("^rgb\\(".concat(dg,",").concat(dg,",").concat(dg,"\\)$")),mg=new RegExp("^rgb\\(".concat(fg,",").concat(fg,",").concat(fg,"\\)$")),vg=new RegExp("^rgba\\(".concat(dg,",").concat(dg,",").concat(dg,",").concat(hg,"\\)$")),yg=new RegExp("^rgba\\(".concat(fg,",").concat(fg,",").concat(fg,",").concat(hg,"\\)$")),bg=new RegExp("^hsl\\(".concat(hg,",").concat(fg,",").concat(fg,"\\)$")),wg=new RegExp("^hsla\\(".concat(hg,",").concat(fg,",").concat(fg,",").concat(hg,"\\)$")),Eg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Sg(){return this.rgb().formatHex()}function _g(){return this.rgb().formatRgb()}function kg(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=pg.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?xg(t):3===n?new Tg(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Cg(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Cg(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=gg.exec(e))?new Tg(t[1],t[2],t[3],1):(t=mg.exec(e))?new Tg(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=vg.exec(e))?Cg(t[1],t[2],t[3],t[4]):(t=yg.exec(e))?Cg(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=bg.exec(e))?Dg(t[1],t[2]/100,t[3]/100,1):(t=wg.exec(e))?Dg(t[1],t[2]/100,t[3]/100,t[4]):Eg.hasOwnProperty(e)?xg(Eg[e]):"transparent"===e?new Tg(NaN,NaN,NaN,0):null}function xg(e){return new Tg(e>>16&255,e>>8&255,255&e,1)}function Cg(e,t,n,r){return r<=0&&(e=t=n=NaN),new Tg(e,t,n,r)}function Ng(e,t,n,r){return 1===arguments.length?((o=e)instanceof lg||(o=kg(o)),o?new Tg((o=o.rgb()).r,o.g,o.b,o.opacity):new Tg):new Tg(e,t,n,null==r?1:r);var o}function Tg(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Ig(){return"#".concat(Rg(this.r)).concat(Rg(this.g)).concat(Rg(this.b))}function Ag(){const e=Pg(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(Og(this.r),", ").concat(Og(this.g),", ").concat(Og(this.b)).concat(1===e?")":", ".concat(e,")"))}function Pg(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Og(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Rg(e){return((e=Og(e))<16?"0":"")+e.toString(16)}function Dg(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Lg(e,t,n,r)}function Mg(e){if(e instanceof Lg)return new Lg(e.h,e.s,e.l,e.opacity);if(e instanceof lg||(e=kg(e)),!e)return new Lg;if(e instanceof Lg)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),a=NaN,s=i-o,l=(i+o)/2;return s?(a=t===i?(n-r)/s+6*(n<r):n===i?(r-t)/s+2:(t-n)/s+4,s/=l<.5?i+o:2-i-o,a*=60):s=l>0&&l<1?0:a,new Lg(a,s,l,e.opacity)}function Lg(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function jg(e){return(e=(e||0)%360)<0?e+360:e}function Ug(e){return Math.max(0,Math.min(1,e||0))}function Fg(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function zg(e,t,n,r,o){var i=e*e,a=i*e;return((1-3*e+3*i-a)*t+(4-6*i+3*a)*n+(1+3*e+3*i-3*a)*r+a*o)/6}ag(lg,kg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Sg,formatHex:Sg,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Mg(this).formatHsl()},formatRgb:_g,toString:_g}),ag(Tg,Ng,sg(lg,{brighter(e){return e=null==e?ug:Math.pow(ug,e),new Tg(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?cg:Math.pow(cg,e),new Tg(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Tg(Og(this.r),Og(this.g),Og(this.b),Pg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ig,formatHex:Ig,formatHex8:function(){return"#".concat(Rg(this.r)).concat(Rg(this.g)).concat(Rg(this.b)).concat(Rg(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:Ag,toString:Ag})),ag(Lg,function(e,t,n,r){return 1===arguments.length?Mg(e):new Lg(e,t,n,null==r?1:r)},sg(lg,{brighter(e){return e=null==e?ug:Math.pow(ug,e),new Lg(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?cg:Math.pow(cg,e),new Lg(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Tg(Fg(e>=240?e-240:e+120,o,r),Fg(e,o,r),Fg(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new Lg(jg(this.h),Ug(this.s),Ug(this.l),Pg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Pg(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(jg(this.h),", ").concat(100*Ug(this.s),"%, ").concat(100*Ug(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));const Vg=e=>()=>e;function Bg(e,t){return function(n){return e+n*t}}function Hg(e){return 1===(e=+e)?Kg:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Vg(isNaN(t)?n:t)}}function Kg(e,t){var n=t-e;return n?Bg(e,n):Vg(isNaN(e)?t:e)}const Wg=function e(t){var n=Hg(t);function r(e,t){var r=n((e=Ng(e)).r,(t=Ng(t)).r),o=n(e.g,t.g),i=n(e.b,t.b),a=Kg(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=o(t),e.b=i(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function qg(e){return function(t){var n,r,o=t.length,i=new Array(o),a=new Array(o),s=new Array(o);for(n=0;n<o;++n)r=Ng(t[n]),i[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return i=e(i),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=i(e),r.g=a(e),r.b=s(e),r+""}}}qg(function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),o=e[r],i=e[r+1],a=r>0?e[r-1]:2*o-i,s=r<t-1?e[r+2]:2*i-o;return zg((n-r/t)*t,a,o,i,s)}}),qg(function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),o=e[(r+t-1)%t],i=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return zg((n-r/t)*t,o,i,a,s)}});var Gg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Xg=new RegExp(Gg.source,"g");function Yg(e,t){var n,r,o,i=Gg.lastIndex=Xg.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=Gg.exec(e))&&(r=Xg.exec(t));)(o=r.index)>i&&(o=t.slice(i,o),s[a]?s[a]+=o:s[++a]=o),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:Yp(n,r)})),i=Xg.lastIndex;return i<t.length&&(o=t.slice(i),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function Qg(e,t){var n;return("number"===typeof t?Yp:t instanceof kg?Wg:(n=kg(t))?(t=n,Wg):Yg)(e,t)}function $g(e){return function(){this.removeAttribute(e)}}function Jg(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Zg(e,t,n){var r,o,i=n+"";return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}}function em(e,t,n){var r,o,i=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}function tm(e,t,n){var r,o,i;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(e))===(s=l+"")?null:a===r&&s===o?i:(o=s,i=t(r=a,l));this.removeAttribute(e)}}function nm(e,t,n){var r,o,i;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===r&&s===o?i:(o=s,i=t(r=a,l));this.removeAttributeNS(e.space,e.local)}}function rm(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,o)),n}return o._value=t,o}function om(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,o)),n}return o._value=t,o}function im(e,t){return function(){Wp(this,e).delay=+t.apply(this,arguments)}}function am(e,t){return t=+t,function(){Wp(this,e).delay=t}}function sm(e,t){return function(){qp(this,e).duration=+t.apply(this,arguments)}}function lm(e,t){return t=+t,function(){qp(this,e).duration=t}}var cm=fp.prototype.constructor;function um(e){return function(){this.style.removeProperty(e)}}var dm=0;function hm(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function fm(){return++dm}var pm=fp.prototype;hm.prototype=function(e){return fp().transition(e)}.prototype={constructor:hm,select:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=tf(e));for(var r=this._groups,o=r.length,i=new Array(o),a=0;a<o;++a)for(var s,l,c=r[a],u=c.length,d=i[a]=new Array(u),h=0;h<u;++h)(s=c[h])&&(l=e.call(s,s.__data__,h,c))&&("__data__"in s&&(l.__data__=s.__data__),d[h]=l,Kp(d[h],t,n,h,d,Gp(s,n)));return new hm(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=rf(e));for(var r=this._groups,o=r.length,i=[],a=[],s=0;s<o;++s)for(var l,c=r[s],u=c.length,d=0;d<u;++d)if(l=c[d]){for(var h,f=e.call(l,l.__data__,d,c),p=Gp(l,n),g=0,m=f.length;g<m;++g)(h=f[g])&&Kp(h,t,n,g,f,p);i.push(f),a.push(l)}return new hm(i,a,t,n)},selectChild:pm.selectChild,selectChildren:pm.selectChildren,filter:function(e){"function"!==typeof e&&(e=af(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a=t[o],s=a.length,l=r[o]=[],c=0;c<s;++c)(i=a[c])&&e.call(i,i.__data__,c,a)&&l.push(i);return new hm(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),a=new Array(r),s=0;s<i;++s)for(var l,c=t[s],u=n[s],d=c.length,h=a[s]=new Array(d),f=0;f<d;++f)(l=c[f]||u[f])&&(h[f]=l);for(;s<r;++s)a[s]=t[s];return new hm(a,this._parents,this._name,this._id)},selection:function(){return new cm(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=fm(),r=this._groups,o=r.length,i=0;i<o;++i)for(var a,s=r[i],l=s.length,c=0;c<l;++c)if(a=s[c]){var u=Gp(a,t);Kp(a,e,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new hm(r,this._parents,e,n)},call:pm.call,nodes:pm.nodes,node:pm.node,size:pm.size,empty:pm.empty,each:pm.each,on:function(e,t){var n=this._id;return arguments.length<2?Gp(this.node(),n).on.on(e):this.each(function(e,t,n){var r,o,i=function(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(t)?Wp:qp;return function(){var a=i(this,e),s=a.on;s!==r&&(o=(r=s).copy()).on(t,n),a.on=o}}(n,e,t))},attr:function(e,t){var n=Ef(e),r="transform"===n?ng:Qg;return this.attrTween(e,"function"===typeof t?(n.local?nm:tm)(n,r,ig(this,"attr."+e,t)):null==t?(n.local?Jg:$g)(n):(n.local?em:Zg)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var r=Ef(e);return this.tween(n,(r.local?rm:om)(r,t))},style:function(e,t,n){var r="transform"===(e+="")?tg:Qg;return null==t?this.styleTween(e,function(e,t){var n,r,o;return function(){var i=Of(this,e),a=(this.style.removeProperty(e),Of(this,e));return i===a?null:i===n&&a===r?o:o=t(n=i,r=a)}}(e,r)).on("end.style."+e,um(e)):"function"===typeof t?this.styleTween(e,function(e,t,n){var r,o,i;return function(){var a=Of(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=Of(this,e)),a===l?null:a===r&&l===o?i:(o=l,i=t(r=a,s))}}(e,r,ig(this,"style."+e,t))).each(function(e,t){var n,r,o,i,a="style."+t,s="end."+a;return function(){var l=qp(this,e),c=l.on,u=null==l.value[a]?i||(i=um(t)):void 0;c===n&&o===u||(r=(n=c).copy()).on(s,o=u),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,o,i=n+"";return function(){var a=Of(this,e);return a===i?null:a===r?o:o=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!==typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,o;function i(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,i,n)),r}return i._value=t,i}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(ig(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=Gp(this.node(),n).tween,i=0,a=o.length;i<a;++i)if((r=o[i]).name===e)return r.value;return null}return this.each((null==t?rg:og)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?im:am)(t,e)):Gp(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?sm:lm)(t,e)):Gp(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!==typeof t)throw new Error;return function(){qp(this,e).ease=t}}(t,e)):Gp(this.node(),t).ease},easeVarying:function(e){if("function"!==typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!==typeof n)throw new Error;qp(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,a){var s={value:a},l={value:function(){0===--o&&i()}};n.each(function(){var n=qp(this,r),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t}),0===o&&i()})},[Symbol.iterator]:pm[Symbol.iterator]};var gm={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function mm(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error("transition ".concat(t," not found"));return n}fp.prototype.interrupt=function(e){return this.each(function(){Xp(this,e)})},fp.prototype.transition=function(e){var t,n;e instanceof hm?(t=e._id,e=e._name):(t=fm(),(n=gm).time=Dp(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var a,s=r[i],l=s.length,c=0;c<l;++c)(a=s[c])&&Kp(a,e,t,c,s,n||mm(a,t));return new hm(r,this._parents,e,t)};const vm=e=>()=>e;function ym(e,t){let{sourceEvent:n,target:r,transform:o,dispatch:i}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function bm(e,t,n){this.k=e,this.x=t,this.y=n}bm.prototype={constructor:bm,scale:function(e){return 1===e?this:new bm(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new bm(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var wm=new bm(1,0,0);function Em(e){e.stopImmediatePropagation()}function Sm(e){e.preventDefault(),e.stopImmediatePropagation()}function _m(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function km(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function xm(){return this.__zoom||wm}function Cm(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Nm(){return navigator.maxTouchPoints||"ontouchstart"in this}function Tm(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}bm.prototype;const Im=e=>()=>e;function Am(e,t){let{sourceEvent:n,subject:r,target:o,identifier:i,active:a,x:s,y:l,dx:c,dy:u,dispatch:d}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}function Pm(e){return!e.ctrlKey&&!e.button}function Om(){return this.parentNode}function Rm(e,t){return null==t?{x:e.x,y:e.y}:t}function Dm(){return navigator.maxTouchPoints||"ontouchstart"in this}Am.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};const Mm=["position","children","className","style"],Lm=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"],jm=["type","position","isValidConnection","isConnectable","isConnectableStart","isConnectableEnd","id","onConnect","children","className","onMouseDown","onTouchStart"],Um=["nodes","edges","defaultNodes","defaultEdges","className","nodeTypes","edgeTypes","onNodeClick","onEdgeClick","onInit","onMove","onMoveStart","onMoveEnd","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onNodesDelete","onEdgesDelete","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","onSelectionStart","onSelectionEnd","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","connectionLineContainerStyle","deleteKeyCode","selectionKeyCode","selectionOnDrag","selectionMode","panActivationKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","nodesFocusable","nodeOrigin","edgesFocusable","edgesUpdatable","elementsSelectable","defaultViewport","minZoom","maxZoom","translateExtent","preventScrolling","nodeExtent","defaultMarkerColor","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","panOnDrag","onPaneClick","onPaneMouseEnter","onPaneMouseMove","onPaneMouseLeave","onPaneScroll","onPaneContextMenu","children","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdate","onEdgeUpdateStart","onEdgeUpdateEnd","onReconnect","onReconnectStart","onReconnectEnd","reconnectRadius","edgeUpdaterRadius","onNodesChange","onEdgesChange","noDragClassName","noWheelClassName","noPanClassName","fitView","fitViewOptions","connectOnClick","attributionPosition","proOptions","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","disableKeyboardA11y","autoPanOnConnect","autoPanOnNodeDrag","connectionRadius","isValidConnection","onError","style","id","nodeDragThreshold"],Fm=(0,o.createContext)(null),zm=Fm.Provider,Vm=e=>'Node type "'.concat(e,'" not found. Using fallback type "default".'),Bm=()=>"The React Flow parent container needs a width and a height to render the graph.",Hm=()=>"Only child nodes can use a parent extent.",Km=()=>"Can't create edge. An edge needs a source and a target.",Wm=e=>'Marker type "'.concat(e,"\" doesn't exist."),qm=(e,t)=>"Couldn't create edge for ".concat(e?"target":"source",' handle id: "').concat(e?t.targetHandle:t.sourceHandle,'", edge id: ').concat(t.id,"."),Gm=()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",Xm=e=>'Edge type "'.concat(e,'" not found. Using fallback type "default".'),Ym=e=>'Node with id "'.concat(e,'" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.'),Qm=(()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001")();function $m(e,t){const n=(0,o.useContext)(Fm);if(null===n)throw new Error(Qm);return Wh(n,e,t)}const Jm=()=>{const e=(0,o.useContext)(Fm);if(null===e)throw new Error(Qm);return(0,o.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Zm=e=>e.userSelectionActive?"none":"all";function ev(e){let{position:t,children:n,className:r,style:i}=e,a=Hd(e,Mm);const s=$m(Zm),l="".concat(t).split("-");return o.createElement("div",Pt({className:Uh(["react-flow__panel",r,...l]),style:Pt(Pt({},i),{},{pointerEvents:s})},a),n)}function tv(e){let{proOptions:t,position:n="bottom-right"}=e;return null!==t&&void 0!==t&&t.hideAttribution?null:o.createElement(ev,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},o.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}var nv=(0,o.memo)(e=>{let{x:t,y:n,label:r,labelStyle:i={},labelShowBg:a=!0,labelBgStyle:s={},labelBgPadding:l=[2,4],labelBgBorderRadius:c=2,children:u,className:d}=e,h=Hd(e,Lm);const f=(0,o.useRef)(null),[p,g]=(0,o.useState)({x:0,y:0,width:0,height:0}),m=Uh(["react-flow__edge-textwrapper",d]);return(0,o.useEffect)(()=>{if(f.current){const e=f.current.getBBox();g({x:e.x,y:e.y,width:e.width,height:e.height})}},[r]),"undefined"!==typeof r&&r?o.createElement("g",Pt({transform:"translate(".concat(t-p.width/2," ").concat(n-p.height/2,")"),className:m,visibility:p.width?"visible":"hidden"},h),a&&o.createElement("rect",{width:p.width+2*l[0],x:-l[0],y:-l[1],height:p.height+2*l[1],className:"react-flow__edge-textbg",style:s,rx:c,ry:c}),o.createElement("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:f,style:i},r),u):null});const rv=e=>({width:e.offsetWidth,height:e.offsetHeight}),ov=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)},iv=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},t=arguments.length>1?arguments[1]:void 0;return{x:ov(e.x,t[0][0],t[1][0]),y:ov(e.y,t[0][1],t[1][1])}},av=(e,t,n)=>e<t?ov(Math.abs(e-t),1,50)/50:e>n?-ov(Math.abs(e-n),1,50)/50:0,sv=(e,t)=>[20*av(e.x,35,t.width-35),20*av(e.y,35,t.height-35)],lv=e=>{var t,n;return(null===(t=e.getRootNode)||void 0===t?void 0:t.call(e))||(null===(n=window)||void 0===n?void 0:n.document)},cv=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),uv=e=>{let{x:t,y:n,width:r,height:o}=e;return{x:t,y:n,x2:t+r,y2:n+o}},dv=e=>{let{x:t,y:n,x2:r,y2:o}=e;return{x:t,y:n,width:r-t,height:o-n}},hv=e=>Pt(Pt({},e.positionAbsolute||{x:0,y:0}),{},{width:e.width||0,height:e.height||0}),fv=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},pv=e=>!isNaN(e)&&isFinite(e),gv=Symbol.for("internals"),mv=["Enter"," ","Escape"],vv=(e,t)=>{0};function yv(e){var t;const n=(e=>"nativeEvent"in e)(e)?e.nativeEvent:e,r=(null===(t=n.composedPath)||void 0===t||null===(t=t.call(n))||void 0===t?void 0:t[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(null===r||void 0===r?void 0:r.nodeName)||(null===r||void 0===r?void 0:r.hasAttribute("contenteditable"))||!(null===r||void 0===r||!r.closest(".nokey"))}const bv=e=>"clientX"in e,wv=(e,t)=>{var n,r,o,i;const a=bv(e),s=a?e.clientX:null===(n=e.touches)||void 0===n?void 0:n[0].clientX,l=a?e.clientY:null===(r=e.touches)||void 0===r?void 0:r[0].clientY;return{x:s-(null!==(o=null===t||void 0===t?void 0:t.left)&&void 0!==o?o:0),y:l-(null!==(i=null===t||void 0===t?void 0:t.top)&&void 0!==i?i:0)}},Ev=()=>{var e;return"undefined"!==typeof navigator&&(null===(e=navigator)||void 0===e||null===(e=e.userAgent)||void 0===e?void 0:e.indexOf("Mac"))>=0},Sv=e=>{let{id:t,path:n,labelX:r,labelY:i,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:h,markerEnd:f,markerStart:p,interactionWidth:g=20}=e;return o.createElement(o.Fragment,null,o.createElement("path",{id:t,style:h,d:n,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:p}),g&&o.createElement("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),a&&pv(r)&&pv(i)?o.createElement(nv,{x:r,y:i,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d}):null)};Sv.displayName="BaseEdge";function _v(e,t,n){return void 0===n?n:r=>{const o=t().edges.find(t=>t.id===e);o&&n(r,Pt({},o))}}function kv(e){let{sourceX:t,sourceY:n,targetX:r,targetY:o}=e;const i=Math.abs(r-t)/2,a=r<t?r+i:r-i,s=Math.abs(o-n)/2;return[a,o<n?o+s:o-s,i,s]}function xv(e){let{sourceX:t,sourceY:n,targetX:r,targetY:o,sourceControlX:i,sourceControlY:a,targetControlX:s,targetControlY:l}=e;const c=.125*t+.375*i+.375*s+.125*r,u=.125*n+.375*a+.375*l+.125*o;return[c,u,Math.abs(c-t),Math.abs(u-n)]}var Cv,Nv,Tv,Iv,Av,Pv;function Ov(e){let{pos:t,x1:n,y1:r,x2:o,y2:i}=e;return t===Pv.Left||t===Pv.Right?[.5*(n+o),r]:[n,.5*(r+i)]}function Rv(e){let{sourceX:t,sourceY:n,sourcePosition:r=Pv.Bottom,targetX:o,targetY:i,targetPosition:a=Pv.Top}=e;const[s,l]=Ov({pos:r,x1:t,y1:n,x2:o,y2:i}),[c,u]=Ov({pos:a,x1:o,y1:i,x2:t,y2:n}),[d,h,f,p]=xv({sourceX:t,sourceY:n,targetX:o,targetY:i,sourceControlX:s,sourceControlY:l,targetControlX:c,targetControlY:u});return["M".concat(t,",").concat(n," C").concat(s,",").concat(l," ").concat(c,",").concat(u," ").concat(o,",").concat(i),d,h,f,p]}!function(e){e.Strict="strict",e.Loose="loose"}(Cv||(Cv={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(Nv||(Nv={})),function(e){e.Partial="partial",e.Full="full"}(Tv||(Tv={})),function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"}(Iv||(Iv={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(Av||(Av={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(Pv||(Pv={}));const Dv=(0,o.memo)(e=>{let{sourceX:t,sourceY:n,targetX:r,targetY:i,sourcePosition:a=Pv.Bottom,targetPosition:s=Pv.Top,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:f,style:p,markerEnd:g,markerStart:m,interactionWidth:v}=e;const[y,b,w]=Rv({sourceX:t,sourceY:n,sourcePosition:a,targetX:r,targetY:i,targetPosition:s});return o.createElement(Sv,{path:y,labelX:b,labelY:w,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:f,style:p,markerEnd:g,markerStart:m,interactionWidth:v})});Dv.displayName="SimpleBezierEdge";const Mv={[Pv.Left]:{x:-1,y:0},[Pv.Right]:{x:1,y:0},[Pv.Top]:{x:0,y:-1},[Pv.Bottom]:{x:0,y:1}},Lv=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function jv(e){let{source:t,sourcePosition:n=Pv.Bottom,target:r,targetPosition:o=Pv.Top,center:i,offset:a}=e;const s=Mv[n],l=Mv[o],c={x:t.x+s.x*a,y:t.y+s.y*a},u={x:r.x+l.x*a,y:r.y+l.y*a},d=(e=>{let{source:t,sourcePosition:n=Pv.Bottom,target:r}=e;return n===Pv.Left||n===Pv.Right?t.x<r.x?{x:1,y:0}:{x:-1,y:0}:t.y<r.y?{x:0,y:1}:{x:0,y:-1}})({source:c,sourcePosition:n,target:u}),h=0!==d.x?"x":"y",f=d[h];let p,g,m=[];const v={x:0,y:0},y={x:0,y:0},[b,w,E,S]=kv({sourceX:t.x,sourceY:t.y,targetX:r.x,targetY:r.y});if(s[h]*l[h]===-1){var _,k;p=null!==(_=i.x)&&void 0!==_?_:b,g=null!==(k=i.y)&&void 0!==k?k:w;const e=[{x:p,y:c.y},{x:p,y:u.y}],t=[{x:c.x,y:g},{x:u.x,y:g}];m=s[h]===f?"x"===h?e:t:"x"===h?t:e}else{const e=[{x:c.x,y:u.y}],i=[{x:u.x,y:c.y}];if(m="x"===h?s.x===f?i:e:s.y===f?e:i,n===o){const e=Math.abs(t[h]-r[h]);if(e<=a){const n=Math.min(a-1,a-e);s[h]===f?v[h]=(c[h]>t[h]?-1:1)*n:y[h]=(u[h]>r[h]?-1:1)*n}}if(n!==o){const t="x"===h?"y":"x",n=s[h]===l[t],r=c[t]>u[t],o=c[t]<u[t];(1===s[h]&&(!n&&r||n&&o)||1!==s[h]&&(!n&&o||n&&r))&&(m="x"===h?e:i)}const d={x:c.x+v.x,y:c.y+v.y},b={x:u.x+y.x,y:u.y+y.y};Math.max(Math.abs(d.x-m[0].x),Math.abs(b.x-m[0].x))>=Math.max(Math.abs(d.y-m[0].y),Math.abs(b.y-m[0].y))?(p=(d.x+b.x)/2,g=m[0].y):(p=m[0].x,g=(d.y+b.y)/2)}return[[t,{x:c.x+v.x,y:c.y+v.y},...m,{x:u.x+y.x,y:u.y+y.y},r],p,g,E,S]}function Uv(e){let{sourceX:t,sourceY:n,sourcePosition:r=Pv.Bottom,targetX:o,targetY:i,targetPosition:a=Pv.Top,borderRadius:s=5,centerX:l,centerY:c,offset:u=20}=e;const[d,h,f,p,g]=jv({source:{x:t,y:n},sourcePosition:r,target:{x:o,y:i},targetPosition:a,center:{x:l,y:c},offset:u}),m=d.reduce((e,t,n)=>{let r="";return r=n>0&&n<d.length-1?function(e,t,n,r){const o=Math.min(Lv(e,t)/2,Lv(t,n)/2,r),{x:i,y:a}=t;if(e.x===i&&i===n.x||e.y===a&&a===n.y)return"L".concat(i," ").concat(a);if(e.y===a){const t=e.x<n.x?-1:1,r=e.y<n.y?1:-1;return"L ".concat(i+o*t,",").concat(a,"Q ").concat(i,",").concat(a," ").concat(i,",").concat(a+o*r)}const s=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return"L ".concat(i,",").concat(a+o*l,"Q ").concat(i,",").concat(a," ").concat(i+o*s,",").concat(a)}(d[n-1],t,d[n+1],s):"".concat(0===n?"M":"L").concat(t.x," ").concat(t.y),e+=r},"");return[m,h,f,p,g]}const Fv=(0,o.memo)(e=>{let{sourceX:t,sourceY:n,targetX:r,targetY:i,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:h,sourcePosition:f=Pv.Bottom,targetPosition:p=Pv.Top,markerEnd:g,markerStart:m,pathOptions:v,interactionWidth:y}=e;const[b,w,E]=Uv({sourceX:t,sourceY:n,sourcePosition:f,targetX:r,targetY:i,targetPosition:p,borderRadius:null===v||void 0===v?void 0:v.borderRadius,offset:null===v||void 0===v?void 0:v.offset});return o.createElement(Sv,{path:b,labelX:w,labelY:E,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:h,markerEnd:g,markerStart:m,interactionWidth:y})});Fv.displayName="SmoothStepEdge";const zv=(0,o.memo)(e=>{var t;return o.createElement(Fv,Pt(Pt({},e),{},{pathOptions:(0,o.useMemo)(()=>{var t;return{borderRadius:0,offset:null===(t=e.pathOptions)||void 0===t?void 0:t.offset}},[null===(t=e.pathOptions)||void 0===t?void 0:t.offset])}))});zv.displayName="StepEdge";const Vv=(0,o.memo)(e=>{let{sourceX:t,sourceY:n,targetX:r,targetY:i,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:h,markerEnd:f,markerStart:p,interactionWidth:g}=e;const[m,v,y]=function(e){let{sourceX:t,sourceY:n,targetX:r,targetY:o}=e;const[i,a,s,l]=kv({sourceX:t,sourceY:n,targetX:r,targetY:o});return["M ".concat(t,",").concat(n,"L ").concat(r,",").concat(o),i,a,s,l]}({sourceX:t,sourceY:n,targetX:r,targetY:i});return o.createElement(Sv,{path:m,labelX:v,labelY:y,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:h,markerEnd:f,markerStart:p,interactionWidth:g})});function Bv(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function Hv(e){let{pos:t,x1:n,y1:r,x2:o,y2:i,c:a}=e;switch(t){case Pv.Left:return[n-Bv(n-o,a),r];case Pv.Right:return[n+Bv(o-n,a),r];case Pv.Top:return[n,r-Bv(r-i,a)];case Pv.Bottom:return[n,r+Bv(i-r,a)]}}function Kv(e){let{sourceX:t,sourceY:n,sourcePosition:r=Pv.Bottom,targetX:o,targetY:i,targetPosition:a=Pv.Top,curvature:s=.25}=e;const[l,c]=Hv({pos:r,x1:t,y1:n,x2:o,y2:i,c:s}),[u,d]=Hv({pos:a,x1:o,y1:i,x2:t,y2:n,c:s}),[h,f,p,g]=xv({sourceX:t,sourceY:n,targetX:o,targetY:i,sourceControlX:l,sourceControlY:c,targetControlX:u,targetControlY:d});return["M".concat(t,",").concat(n," C").concat(l,",").concat(c," ").concat(u,",").concat(d," ").concat(o,",").concat(i),h,f,p,g]}Vv.displayName="StraightEdge";const Wv=(0,o.memo)(e=>{let{sourceX:t,sourceY:n,targetX:r,targetY:i,sourcePosition:a=Pv.Bottom,targetPosition:s=Pv.Top,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:f,style:p,markerEnd:g,markerStart:m,pathOptions:v,interactionWidth:y}=e;const[b,w,E]=Kv({sourceX:t,sourceY:n,sourcePosition:a,targetX:r,targetY:i,targetPosition:s,curvature:null===v||void 0===v?void 0:v.curvature});return o.createElement(Sv,{path:b,labelX:w,labelY:E,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:f,style:p,markerEnd:g,markerStart:m,interactionWidth:y})});Wv.displayName="BezierEdge";const qv=(0,o.createContext)(null),Gv=qv.Provider;qv.Consumer;const Xv=e=>{let{source:t,sourceHandle:n,target:r,targetHandle:o}=e;return"reactflow__edge-".concat(t).concat(n||"","-").concat(r).concat(o||"")},Yv=(e,t)=>{if("undefined"===typeof e)return"";if("string"===typeof e)return e;const n=t?"".concat(t,"__"):"";return"".concat(n).concat(Object.keys(e).sort().map(t=>"".concat(t,"=").concat(e[t])).join("&"))},Qv=(e,t,n,r)=>{let{x:o,y:i}=e,[a,s,l]=t,[c,u]=r;const d={x:(o-a)/l,y:(i-s)/l};return n?{x:c*Math.round(d.x/c),y:u*Math.round(d.y/u)}:d},$v=(e,t)=>{let{x:n,y:r}=e,[o,i,a]=t;return{x:n*a+o,y:r*a+i}},Jv=function(e){var t,n;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const o=(null!==(t=e.width)&&void 0!==t?t:0)*r[0],i=(null!==(n=e.height)&&void 0!==n?n:0)*r[1],a={x:e.position.x-o,y:e.position.y-i};return Pt(Pt({},a),{},{positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-o,y:e.positionAbsolute.y-i}:a})},Zv=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];if(0===e.length)return{x:0,y:0,width:0,height:0};const n=e.reduce((e,n)=>{const{x:r,y:o}=Jv(n,t).positionAbsolute;return cv(e,uv({x:r,y:o,width:n.width||0,height:n.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return dv(n)},ey=function(e,t){let[n,r,o]=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,1],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[0,0];const l={x:(t.x-n)/o,y:(t.y-r)/o,width:t.width/o,height:t.height/o},c=[];return e.forEach(e=>{const{width:t,height:n,selectable:r=!0,hidden:o=!1}=e;if(a&&!r||o)return!1;const{positionAbsolute:u}=Jv(e,s),d={x:u.x,y:u.y,width:t||0,height:n||0},h=fv(l,d);("undefined"===typeof t||"undefined"===typeof n||null===t||null===n||i&&h>0||h>=(t||0)*(n||0)||e.dragging)&&c.push(e)}),c},ty=(e,t)=>{const n=e.map(e=>e.id);return t.filter(e=>n.includes(e.source)||n.includes(e.target))},ny=function(e,t,n,r,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.1;const a=t/(e.width*(1+i)),s=n/(e.height*(1+i)),l=Math.min(a,s),c=ov(l,r,o);return{x:t/2-(e.x+e.width/2)*c,y:n/2-(e.y+e.height/2)*c,zoom:c}},ry=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.transition().duration(t)};function oy(e,t,n,r){return(t[n]||[]).reduce((t,o)=>{var i,a,s,l;"".concat(e.id,"-").concat(o.id,"-").concat(n)!==r&&t.push({id:o.id||null,type:n,nodeId:e.id,x:(null!==(i=null===(a=e.positionAbsolute)||void 0===a?void 0:a.x)&&void 0!==i?i:0)+o.x+o.width/2,y:(null!==(s=null===(l=e.positionAbsolute)||void 0===l?void 0:l.y)&&void 0!==s?s:0)+o.y+o.height/2});return t},[])}const iy={source:null,target:null,sourceHandle:null,targetHandle:null},ay=()=>({handleDomNode:null,isValid:!1,connection:iy,endHandle:null});function sy(e,t,n,r,o,i,a){const s="target"===o,l=a.querySelector('.react-flow__handle[data-id="'.concat(null===e||void 0===e?void 0:e.nodeId,"-").concat(null===e||void 0===e?void 0:e.id,"-").concat(null===e||void 0===e?void 0:e.type,'"]')),c=Pt(Pt({},ay()),{},{handleDomNode:l});if(l){const e=ly(void 0,l),o=l.getAttribute("data-nodeid"),a=l.getAttribute("data-handleid"),u=l.classList.contains("connectable"),d=l.classList.contains("connectableend"),h={source:s?o:n,sourceHandle:s?a:r,target:s?n:o,targetHandle:s?r:a};c.connection=h;u&&d&&(t===Cv.Strict?s&&"source"===e||!s&&"target"===e:o!==n||a!==r)&&(c.endHandle={nodeId:o,handleId:a,type:e},c.isValid=i(h))}return c}function ly(e,t){return e||(null!==t&&void 0!==t&&t.classList.contains("target")?"target":null!==t&&void 0!==t&&t.classList.contains("source")?"source":null)}function cy(e){null===e||void 0===e||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function uy(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function dy(e){let{event:t,handleId:n,nodeId:r,onConnect:o,isTarget:i,getState:a,setState:s,isValidConnection:l,edgeUpdaterType:c,onReconnectEnd:u}=e;const d=lv(t.target),{connectionMode:h,domNode:f,autoPanOnConnect:p,connectionRadius:g,onConnectStart:m,panBy:v,getNodes:y,cancelConnection:b}=a();let w,E=0;const{x:S,y:_}=wv(t),k=null===d||void 0===d?void 0:d.elementFromPoint(S,_),x=ly(c,k),C=null===f||void 0===f?void 0:f.getBoundingClientRect();if(!C||!x)return;let N,T=wv(t,C),I=!1,A=null,P=!1,O=null;const R=function(e){let{nodes:t,nodeId:n,handleId:r,handleType:o}=e;return t.reduce((e,t)=>{if(t[gv]){const{handleBounds:i}=t[gv];let a=[],s=[];i&&(a=oy(t,i,"source","".concat(n,"-").concat(r,"-").concat(o)),s=oy(t,i,"target","".concat(n,"-").concat(r,"-").concat(o))),e.push(...a,...s)}return e},[])}({nodes:y(),nodeId:r,handleId:n,handleType:x}),D=()=>{if(!p)return;const[e,t]=sv(T,C);v({x:e,y:t}),E=requestAnimationFrame(D)};function M(e){const{transform:t}=a();T=wv(e,C);const{handle:o,validHandleResult:c}=function(e,t,n,r,o,i){const{x:a,y:s}=wv(e),l=t.elementsFromPoint(a,s).find(e=>e.classList.contains("react-flow__handle"));if(l){const e=l.getAttribute("data-nodeid");if(e){const t=ly(void 0,l),r=l.getAttribute("data-handleid"),a=i({nodeId:e,id:r,type:t});if(a){const i=o.find(n=>n.nodeId===e&&n.type===t&&n.id===r);return{handle:{id:r,type:t,nodeId:e,x:(null===i||void 0===i?void 0:i.x)||n.x,y:(null===i||void 0===i?void 0:i.y)||n.y},validHandleResult:a}}}}let c=[],u=1/0;if(o.forEach(e=>{const t=Math.sqrt((e.x-n.x)**2+(e.y-n.y)**2);if(t<=r){const n=i(e);t<=u&&(t<u?c=[{handle:e,validHandleResult:n}]:t===u&&c.push({handle:e,validHandleResult:n}),u=t)}}),!c.length)return{handle:null,validHandleResult:ay()};if(1===c.length)return c[0];const d=c.some(e=>{let{validHandleResult:t}=e;return t.isValid}),h=c.some(e=>{let{handle:t}=e;return"target"===t.type});return c.find(e=>{let{handle:t,validHandleResult:n}=e;return h?"target"===t.type:!d||n.isValid})||c[0]}(e,d,Qv(T,t,!1,[1,1]),g,R,e=>sy(e,h,r,n,i?"target":"source",l,d));if(w=o,I||(D(),I=!0),O=c.handleDomNode,A=c.connection,P=c.isValid,s({connectionPosition:w&&P?$v({x:w.x,y:w.y},t):T,connectionStatus:uy(!!w,P),connectionEndHandle:c.endHandle}),!w&&!P&&!O)return cy(N);A.source!==A.target&&O&&(cy(N),N=O,O.classList.add("connecting","react-flow__handle-connecting"),O.classList.toggle("valid",P),O.classList.toggle("react-flow__handle-valid",P))}function L(e){var t,n;(w||O)&&A&&P&&(null===o||void 0===o||o(A)),null===(t=(n=a()).onConnectEnd)||void 0===t||t.call(n,e),c&&(null===u||void 0===u||u(e)),cy(N),b(),cancelAnimationFrame(E),I=!1,P=!1,A=null,O=null,d.removeEventListener("mousemove",M),d.removeEventListener("mouseup",L),d.removeEventListener("touchmove",M),d.removeEventListener("touchend",L)}s({connectionPosition:T,connectionStatus:null,connectionNodeId:r,connectionHandleId:n,connectionHandleType:x,connectionStartHandle:{nodeId:r,handleId:n,type:x},connectionEndHandle:null}),null===m||void 0===m||m(t,{nodeId:r,handleId:n,handleType:x}),d.addEventListener("mousemove",M),d.addEventListener("mouseup",L),d.addEventListener("touchmove",M),d.addEventListener("touchend",L)}const hy=()=>!0,fy=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),py=(0,o.forwardRef)((e,t)=>{let{type:n="source",position:r=Pv.Top,isValidConnection:i,isConnectable:a=!0,isConnectableStart:s=!0,isConnectableEnd:l=!0,id:c,onConnect:u,children:d,className:h,onMouseDown:f,onTouchStart:p}=e,g=Hd(e,jm);const m=c||null,v="target"===n,y=Jm(),b=(0,o.useContext)(qv),{connectOnClick:w,noPanClassName:E}=$m(fy,Gh),{connecting:S,clickConnecting:_}=$m(((e,t,n)=>r=>{const{connectionStartHandle:o,connectionEndHandle:i,connectionClickStartHandle:a}=r;return{connecting:(null===o||void 0===o?void 0:o.nodeId)===e&&(null===o||void 0===o?void 0:o.handleId)===t&&(null===o||void 0===o?void 0:o.type)===n||(null===i||void 0===i?void 0:i.nodeId)===e&&(null===i||void 0===i?void 0:i.handleId)===t&&(null===i||void 0===i?void 0:i.type)===n,clickConnecting:(null===a||void 0===a?void 0:a.nodeId)===e&&(null===a||void 0===a?void 0:a.handleId)===t&&(null===a||void 0===a?void 0:a.type)===n}})(b,m,n),Gh);var k,x;b||(null===(k=(x=y.getState()).onError)||void 0===k||k.call(x,"010",Gm()));const C=e=>{const{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:r}=y.getState(),o=Pt(Pt({},t),e);if(r){const{edges:e,setEdges:t}=y.getState();t(((e,t)=>{if(!e.source||!e.target)return vv(0,Km()),t;let n;var r;return n="id"in(r=e)&&"source"in r&&"target"in r?Pt({},e):Pt(Pt({},e),{},{id:Xv(e)}),((e,t)=>t.some(t=>t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle)))(n,t)?t:t.concat(n)})(o,e))}null===n||void 0===n||n(o),null===u||void 0===u||u(o)},N=e=>{if(!b)return;const t=bv(e);s&&(t&&0===e.button||!t)&&dy({event:e,handleId:m,nodeId:b,onConnect:C,isTarget:v,getState:y.getState,setState:y.setState,isValidConnection:i||y.getState().isValidConnection||hy}),t?null===f||void 0===f||f(e):null===p||void 0===p||p(e)};return o.createElement("div",Pt({"data-handleid":m,"data-nodeid":b,"data-handlepos":r,"data-id":"".concat(b,"-").concat(m,"-").concat(n),className:Uh(["react-flow__handle","react-flow__handle-".concat(r),"nodrag",E,h,{source:!v,target:v,connectable:a,connectablestart:s,connectableend:l,connecting:_,connectionindicator:a&&(s&&!S||l&&S)}]),onMouseDown:N,onTouchStart:N,onClick:w?e=>{const{onClickConnectStart:t,onClickConnectEnd:r,connectionClickStartHandle:o,connectionMode:a,isValidConnection:l}=y.getState();if(!b||!o&&!s)return;if(!o)return null===t||void 0===t||t(e,{nodeId:b,handleId:m,handleType:n}),void y.setState({connectionClickStartHandle:{nodeId:b,type:n,handleId:m}});const c=lv(e.target),u=i||l||hy,{connection:d,isValid:h}=sy({nodeId:b,id:m,type:n},a,o.nodeId,o.handleId||null,o.type,u,c);h&&C(d),null===r||void 0===r||r(e),y.setState({connectionClickStartHandle:null})}:void 0,ref:t},g),d)});py.displayName="Handle";var gy=(0,o.memo)(py);const my=e=>{let{data:t,isConnectable:n,targetPosition:r=Pv.Top,sourcePosition:i=Pv.Bottom}=e;return o.createElement(o.Fragment,null,o.createElement(gy,{type:"target",position:r,isConnectable:n}),null===t||void 0===t?void 0:t.label,o.createElement(gy,{type:"source",position:i,isConnectable:n}))};my.displayName="DefaultNode";var vy=(0,o.memo)(my);const yy=e=>{let{data:t,isConnectable:n,sourcePosition:r=Pv.Bottom}=e;return o.createElement(o.Fragment,null,null===t||void 0===t?void 0:t.label,o.createElement(gy,{type:"source",position:r,isConnectable:n}))};yy.displayName="InputNode";var by=(0,o.memo)(yy);const wy=e=>{let{data:t,isConnectable:n,targetPosition:r=Pv.Top}=e;return o.createElement(o.Fragment,null,o.createElement(gy,{type:"target",position:r,isConnectable:n}),null===t||void 0===t?void 0:t.label)};wy.displayName="OutputNode";var Ey=(0,o.memo)(wy);const Sy=()=>null;Sy.displayName="GroupNode";const _y=e=>({selectedNodes:e.getNodes().filter(e=>e.selected),selectedEdges:e.edges.filter(e=>e.selected).map(e=>Pt({},e))}),ky=e=>e.id;function xy(e,t){return Gh(e.selectedNodes.map(ky),t.selectedNodes.map(ky))&&Gh(e.selectedEdges.map(ky),t.selectedEdges.map(ky))}const Cy=(0,o.memo)(e=>{let{onSelectionChange:t}=e;const n=Jm(),{selectedNodes:r,selectedEdges:i}=$m(_y,xy);return(0,o.useEffect)(()=>{const e={nodes:r,edges:i};null===t||void 0===t||t(e),n.getState().onSelectionChange.forEach(t=>t(e))},[r,i,t]),null});Cy.displayName="SelectionListener";const Ny=e=>!!e.onSelectionChange;function Ty(e){let{onSelectionChange:t}=e;const n=$m(Ny);return t||n?o.createElement(Cy,{onSelectionChange:t}):null}const Iy=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Ay(e,t){(0,o.useEffect)(()=>{"undefined"!==typeof e&&t(e)},[e])}function Py(e,t,n){(0,o.useEffect)(()=>{"undefined"!==typeof t&&n({[e]:t})},[t])}const Oy=e=>{let{nodes:t,edges:n,defaultNodes:r,defaultEdges:i,onConnect:a,onConnectStart:s,onConnectEnd:l,onClickConnectStart:c,onClickConnectEnd:u,nodesDraggable:d,nodesConnectable:h,nodesFocusable:f,edgesFocusable:p,edgesUpdatable:g,elevateNodesOnSelect:m,minZoom:v,maxZoom:y,nodeExtent:b,onNodesChange:w,onEdgesChange:E,elementsSelectable:S,connectionMode:_,snapGrid:k,snapToGrid:x,translateExtent:C,connectOnClick:N,defaultEdgeOptions:T,fitView:I,fitViewOptions:A,onNodesDelete:P,onEdgesDelete:O,onNodeDrag:R,onNodeDragStart:D,onNodeDragStop:M,onSelectionDrag:L,onSelectionDragStart:j,onSelectionDragStop:U,noPanClassName:F,nodeOrigin:z,rfId:V,autoPanOnConnect:B,autoPanOnNodeDrag:H,onError:K,connectionRadius:W,isValidConnection:q,nodeDragThreshold:G}=e;const{setNodes:X,setEdges:Y,setDefaultNodesAndEdges:Q,setMinZoom:$,setMaxZoom:J,setTranslateExtent:Z,setNodeExtent:ee,reset:te}=$m(Iy,Gh),ne=Jm();return(0,o.useEffect)(()=>{const e=null===i||void 0===i?void 0:i.map(e=>Pt(Pt({},e),T));return Q(r,e),()=>{te()}},[]),Py("defaultEdgeOptions",T,ne.setState),Py("connectionMode",_,ne.setState),Py("onConnect",a,ne.setState),Py("onConnectStart",s,ne.setState),Py("onConnectEnd",l,ne.setState),Py("onClickConnectStart",c,ne.setState),Py("onClickConnectEnd",u,ne.setState),Py("nodesDraggable",d,ne.setState),Py("nodesConnectable",h,ne.setState),Py("nodesFocusable",f,ne.setState),Py("edgesFocusable",p,ne.setState),Py("edgesUpdatable",g,ne.setState),Py("elementsSelectable",S,ne.setState),Py("elevateNodesOnSelect",m,ne.setState),Py("snapToGrid",x,ne.setState),Py("snapGrid",k,ne.setState),Py("onNodesChange",w,ne.setState),Py("onEdgesChange",E,ne.setState),Py("connectOnClick",N,ne.setState),Py("fitViewOnInit",I,ne.setState),Py("fitViewOnInitOptions",A,ne.setState),Py("onNodesDelete",P,ne.setState),Py("onEdgesDelete",O,ne.setState),Py("onNodeDrag",R,ne.setState),Py("onNodeDragStart",D,ne.setState),Py("onNodeDragStop",M,ne.setState),Py("onSelectionDrag",L,ne.setState),Py("onSelectionDragStart",j,ne.setState),Py("onSelectionDragStop",U,ne.setState),Py("noPanClassName",F,ne.setState),Py("nodeOrigin",z,ne.setState),Py("rfId",V,ne.setState),Py("autoPanOnConnect",B,ne.setState),Py("autoPanOnNodeDrag",H,ne.setState),Py("onError",K,ne.setState),Py("connectionRadius",W,ne.setState),Py("isValidConnection",q,ne.setState),Py("nodeDragThreshold",G,ne.setState),Ay(t,X),Ay(n,Y),Ay(v,$),Ay(y,J),Ay(C,Z),Ay(b,ee),null},Ry={display:"none"},Dy={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},My="react-flow__node-desc",Ly="react-flow__edge-desc",jy=e=>e.ariaLiveMessage;function Uy(e){let{rfId:t}=e;const n=$m(jy);return o.createElement("div",{id:"".concat("react-flow__aria-live","-").concat(t),"aria-live":"assertive","aria-atomic":"true",style:Dy},n)}function Fy(e){let{rfId:t,disableKeyboardA11y:n}=e;return o.createElement(o.Fragment,null,o.createElement("div",{id:"".concat(My,"-").concat(t),style:Ry},"Press enter or space to select a node.",!n&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),o.createElement("div",{id:"".concat(Ly,"-").concat(t),style:Ry},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!n&&o.createElement(Uy,{rfId:t}))}var zy=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{actInsideInputWithModifier:!0};const[n,r]=(0,o.useState)(!1),i=(0,o.useRef)(!1),a=(0,o.useRef)(new Set([])),[s,l]=(0,o.useMemo)(()=>{if(null!==e){const t=(Array.isArray(e)?e:[e]).filter(e=>"string"===typeof e).map(e=>e.split("+")),n=t.reduce((e,t)=>e.concat(...t),[]);return[t,n]}return[[],[]]},[e]);return(0,o.useEffect)(()=>{const n="undefined"!==typeof document?document:null,o=(null===t||void 0===t?void 0:t.target)||n;if(null!==e){const e=e=>{i.current=e.ctrlKey||e.metaKey||e.shiftKey;if((!i.current||i.current&&!t.actInsideInputWithModifier)&&yv(e))return!1;const n=By(e.code,l);a.current.add(e[n]),Vy(s,a.current,!1)&&(e.preventDefault(),r(!0))},n=e=>{if((!i.current||i.current&&!t.actInsideInputWithModifier)&&yv(e))return!1;const n=By(e.code,l);Vy(s,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(e[n]),"Meta"===e.key&&a.current.clear(),i.current=!1},c=()=>{a.current.clear(),r(!1)};return null===o||void 0===o||o.addEventListener("keydown",e),null===o||void 0===o||o.addEventListener("keyup",n),window.addEventListener("blur",c),()=>{null===o||void 0===o||o.removeEventListener("keydown",e),null===o||void 0===o||o.removeEventListener("keyup",n),window.removeEventListener("blur",c)}}},[e,r]),n};function Vy(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function By(e,t){return t.includes(e)?"code":"key"}function Hy(e,t,n,r){var o,i,a,s,l,c,u,d;const h=e.parentNode||e.parentId;if(!h)return n;const f=t.get(h),p=Jv(f,r);return Hy(f,t,{x:(null!==(o=n.x)&&void 0!==o?o:0)+p.x,y:(null!==(i=n.y)&&void 0!==i?i:0)+p.y,z:(null!==(a=null===(s=f[gv])||void 0===s?void 0:s.z)&&void 0!==a?a:0)>(null!==(l=n.z)&&void 0!==l?l:0)?null!==(c=null===(u=f[gv])||void 0===u?void 0:u.z)&&void 0!==c?c:0:null!==(d=n.z)&&void 0!==d?d:0},r)}function Ky(e,t,n){e.forEach(r=>{const o=r.parentNode||r.parentId;if(o&&!e.has(o))throw new Error("Parent node ".concat(o," not found"));if(o||null!==n&&void 0!==n&&n[r.id]){var i,a;const{x:o,y:s,z:l}=Hy(r,e,Pt(Pt({},r.position),{},{z:null!==(i=null===(a=r[gv])||void 0===a?void 0:a.z)&&void 0!==i?i:0}),t);r.positionAbsolute={x:o,y:s},r[gv].z=l,null!==n&&void 0!==n&&n[r.id]&&(r[gv].isParent=!0)}})}function Wy(e,t,n,r){const o=new Map,i={},a=r?1e3:0;return e.forEach(e=>{var n;const r=(pv(e.zIndex)?e.zIndex:0)+(e.selected?a:0),s=t.get(e.id),l=Pt(Pt({},e),{},{positionAbsolute:{x:e.position.x,y:e.position.y}}),c=e.parentNode||e.parentId;c&&(i[c]=!0);const u=(null===s||void 0===s?void 0:s.type)&&(null===s||void 0===s?void 0:s.type)!==e.type;Object.defineProperty(l,gv,{enumerable:!1,value:{handleBounds:u||null===s||void 0===s||null===(n=s[gv])||void 0===n?void 0:n.handleBounds,z:r}}),o.set(e.id,l)}),Ky(o,n,i),o}function qy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{getNodes:n,width:r,height:o,minZoom:i,maxZoom:a,d3Zoom:s,d3Selection:l,fitViewOnInitDone:c,fitViewOnInit:u,nodeOrigin:d}=e(),h=t.initial&&!c&&u;if(s&&l&&(h||!t.initial)){const e=n().filter(e=>{var n;const r=t.includeHiddenNodes?e.width&&e.height:!e.hidden;return null!==(n=t.nodes)&&void 0!==n&&n.length?r&&t.nodes.some(t=>t.id===e.id):r}),c=e.every(e=>e.width&&e.height);if(e.length>0&&c){var f,p,g;const n=Zv(e,d),{x:c,y:u,zoom:h}=ny(n,r,o,null!==(f=t.minZoom)&&void 0!==f?f:i,null!==(p=t.maxZoom)&&void 0!==p?p:a,null!==(g=t.padding)&&void 0!==g?g:.1),m=wm.translate(c,u).scale(h);return"number"===typeof t.duration&&t.duration>0?s.transform(ry(l,t.duration),m):s.transform(l,m),!0}}return!1}function Gy(e,t){return e.forEach(e=>{const n=t.get(e.id);n&&t.set(n.id,Pt(Pt({},n),{},{[gv]:n[gv],selected:e.selected}))}),new Map(t)}function Xy(e,t){return t.map(t=>{const n=e.find(e=>e.id===t.id);return n&&(t.selected=n.selected),t})}function Yy(e){let{changedNodes:t,changedEdges:n,get:r,set:o}=e;const{nodeInternals:i,edges:a,onNodesChange:s,onEdgesChange:l,hasDefaultNodes:c,hasDefaultEdges:u}=r();null!==t&&void 0!==t&&t.length&&(c&&o({nodeInternals:Gy(t,i)}),null===s||void 0===s||s(t)),null!==n&&void 0!==n&&n.length&&(u&&o({edges:Xy(n,a)}),null===l||void 0===l||l(n))}const Qy=()=>{},$y={zoomIn:Qy,zoomOut:Qy,zoomTo:Qy,getZoom:()=>1,setViewport:Qy,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Qy,fitBounds:Qy,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Jy=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection});function Zy(){const e=(()=>{const e=Jm(),{d3Zoom:t,d3Selection:n}=$m(Jy,Gh),r=(0,o.useMemo)(()=>n&&t?{zoomIn:e=>t.scaleBy(ry(n,null===e||void 0===e?void 0:e.duration),1.2),zoomOut:e=>t.scaleBy(ry(n,null===e||void 0===e?void 0:e.duration),1/1.2),zoomTo:(e,r)=>t.scaleTo(ry(n,null===r||void 0===r?void 0:r.duration),e),getZoom:()=>e.getState().transform[2],setViewport:(r,o)=>{var i,a,s;const[l,c,u]=e.getState().transform,d=wm.translate(null!==(i=r.x)&&void 0!==i?i:l,null!==(a=r.y)&&void 0!==a?a:c).scale(null!==(s=r.zoom)&&void 0!==s?s:u);t.transform(ry(n,null===o||void 0===o?void 0:o.duration),d)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>qy(e.getState,t),setCenter:(r,o,i)=>{const{width:a,height:s,maxZoom:l}=e.getState(),c="undefined"!==typeof(null===i||void 0===i?void 0:i.zoom)?i.zoom:l,u=a/2-r*c,d=s/2-o*c,h=wm.translate(u,d).scale(c);t.transform(ry(n,null===i||void 0===i?void 0:i.duration),h)},fitBounds:(r,o)=>{var i;const{width:a,height:s,minZoom:l,maxZoom:c}=e.getState(),{x:u,y:d,zoom:h}=ny(r,a,s,l,c,null!==(i=null===o||void 0===o?void 0:o.padding)&&void 0!==i?i:.1),f=wm.translate(u,d).scale(h);t.transform(ry(n,null===o||void 0===o?void 0:o.duration),f)},project:t=>{const{transform:n,snapToGrid:r,snapGrid:o}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Qv(t,n,r,o)},screenToFlowPosition:t=>{const{transform:n,snapToGrid:r,snapGrid:o,domNode:i}=e.getState();if(!i)return t;const{x:a,y:s}=i.getBoundingClientRect(),l={x:t.x-a,y:t.y-s};return Qv(l,n,r,o)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:o,y:i}=r.getBoundingClientRect(),a=$v(t,n);return{x:a.x+o,y:a.y+i}},viewportInitialized:!0}:$y,[t,n]);return r})(),t=Jm(),n=(0,o.useCallback)(()=>t.getState().getNodes().map(e=>Pt({},e)),[]),r=(0,o.useCallback)(e=>t.getState().nodeInternals.get(e),[]),i=(0,o.useCallback)(()=>{const{edges:e=[]}=t.getState();return e.map(e=>Pt({},e))},[]),a=(0,o.useCallback)(e=>{const{edges:n=[]}=t.getState();return n.find(t=>t.id===e)},[]),s=(0,o.useCallback)(e=>{const{getNodes:n,setNodes:r,hasDefaultNodes:o,onNodesChange:i}=t.getState(),a=n(),s="function"===typeof e?e(a):e;if(o)r(s);else if(i){const e=0===s.length?a.map(e=>({type:"remove",id:e.id})):s.map(e=>({item:e,type:"reset"}));i(e)}},[]),l=(0,o.useCallback)(e=>{const{edges:n=[],setEdges:r,hasDefaultEdges:o,onEdgesChange:i}=t.getState(),a="function"===typeof e?e(n):e;if(o)r(a);else if(i){i(0===a.length?n.map(e=>({type:"remove",id:e.id})):a.map(e=>({item:e,type:"reset"})))}},[]),c=(0,o.useCallback)(e=>{const n=Array.isArray(e)?e:[e],{getNodes:r,setNodes:o,hasDefaultNodes:i,onNodesChange:a}=t.getState();if(i){o([...r(),...n])}else if(a){const e=n.map(e=>({item:e,type:"add"}));a(e)}},[]),u=(0,o.useCallback)(e=>{const n=Array.isArray(e)?e:[e],{edges:r=[],setEdges:o,hasDefaultEdges:i,onEdgesChange:a}=t.getState();if(i)o([...r,...n]);else if(a){a(n.map(e=>({item:e,type:"add"})))}},[]),d=(0,o.useCallback)(()=>{const{getNodes:e,edges:n=[],transform:r}=t.getState(),[o,i,a]=r;return{nodes:e().map(e=>Pt({},e)),edges:n.map(e=>Pt({},e)),viewport:{x:o,y:i,zoom:a}}},[]),h=(0,o.useCallback)(e=>{let{nodes:n,edges:r}=e;const{nodeInternals:o,getNodes:i,edges:a,hasDefaultNodes:s,hasDefaultEdges:l,onNodesDelete:c,onEdgesDelete:u,onNodesChange:d,onEdgesChange:h}=t.getState(),f=(n||[]).map(e=>e.id),p=(r||[]).map(e=>e.id),g=i().reduce((e,t)=>{const n=t.parentNode||t.parentId,r=!f.includes(t.id)&&n&&e.find(e=>e.id===n);return("boolean"!==typeof t.deletable||t.deletable)&&(f.includes(t.id)||r)&&e.push(t),e},[]),m=a.filter(e=>"boolean"!==typeof e.deletable||e.deletable),v=m.filter(e=>p.includes(e.id));if(g||v){const e=ty(g,m),n=[...v,...e],r=n.reduce((e,t)=>(e.includes(t.id)||e.push(t.id),e),[]);if((l||s)&&(l&&t.setState({edges:a.filter(e=>!r.includes(e.id))}),s&&(g.forEach(e=>{o.delete(e.id)}),t.setState({nodeInternals:new Map(o)}))),r.length>0&&(null===u||void 0===u||u(n),h&&h(r.map(e=>({id:e,type:"remove"})))),g.length>0&&(null===c||void 0===c||c(g),d)){d(g.map(e=>({id:e.id,type:"remove"})))}}},[]),f=(0,o.useCallback)(e=>{const n=pv((r=e).width)&&pv(r.height)&&pv(r.x)&&pv(r.y);var r;const o=n?null:t.getState().nodeInternals.get(e.id);if(!n&&!o)return[null,null,n];return[n?e:hv(o),o,n]},[]),p=(0,o.useCallback)(function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0;const[o,i,a]=f(e);return o?(r||t.getState().getNodes()).filter(e=>{if(!a&&(e.id===i.id||!e.positionAbsolute))return!1;const t=hv(e),r=fv(t,o);return n&&r>0||r>=o.width*o.height}):[]},[]),g=(0,o.useCallback)(function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const[r]=f(e);if(!r)return!1;const o=fv(r,t);return n&&o>0||o>=r.width*r.height},[]);return(0,o.useMemo)(()=>Pt(Pt({},e),{},{getNodes:n,getNode:r,getEdges:i,getEdge:a,setNodes:s,setEdges:l,addNodes:c,addEdges:u,toObject:d,deleteElements:h,getIntersectingNodes:p,isNodeIntersecting:g}),[e,n,r,i,a,s,l,c,u,d,h,p,g])}const eb={actInsideInputWithModifier:!1};const tb={position:"absolute",width:"100%",height:"100%",top:0,left:0},nb=e=>({x:e.x,y:e.y,zoom:e.k}),rb=(e,t)=>e.target.closest(".".concat(t)),ob=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),ib=e=>{const t=e.ctrlKey&&Ev()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t},ab=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),sb=e=>{let{onMove:t,onMoveStart:n,onMoveEnd:r,onPaneContextMenu:i,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:l=!1,panOnScrollSpeed:c=.5,panOnScrollMode:u=Nv.Free,zoomOnDoubleClick:d=!0,elementsSelectable:h,panOnDrag:f=!0,defaultViewport:p,translateExtent:g,minZoom:m,maxZoom:v,zoomActivationKeyCode:y,preventScrolling:b=!0,children:w,noWheelClassName:E,noPanClassName:S}=e;const _=(0,o.useRef)(),k=Jm(),x=(0,o.useRef)(!1),C=(0,o.useRef)(!1),N=(0,o.useRef)(null),T=(0,o.useRef)({x:0,y:0,zoom:0}),{d3Zoom:I,d3Selection:A,d3ZoomHandler:P,userSelectionActive:O}=$m(ab,Gh),R=zy(y),D=(0,o.useRef)(0),M=(0,o.useRef)(!1),L=(0,o.useRef)();return function(e){const t=Jm();(0,o.useEffect)(()=>{let n;const r=()=>{if(!e.current)return;const n=rv(e.current);var r,o;0!==n.height&&0!==n.width||null===(r=(o=t.getState()).onError)||void 0===r||r.call(o,"004",Bm()),t.setState({width:n.width||500,height:n.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}(N),(0,o.useEffect)(()=>{if(N.current){const e=N.current.getBoundingClientRect(),t=function(){var e,t,n,r=_m,o=km,i=Tm,a=Cm,s=Nm,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,d=Sp,h=Zh("start","zoom","end"),f=0,p=10;function g(e){e.property("__zoom",xm).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",_).on("dblclick.zoom",k).filter(s).on("touchstart.zoom",x).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",N).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new bm(t,e.x,e.y)}function v(e,t,n){var r=t[0]-n[0]*e.k,o=t[1]-n[1]*e.k;return r===e.x&&o===e.y?e:new bm(e.k,r,o)}function y(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function b(e,t,n,r){e.on("start.zoom",function(){w(this,arguments).event(r).start()}).on("interrupt.zoom end.zoom",function(){w(this,arguments).event(r).end()}).tween("zoom",function(){var e=this,i=arguments,a=w(e,i).event(r),s=o.apply(e,i),l=null==n?y(s):"function"===typeof n?n.apply(e,i):n,c=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),u=e.__zoom,h="function"===typeof t?t.apply(e,i):t,f=d(u.invert(l).concat(c/u.k),h.invert(l).concat(c/h.k));return function(e){if(1===e)e=h;else{var t=f(e),n=c/t[2];e=new bm(n,l[0]-t[0]*n,l[1]-t[1]*n)}a.zoom(null,e)}})}function w(e,t,n){return!n&&e.__zooming||new E(e,t)}function E(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=o.apply(e,t),this.taps=0}function S(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(r.apply(this,arguments)){var s=w(this,n).event(e),u=this.__zoom,d=Math.max(l[0],Math.min(l[1],u.k*Math.pow(2,a.apply(this,arguments)))),h=_p(e);if(s.wheel)s.mouse[0][0]===h[0]&&s.mouse[0][1]===h[1]||(s.mouse[1]=u.invert(s.mouse[0]=h)),clearTimeout(s.wheel);else{if(u.k===d)return;s.mouse=[h,u.invert(h)],Xp(this),s.start()}Sm(e),s.wheel=setTimeout(function(){s.wheel=null,s.end()},150),s.zoom("mouse",i(v(m(u,d),s.mouse[0],s.mouse[1]),s.extent,c))}}function _(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),a=1;a<t;a++)o[a-1]=arguments[a];if(!n&&r.apply(this,arguments)){var s=e.currentTarget,l=w(this,o,!0).event(e),u=pp(e.view).on("mousemove.zoom",function(e){if(Sm(e),!l.moved){var t=e.clientX-h,n=e.clientY-p;l.moved=t*t+n*n>f}l.event(e).zoom("mouse",i(v(l.that.__zoom,l.mouse[0]=_p(e,s),l.mouse[1]),l.extent,c))},!0).on("mouseup.zoom",function(e){u.on("mousemove.zoom mouseup.zoom",null),wp(e.view,l.moved),Sm(e),l.event(e).end()},!0),d=_p(e,s),h=e.clientX,p=e.clientY;bp(e.view),Em(e),l.mouse=[d,this.__zoom.invert(d)],Xp(this),l.start()}}function k(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(r.apply(this,arguments)){var s=this.__zoom,l=_p(e.changedTouches?e.changedTouches[0]:e,this),d=s.invert(l),h=s.k*(e.shiftKey?.5:2),f=i(v(m(s,h),l,d),o.apply(this,n),c);Sm(e),u>0?pp(this).transition().duration(u).call(b,f,l,e):pp(this).call(g.transform,f,l,e)}}function x(n){for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];if(r.apply(this,arguments)){var s,l,c,u,d=n.touches,h=d.length,f=w(this,i,n.changedTouches.length===h).event(n);for(Em(n),l=0;l<h;++l)u=[u=_p(c=d[l],this),this.__zoom.invert(u),c.identifier],f.touch0?f.touch1||f.touch0[2]===u[2]||(f.touch1=u,f.taps=0):(f.touch0=u,s=!0,f.taps=1+!!e);e&&(e=clearTimeout(e)),s&&(f.taps<2&&(t=u[0],e=setTimeout(function(){e=null},500)),Xp(this),f.start())}}function C(e){if(this.__zooming){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o,a,s,l,u=w(this,n).event(e),d=e.changedTouches,h=d.length;for(Sm(e),o=0;o<h;++o)s=_p(a=d[o],this),u.touch0&&u.touch0[2]===a.identifier?u.touch0[0]=s:u.touch1&&u.touch1[2]===a.identifier&&(u.touch1[0]=s);if(a=u.that.__zoom,u.touch1){var f=u.touch0[0],p=u.touch0[1],g=u.touch1[0],y=u.touch1[1],b=(b=g[0]-f[0])*b+(b=g[1]-f[1])*b,E=(E=y[0]-p[0])*E+(E=y[1]-p[1])*E;a=m(a,Math.sqrt(b/E)),s=[(f[0]+g[0])/2,(f[1]+g[1])/2],l=[(p[0]+y[0])/2,(p[1]+y[1])/2]}else{if(!u.touch0)return;s=u.touch0[0],l=u.touch0[1]}u.zoom("touch",i(v(a,s,l),u.extent,c))}}function N(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];if(this.__zooming){var a,s,l=w(this,o).event(e),c=e.changedTouches,u=c.length;for(Em(e),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),a=0;a<u;++a)s=c[a],l.touch0&&l.touch0[2]===s.identifier?delete l.touch0:l.touch1&&l.touch1[2]===s.identifier&&delete l.touch1;if(l.touch1&&!l.touch0&&(l.touch0=l.touch1,delete l.touch1),l.touch0)l.touch0[1]=this.__zoom.invert(l.touch0[0]);else if(l.end(),2===l.taps&&(s=_p(s,this),Math.hypot(t[0]-s[0],t[1]-s[1])<p)){var d=pp(this).on("dblclick.zoom");d&&d.apply(this,arguments)}}}return g.transform=function(e,t,n,r){var o=e.selection?e.selection():e;o.property("__zoom",xm),e!==o?b(e,t,n,r):o.interrupt().each(function(){w(this,arguments).event(r).start().zoom(null,"function"===typeof t?t.apply(this,arguments):t).end()})},g.scaleBy=function(e,t,n,r){g.scaleTo(e,function(){return this.__zoom.k*("function"===typeof t?t.apply(this,arguments):t)},n,r)},g.scaleTo=function(e,t,n,r){g.transform(e,function(){var e=o.apply(this,arguments),r=this.__zoom,a=null==n?y(e):"function"===typeof n?n.apply(this,arguments):n,s=r.invert(a),l="function"===typeof t?t.apply(this,arguments):t;return i(v(m(r,l),a,s),e,c)},n,r)},g.translateBy=function(e,t,n,r){g.transform(e,function(){return i(this.__zoom.translate("function"===typeof t?t.apply(this,arguments):t,"function"===typeof n?n.apply(this,arguments):n),o.apply(this,arguments),c)},null,r)},g.translateTo=function(e,t,n,r,a){g.transform(e,function(){var e=o.apply(this,arguments),a=this.__zoom,s=null==r?y(e):"function"===typeof r?r.apply(this,arguments):r;return i(wm.translate(s[0],s[1]).scale(a.k).translate("function"===typeof t?-t.apply(this,arguments):-t,"function"===typeof n?-n.apply(this,arguments):-n),e,c)},r,a)},E.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=pp(this.that).datum();h.call(e,this.that,new ym(e,{sourceEvent:this.sourceEvent,target:g,type:e,transform:this.that.__zoom,dispatch:h}),t)}},g.wheelDelta=function(e){return arguments.length?(a="function"===typeof e?e:vm(+e),g):a},g.filter=function(e){return arguments.length?(r="function"===typeof e?e:vm(!!e),g):r},g.touchable=function(e){return arguments.length?(s="function"===typeof e?e:vm(!!e),g):s},g.extent=function(e){return arguments.length?(o="function"===typeof e?e:vm([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),g):o},g.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],g):[l[0],l[1]]},g.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],g):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},g.constrain=function(e){return arguments.length?(i=e,g):i},g.duration=function(e){return arguments.length?(u=+e,g):u},g.interpolate=function(e){return arguments.length?(d=e,g):d},g.on=function(){var e=h.on.apply(h,arguments);return e===h?g:e},g.clickDistance=function(e){return arguments.length?(f=(e=+e)*e,g):Math.sqrt(f)},g.tapDistance=function(e){return arguments.length?(p=+e,g):p},g}().scaleExtent([m,v]).translateExtent(g),n=pp(N.current).call(t),r=wm.translate(p.x,p.y).scale(ov(p.zoom,m,v)),o=[[0,0],[e.width,e.height]],i=t.constrain()(r,o,g);t.transform(n,i),t.wheelDelta(ib),k.setState({d3Zoom:t,d3Selection:n,d3ZoomHandler:n.on("wheel.zoom"),transform:[i.x,i.y,i.k],domNode:N.current.closest(".react-flow")})}},[]),(0,o.useEffect)(()=>{A&&I&&(!l||R||O?"undefined"!==typeof P&&A.on("wheel.zoom",function(e,t){if(!b&&"wheel"===e.type&&!e.ctrlKey||rb(e,E))return null;e.preventDefault(),P.call(this,e,t)},{passive:!1}):A.on("wheel.zoom",e=>{if(rb(e,E))return!1;e.preventDefault(),e.stopImmediatePropagation();const o=A.property("__zoom").k||1;if(e.ctrlKey&&s){const t=_p(e),n=ib(e),r=o*Math.pow(2,n);return void I.scaleTo(A,r,t,e)}const i=1===e.deltaMode?20:1;let a=u===Nv.Vertical?0:e.deltaX*i,l=u===Nv.Horizontal?0:e.deltaY*i;!Ev()&&e.shiftKey&&u!==Nv.Vertical&&(a=e.deltaY*i,l=0),I.translateBy(A,-a/o*c,-l/o*c,{internal:!0});const d=nb(A.property("__zoom")),{onViewportChangeStart:h,onViewportChange:f,onViewportChangeEnd:p}=k.getState();clearTimeout(L.current),M.current||(M.current=!0,null===n||void 0===n||n(e,d),null===h||void 0===h||h(d)),M.current&&(null===t||void 0===t||t(e,d),null===f||void 0===f||f(d),L.current=setTimeout(()=>{null===r||void 0===r||r(e,d),null===p||void 0===p||p(d),M.current=!1},150))},{passive:!1}))},[O,l,u,A,I,P,R,s,b,E,n,t,r]),(0,o.useEffect)(()=>{I&&I.on("start",e=>{var t,r;if(!e.sourceEvent||e.sourceEvent.internal)return null;D.current=null===(t=e.sourceEvent)||void 0===t?void 0:t.button;const{onViewportChangeStart:o}=k.getState(),i=nb(e.transform);x.current=!0,T.current=i,"mousedown"===(null===(r=e.sourceEvent)||void 0===r?void 0:r.type)&&k.setState({paneDragging:!0}),null===o||void 0===o||o(i),null===n||void 0===n||n(e.sourceEvent,i)})},[I,n]),(0,o.useEffect)(()=>{I&&(O&&!x.current?I.on("zoom",null):O||I.on("zoom",e=>{var n,r;const{onViewportChange:o}=k.getState();if(k.setState({transform:[e.transform.x,e.transform.y,e.transform.k]}),C.current=!(!i||!ob(f,null!==(n=D.current)&&void 0!==n?n:0)),(t||o)&&(null===(r=e.sourceEvent)||void 0===r||!r.internal)){const n=nb(e.transform);null===o||void 0===o||o(n),null===t||void 0===t||t(e.sourceEvent,n)}}))},[O,I,t,f,i]),(0,o.useEffect)(()=>{I&&I.on("end",e=>{var t;if(!e.sourceEvent||e.sourceEvent.internal)return null;const{onViewportChangeEnd:n}=k.getState();if(x.current=!1,k.setState({paneDragging:!1}),i&&ob(f,null!==(t=D.current)&&void 0!==t?t:0)&&!C.current&&i(e.sourceEvent),C.current=!1,(r||n)&&(o=T.current,a=e.transform,o.x!==a.x||o.y!==a.y||o.zoom!==a.k)){const t=nb(e.transform);T.current=t,clearTimeout(_.current),_.current=setTimeout(()=>{null===n||void 0===n||n(t),null===r||void 0===r||r(e.sourceEvent,t)},l?150:0)}var o,a})},[I,l,f,r,i]),(0,o.useEffect)(()=>{I&&I.filter(e=>{const t=R||a,n=s&&e.ctrlKey;if((!0===f||Array.isArray(f)&&f.includes(1))&&1===e.button&&"mousedown"===e.type&&(rb(e,"react-flow__node")||rb(e,"react-flow__edge")))return!0;if(!f&&!t&&!l&&!d&&!s)return!1;if(O)return!1;if(!d&&"dblclick"===e.type)return!1;if(rb(e,E)&&"wheel"===e.type)return!1;if(rb(e,S)&&("wheel"!==e.type||l&&"wheel"===e.type&&!R))return!1;if(!s&&e.ctrlKey&&"wheel"===e.type)return!1;if(!t&&!l&&!n&&"wheel"===e.type)return!1;if(!f&&("mousedown"===e.type||"touchstart"===e.type))return!1;if(Array.isArray(f)&&!f.includes(e.button)&&"mousedown"===e.type)return!1;const r=Array.isArray(f)&&f.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||"wheel"===e.type)&&r})},[O,I,a,s,l,d,f,h,R]),o.createElement("div",{className:"react-flow__renderer",ref:N,style:tb},w)},lb=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function cb(){const{userSelectionActive:e,userSelectionRect:t}=$m(lb,Gh);return e&&t?o.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:"translate(".concat(t.x,"px, ").concat(t.y,"px)")}}):null}function ub(e,t){const n=t.parentNode||t.parentId,r=e.find(e=>e.id===n);if(r){const e=t.position.x+t.width-r.width,n=t.position.y+t.height-r.height;if(e>0||n>0||t.position.x<0||t.position.y<0){var o,i;if(r.style=Pt({},r.style)||{},r.style.width=null!==(o=r.style.width)&&void 0!==o?o:r.width,r.style.height=null!==(i=r.style.height)&&void 0!==i?i:r.height,e>0&&(r.style.width+=e),n>0&&(r.style.height+=n),t.position.x<0){const e=Math.abs(t.position.x);r.position.x=r.position.x-e,r.style.width+=e,t.position.x=0}if(t.position.y<0){const e=Math.abs(t.position.y);r.position.y=r.position.y-e,r.style.height+=e,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function db(e,t){if(e.some(e=>"reset"===e.type))return e.filter(e=>"reset"===e.type).map(e=>e.item);const n=e.filter(e=>"add"===e.type).map(e=>e.item);return t.reduce((t,n)=>{const r=e.filter(e=>e.id===n.id);if(0===r.length)return t.push(n),t;const o=Pt({},n);for(const e of r)if(e)switch(e.type){case"select":o.selected=e.selected;break;case"position":"undefined"!==typeof e.position&&(o.position=e.position),"undefined"!==typeof e.positionAbsolute&&(o.positionAbsolute=e.positionAbsolute),"undefined"!==typeof e.dragging&&(o.dragging=e.dragging),o.expandParent&&ub(t,o);break;case"dimensions":"undefined"!==typeof e.dimensions&&(o.width=e.dimensions.width,o.height=e.dimensions.height),"undefined"!==typeof e.updateStyle&&(o.style=Pt(Pt({},o.style||{}),e.dimensions)),"boolean"===typeof e.resizing&&(o.resizing=e.resizing),o.expandParent&&ub(t,o);break;case"remove":return t}return t.push(o),t},n)}function hb(e,t){return db(e,t)}function fb(e,t){return db(e,t)}const pb=(e,t)=>({id:e,type:"select",selected:t});function gb(e,t){return e.reduce((e,n)=>{const r=t.includes(n.id);return!n.selected&&r?(n.selected=!0,e.push(pb(n.id,!0))):n.selected&&!r&&(n.selected=!1,e.push(pb(n.id,!1))),e},[])}const mb=(e,t)=>n=>{n.target===t.current&&(null===e||void 0===e||e(n))},vb=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),yb=(0,o.memo)(e=>{let{isSelecting:t,selectionMode:n=Tv.Full,panOnDrag:r,onSelectionStart:i,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:l,onPaneScroll:c,onPaneMouseEnter:u,onPaneMouseMove:d,onPaneMouseLeave:h,children:f}=e;const p=(0,o.useRef)(null),g=Jm(),m=(0,o.useRef)(0),v=(0,o.useRef)(0),y=(0,o.useRef)(),{userSelectionActive:b,elementsSelectable:w,dragging:E}=$m(vb,Gh),S=()=>{g.setState({userSelectionActive:!1,userSelectionRect:null}),m.current=0,v.current=0},_=e=>{null===s||void 0===s||s(e),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},k=c?e=>c(e):void 0,x=w&&(t||b);return o.createElement("div",{className:Uh(["react-flow__pane",{dragging:E,selection:t}]),onClick:x?void 0:mb(_,p),onContextMenu:mb(e=>{Array.isArray(r)&&null!==r&&void 0!==r&&r.includes(2)?e.preventDefault():null===l||void 0===l||l(e)},p),onWheel:mb(k,p),onMouseEnter:x?void 0:u,onMouseDown:x?e=>{const{resetSelectedElements:n,domNode:r}=g.getState();if(y.current=null===r||void 0===r?void 0:r.getBoundingClientRect(),!w||!t||0!==e.button||e.target!==p.current||!y.current)return;const{x:o,y:a}=wv(e,y.current);n(),g.setState({userSelectionRect:{width:0,height:0,startX:o,startY:a,x:o,y:a}}),null===i||void 0===i||i(e)}:void 0,onMouseMove:x?e=>{var r,o;const{userSelectionRect:i,nodeInternals:a,edges:s,transform:l,onNodesChange:c,onEdgesChange:u,nodeOrigin:d,getNodes:h}=g.getState();if(!t||!y.current||!i)return;g.setState({userSelectionActive:!0,nodesSelectionActive:!1});const f=wv(e,y.current),p=null!==(r=i.startX)&&void 0!==r?r:0,b=null!==(o=i.startY)&&void 0!==o?o:0,w=Pt(Pt({},i),{},{x:f.x<p?f.x:p,y:f.y<b?f.y:b,width:Math.abs(f.x-p),height:Math.abs(f.y-b)}),E=h(),S=ey(a,w,l,n===Tv.Partial,!0,d),_=ty(S,s).map(e=>e.id),k=S.map(e=>e.id);if(m.current!==k.length){m.current=k.length;const e=gb(E,k);e.length&&(null===c||void 0===c||c(e))}if(v.current!==_.length){v.current=_.length;const e=gb(s,_);e.length&&(null===u||void 0===u||u(e))}g.setState({userSelectionRect:w})}:d,onMouseUp:x?e=>{if(0!==e.button)return;const{userSelectionRect:t}=g.getState();!b&&t&&e.target===p.current&&(null===_||void 0===_||_(e)),g.setState({nodesSelectionActive:m.current>0}),S(),null===a||void 0===a||a(e)}:void 0,onMouseLeave:x?e=>{b&&(g.setState({nodesSelectionActive:m.current>0}),null===a||void 0===a||a(e)),S()}:h,ref:p,style:tb},f,o.createElement(cb,null))});function bb(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return!!r&&(!!r.selected||bb(r,t))}function wb(e,t,n){let r=e;do{var o;if(null!==(o=r)&&void 0!==o&&o.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function Eb(e,t,n,r){return Array.from(e.values()).filter(n=>(n.selected||n.id===r)&&(!n.parentNode||n.parentId||!bb(n,e))&&(n.draggable||t&&"undefined"===typeof n.draggable)).map(e=>{var t,r,o,i;return{id:e.id,position:e.position||{x:0,y:0},positionAbsolute:e.positionAbsolute||{x:0,y:0},distance:{x:n.x-(null!==(t=null===(r=e.positionAbsolute)||void 0===r?void 0:r.x)&&void 0!==t?t:0),y:n.y-(null!==(o=null===(i=e.positionAbsolute)||void 0===i?void 0:i.y)&&void 0!==o?o:0)},delta:{x:0,y:0},extent:e.extent,parentNode:e.parentNode||e.parentId,parentId:e.parentNode||e.parentId,width:e.width,height:e.height,expandParent:e.expandParent}})}function Sb(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0],i=arguments.length>5?arguments[5]:void 0;const a=function(e,t){return t&&"parent"!==t?[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]:t}(e,e.extent||r);let s=a;const l=e.parentNode||e.parentId;if("parent"!==e.extent||e.expandParent){if(e.extent&&l&&"parent"!==e.extent){const t=n.get(l),{x:r,y:i}=Jv(t,o).positionAbsolute;s=[[e.extent[0][0]+r,e.extent[0][1]+i],[e.extent[1][0]+r,e.extent[1][1]+i]]}}else if(l&&e.width&&e.height){const t=n.get(l),{x:r,y:i}=Jv(t,o).positionAbsolute;s=t&&pv(r)&&pv(i)&&pv(t.width)&&pv(t.height)?[[r+e.width*o[0],i+e.height*o[1]],[r+t.width-e.width+e.width*o[0],i+t.height-e.height+e.height*o[1]]]:s}else null===i||void 0===i||i("005",Hm()),s=a;let c={x:0,y:0};if(l){const e=n.get(l);c=Jv(e,o).positionAbsolute}const u=s&&"parent"!==s?iv(t,s):t;return{position:{x:u.x-c.x,y:u.y-c.y},positionAbsolute:u}}function _b(e){let{nodeId:t,dragItems:n,nodeInternals:r}=e;const o=n.map(e=>Pt(Pt({},r.get(e.id)),{},{position:e.position,positionAbsolute:e.positionAbsolute}));return[t?o.find(e=>e.id===t):o[0],o]}yb.displayName="Pane";const kb=(e,t,n,r)=>{const o=t.querySelectorAll(e);if(!o||!o.length)return null;const i=Array.from(o),a=t.getBoundingClientRect(),s=a.width*r[0],l=a.height*r[1];return i.map(e=>{const t=e.getBoundingClientRect();return Pt({id:e.getAttribute("data-handleid"),position:e.getAttribute("data-handlepos"),x:(t.left-a.left-s)/n,y:(t.top-a.top-l)/n},rv(e))})};function xb(e,t,n){return void 0===n?n:r=>{const o=t().nodeInternals.get(e);o&&n(r,Pt({},o))}}function Cb(e){let{id:t,store:n,unselect:r=!1,nodeRef:o}=e;const{addSelectedNodes:i,unselectNodesAndEdges:a,multiSelectionActive:s,nodeInternals:l,onError:c}=n.getState(),u=l.get(t);u?(n.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&s)&&(a({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var e;return null===o||void 0===o||null===(e=o.current)||void 0===e?void 0:e.blur()})):i([t])):null===c||void 0===c||c("012",Ym(t))}function Nb(e){return(t,n,r)=>null===e||void 0===e?void 0:e(t,r)}function Tb(e){let{nodeRef:t,disabled:n=!1,noDragClassName:r,handleSelector:i,nodeId:a,isSelectable:s,selectNodesOnDrag:l}=e;const c=Jm(),[u,d]=(0,o.useState)(!1),h=(0,o.useRef)([]),f=(0,o.useRef)({x:null,y:null}),p=(0,o.useRef)(0),g=(0,o.useRef)(null),m=(0,o.useRef)({x:0,y:0}),v=(0,o.useRef)(null),y=(0,o.useRef)(!1),b=(0,o.useRef)(!1),w=(0,o.useRef)(!1),E=function(){const e=Jm(),t=(0,o.useCallback)(t=>{let{sourceEvent:n}=t;const{transform:r,snapGrid:o,snapToGrid:i}=e.getState(),a=n.touches?n.touches[0].clientX:n.clientX,s=n.touches?n.touches[0].clientY:n.clientY,l={x:(a-r[0])/r[2],y:(s-r[1])/r[2]};return Pt({xSnapped:i?o[0]*Math.round(l.x/o[0]):l.x,ySnapped:i?o[1]*Math.round(l.y/o[1]):l.y},l)},[]);return t}();return(0,o.useEffect)(()=>{if(null!==t&&void 0!==t&&t.current){const e=pp(t.current),o=e=>{let{x:t,y:n}=e;const{nodeInternals:r,onNodeDrag:o,onSelectionDrag:i,updateNodePositions:s,nodeExtent:l,snapGrid:u,snapToGrid:p,nodeOrigin:g,onError:m}=c.getState();f.current={x:t,y:n};let y=!1,b={x:0,y:0,x2:0,y2:0};if(h.current.length>1&&l){const e=Zv(h.current,g);b=uv(e)}if(h.current=h.current.map(e=>{const o={x:t-e.distance.x,y:n-e.distance.y};p&&(o.x=u[0]*Math.round(o.x/u[0]),o.y=u[1]*Math.round(o.y/u[1]));const i=[[l[0][0],l[0][1]],[l[1][0],l[1][1]]];var a,s;h.current.length>1&&l&&!e.extent&&(i[0][0]=e.positionAbsolute.x-b.x+l[0][0],i[1][0]=e.positionAbsolute.x+(null!==(a=e.width)&&void 0!==a?a:0)-b.x2+l[1][0],i[0][1]=e.positionAbsolute.y-b.y+l[0][1],i[1][1]=e.positionAbsolute.y+(null!==(s=e.height)&&void 0!==s?s:0)-b.y2+l[1][1]);const c=Sb(e,o,r,i,g,m);return y=y||e.position.x!==c.position.x||e.position.y!==c.position.y,e.position=c.position,e.positionAbsolute=c.positionAbsolute,e}),!y)return;s(h.current,!0,!0),d(!0);const w=a?o:Nb(i);if(w&&v.current){const[e,t]=_b({nodeId:a,dragItems:h.current,nodeInternals:r});w(v.current,e,t)}},u=()=>{if(!g.current)return;const[e,t]=sv(m.current,g.current);if(0!==e||0!==t){var n,r;const{transform:i,panBy:a}=c.getState();f.current.x=(null!==(n=f.current.x)&&void 0!==n?n:0)-e/i[2],f.current.y=(null!==(r=f.current.y)&&void 0!==r?r:0)-t/i[2],a({x:e,y:t})&&o(f.current)}p.current=requestAnimationFrame(u)},S=e=>{const{nodeInternals:n,multiSelectionActive:r,nodesDraggable:o,unselectNodesAndEdges:i,onNodeDragStart:u,onSelectionDragStart:d}=c.getState();b.current=!0;const p=a?u:Nb(d);var g;l&&s||r||!a||(null!==(g=n.get(a))&&void 0!==g&&g.selected||i());a&&s&&l&&Cb({id:a,store:c,nodeRef:t});const m=E(e);if(f.current=m,h.current=Eb(n,o,m,a),p&&h.current){const[t,r]=_b({nodeId:a,dragItems:h.current,nodeInternals:n});p(e.sourceEvent,t,r)}};if(!n){const n=function(){var e,t,n,r,o=Pm,i=Om,a=Rm,s=Dm,l={},c=Zh("start","drag","end"),u=0,d=0;function h(e){e.on("mousedown.drag",f).filter(s).on("touchstart.drag",m).on("touchmove.drag",v,gp).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(a,s){if(!r&&o.call(this,a,s)){var l=b(this,i.call(this,a,s),a,s,"mouse");l&&(pp(a.view).on("mousemove.drag",p,mp).on("mouseup.drag",g,mp),bp(a.view),vp(a),n=!1,e=a.clientX,t=a.clientY,l("start",a))}}function p(r){if(yp(r),!n){var o=r.clientX-e,i=r.clientY-t;n=o*o+i*i>d}l.mouse("drag",r)}function g(e){pp(e.view).on("mousemove.drag mouseup.drag",null),wp(e.view,n),yp(e),l.mouse("end",e)}function m(e,t){if(o.call(this,e,t)){var n,r,a=e.changedTouches,s=i.call(this,e,t),l=a.length;for(n=0;n<l;++n)(r=b(this,s,e,t,a[n].identifier,a[n]))&&(vp(e),r("start",e,a[n]))}}function v(e){var t,n,r=e.changedTouches,o=r.length;for(t=0;t<o;++t)(n=l[r[t].identifier])&&(yp(e),n("drag",e,r[t]))}function y(e){var t,n,o=e.changedTouches,i=o.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<i;++t)(n=l[o[t].identifier])&&(vp(e),n("end",e,o[t]))}function b(e,t,n,r,o,i){var s,d,f,p=c.copy(),g=_p(i||n,t);if(null!=(f=a.call(e,new Am("beforestart",{sourceEvent:n,target:h,identifier:o,active:u,x:g[0],y:g[1],dx:0,dy:0,dispatch:p}),r)))return s=f.x-g[0]||0,d=f.y-g[1]||0,function n(i,a,c){var m,v=g;switch(i){case"start":l[o]=n,m=u++;break;case"end":delete l[o],--u;case"drag":g=_p(c||a,t),m=u}p.call(i,e,new Am(i,{sourceEvent:a,subject:f,target:h,identifier:o,active:m,x:g[0]+s,y:g[1]+d,dx:g[0]-v[0],dy:g[1]-v[1],dispatch:p}),r)}}return h.filter=function(e){return arguments.length?(o="function"===typeof e?e:Im(!!e),h):o},h.container=function(e){return arguments.length?(i="function"===typeof e?e:Im(e),h):i},h.subject=function(e){return arguments.length?(a="function"===typeof e?e:Im(e),h):a},h.touchable=function(e){return arguments.length?(s="function"===typeof e?e:Im(!!e),h):s},h.on=function(){var e=c.on.apply(c,arguments);return e===c?h:e},h.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,h):Math.sqrt(d)},h}().on("start",e=>{const{domNode:t,nodeDragThreshold:n}=c.getState();0===n&&S(e),w.current=!1;const r=E(e);f.current=r,g.current=(null===t||void 0===t?void 0:t.getBoundingClientRect())||null,m.current=wv(e.sourceEvent,g.current)}).on("drag",e=>{const t=E(e),{autoPanOnNodeDrag:n,nodeDragThreshold:r}=c.getState();if("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1&&(w.current=!0),!w.current){if(!y.current&&b.current&&n&&(y.current=!0,u()),!b.current){var i,a,s,l;const n=t.xSnapped-(null!==(i=null===f||void 0===f||null===(a=f.current)||void 0===a?void 0:a.x)&&void 0!==i?i:0),o=t.ySnapped-(null!==(s=null===f||void 0===f||null===(l=f.current)||void 0===l?void 0:l.y)&&void 0!==s?s:0);Math.sqrt(n*n+o*o)>r&&S(e)}(f.current.x!==t.xSnapped||f.current.y!==t.ySnapped)&&h.current&&b.current&&(v.current=e.sourceEvent,m.current=wv(e.sourceEvent,g.current),o(t))}}).on("end",e=>{if(b.current&&!w.current&&(d(!1),y.current=!1,b.current=!1,cancelAnimationFrame(p.current),h.current)){const{updateNodePositions:t,nodeInternals:n,onNodeDragStop:r,onSelectionDragStop:o}=c.getState(),i=a?r:Nb(o);if(t(h.current,!1,!1),i){const[t,r]=_b({nodeId:a,dragItems:h.current,nodeInternals:n});i(e.sourceEvent,t,r)}}}).filter(e=>{const n=e.target;return!e.button&&(!r||!wb(n,".".concat(r),t))&&(!i||wb(n,i,t))});return e.call(n),()=>{e.on(".drag",null)}}e.on(".drag",null)}},[t,n,r,i,s,c,a,l,E]),u}function Ib(){const e=Jm();return(0,o.useCallback)(t=>{const{nodeInternals:n,nodeExtent:r,updateNodePositions:o,getNodes:i,snapToGrid:a,snapGrid:s,onError:l,nodesDraggable:c}=e.getState(),u=i().filter(e=>e.selected&&(e.draggable||c&&"undefined"===typeof e.draggable)),d=a?s[0]:5,h=a?s[1]:5,f=t.isShiftPressed?4:1,p=t.x*d*f,g=t.y*h*f;o(u.map(e=>{if(e.positionAbsolute){const t={x:e.positionAbsolute.x+p,y:e.positionAbsolute.y+g};a&&(t.x=s[0]*Math.round(t.x/s[0]),t.y=s[1]*Math.round(t.y/s[1]));const{positionAbsolute:o,position:i}=Sb(e,t,n,r,void 0,l);e.position=i,e.positionAbsolute=o}return e}),!0,!1)},[])}const Ab={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Pb=e=>{const t=t=>{let{id:n,type:r,data:i,xPos:a,yPos:s,xPosOrigin:l,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:h,onMouseMove:f,onMouseLeave:p,onContextMenu:g,onDoubleClick:m,style:v,className:y,isDraggable:b,isSelectable:w,isConnectable:E,isFocusable:S,selectNodesOnDrag:_,sourcePosition:k,targetPosition:x,hidden:C,resizeObserver:N,dragHandle:T,zIndex:I,isParent:A,noDragClassName:P,noPanClassName:O,initialized:R,disableKeyboardA11y:D,ariaLabel:M,rfId:L,hasHandleBounds:j}=t;const U=Jm(),F=(0,o.useRef)(null),z=(0,o.useRef)(null),V=(0,o.useRef)(k),B=(0,o.useRef)(x),H=(0,o.useRef)(r),K=w||b||d||h||f||p,W=Ib(),q=xb(n,U.getState,h),G=xb(n,U.getState,f),X=xb(n,U.getState,p),Y=xb(n,U.getState,g),Q=xb(n,U.getState,m);(0,o.useEffect)(()=>()=>{z.current&&(null===N||void 0===N||N.unobserve(z.current),z.current=null)},[]),(0,o.useEffect)(()=>{if(F.current&&!C){const e=F.current;R&&j&&z.current===e||(z.current&&(null===N||void 0===N||N.unobserve(z.current)),null===N||void 0===N||N.observe(e),z.current=e)}},[C,R,j]),(0,o.useEffect)(()=>{const e=H.current!==r,t=V.current!==k,o=B.current!==x;F.current&&(e||t||o)&&(e&&(H.current=r),t&&(V.current=k),o&&(B.current=x),U.getState().updateNodeDimensions([{id:n,nodeElement:F.current,forceUpdate:!0}]))},[n,r,k,x]);const $=Tb({nodeRef:F,disabled:C||!b,noDragClassName:P,handleSelector:T,nodeId:n,isSelectable:w,selectNodesOnDrag:_});return C?null:o.createElement("div",{className:Uh(["react-flow__node","react-flow__node-".concat(r),{[O]:b},y,{selected:u,selectable:w,parent:A,dragging:$}]),ref:F,style:Pt({zIndex:I,transform:"translate(".concat(l,"px,").concat(c,"px)"),pointerEvents:K?"all":"none",visibility:R?"visible":"hidden"},v),"data-id":n,"data-testid":"rf__node-".concat(n),onMouseEnter:q,onMouseMove:G,onMouseLeave:X,onContextMenu:Y,onClick:e=>{const{nodeDragThreshold:t}=U.getState();if(w&&(!_||!b||t>0)&&Cb({id:n,store:U,nodeRef:F}),d){const t=U.getState().nodeInternals.get(n);t&&d(e,Pt({},t))}},onDoubleClick:Q,onKeyDown:S?e=>{if(!yv(e)&&!D)if(mv.includes(e.key)&&w){const t="Escape"===e.key;Cb({id:n,store:U,unselect:t,nodeRef:F})}else b&&u&&Object.prototype.hasOwnProperty.call(Ab,e.key)&&(U.setState({ariaLiveMessage:"Moved selected node ".concat(e.key.replace("Arrow","").toLowerCase(),". New position, x: ").concat(~~a,", y: ").concat(~~s)}),W({x:Ab[e.key].x,y:Ab[e.key].y,isShiftPressed:e.shiftKey}))}:void 0,tabIndex:S?0:void 0,role:S?"button":void 0,"aria-describedby":D?void 0:"".concat(My,"-").concat(L),"aria-label":M},o.createElement(Gv,{value:n},o.createElement(e,{id:n,data:i,type:r,xPos:a,yPos:s,selected:u,isConnectable:E,sourcePosition:k,targetPosition:x,dragging:$,dragHandle:T,zIndex:I})))};return t.displayName="NodeWrapper",(0,o.memo)(t)};const Ob=e=>{const t=e.getNodes().filter(e=>e.selected);return Pt(Pt({},Zv(t,e.nodeOrigin)),{},{transformString:"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],")"),userSelectionActive:e.userSelectionActive})};var Rb=(0,o.memo)(function(e){let{onSelectionContextMenu:t,noPanClassName:n,disableKeyboardA11y:r}=e;const i=Jm(),{width:a,height:s,x:l,y:c,transformString:u,userSelectionActive:d}=$m(Ob,Gh),h=Ib(),f=(0,o.useRef)(null);if((0,o.useEffect)(()=>{var e;r||(null===(e=f.current)||void 0===e||e.focus({preventScroll:!0}))},[r]),Tb({nodeRef:f}),d||!a||!s)return null;const p=t?e=>{const n=i.getState().getNodes().filter(e=>e.selected);t(e,n)}:void 0;return o.createElement("div",{className:Uh(["react-flow__nodesselection","react-flow__container",n]),style:{transform:u}},o.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:r?void 0:-1,onKeyDown:r?void 0:e=>{Object.prototype.hasOwnProperty.call(Ab,e.key)&&h({x:Ab[e.key].x,y:Ab[e.key].y,isShiftPressed:e.shiftKey})},style:{width:a,height:s,top:c,left:l}}))});const Db=e=>e.nodesSelectionActive,Mb=e=>{let{children:t,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:l,deleteKeyCode:c,onMove:u,onMoveStart:d,onMoveEnd:h,selectionKeyCode:f,selectionOnDrag:p,selectionMode:g,onSelectionStart:m,onSelectionEnd:v,multiSelectionKeyCode:y,panActivationKeyCode:b,zoomActivationKeyCode:w,elementsSelectable:E,zoomOnScroll:S,zoomOnPinch:_,panOnScroll:k,panOnScrollSpeed:x,panOnScrollMode:C,zoomOnDoubleClick:N,panOnDrag:T,defaultViewport:I,translateExtent:A,minZoom:P,maxZoom:O,preventScrolling:R,onSelectionContextMenu:D,noWheelClassName:M,noPanClassName:L,disableKeyboardA11y:j}=e;const U=$m(Db),F=zy(f),z=zy(b),V=z||T,B=z||k,H=F||p&&!0!==V;return(e=>{let{deleteKeyCode:t,multiSelectionKeyCode:n}=e;const r=Jm(),{deleteElements:i}=Zy(),a=zy(t,eb),s=zy(n);(0,o.useEffect)(()=>{if(a){const{edges:e,getNodes:t}=r.getState(),n=t().filter(e=>e.selected),o=e.filter(e=>e.selected);i({nodes:n,edges:o}),r.setState({nodesSelectionActive:!1})}},[a]),(0,o.useEffect)(()=>{r.setState({multiSelectionActive:s})},[s])})({deleteKeyCode:c,multiSelectionKeyCode:y}),o.createElement(sb,{onMove:u,onMoveStart:d,onMoveEnd:h,onPaneContextMenu:s,elementsSelectable:E,zoomOnScroll:S,zoomOnPinch:_,panOnScroll:B,panOnScrollSpeed:x,panOnScrollMode:C,zoomOnDoubleClick:N,panOnDrag:!F&&V,defaultViewport:I,translateExtent:A,minZoom:P,maxZoom:O,zoomActivationKeyCode:w,preventScrolling:R,noWheelClassName:M,noPanClassName:L},o.createElement(yb,{onSelectionStart:m,onSelectionEnd:v,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:l,panOnDrag:V,isSelecting:!!H,selectionMode:g},t,U&&o.createElement(Rb,{onSelectionContextMenu:D,noPanClassName:L,disableKeyboardA11y:j})))};Mb.displayName="FlowRenderer";var Lb=(0,o.memo)(Mb);function jb(e){const t={input:Pb(e.input||by),default:Pb(e.default||vy),output:Pb(e.output||Ey),group:Pb(e.group||Sy)},n=Object.keys(e).filter(e=>!["input","default","output","group"].includes(e)).reduce((t,n)=>(t[n]=Pb(e[n]||vy),t),{});return Pt(Pt({},t),n)}const Ub=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Fb=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:a,onError:s}=$m(Ub,Gh),l=(c=e.onlyRenderVisibleElements,$m((0,o.useCallback)(e=>c?ey(e.nodeInternals,{x:0,y:0,width:e.width,height:e.height},e.transform,!0):e.getNodes(),[c])));var c;const u=(0,o.useRef)(),d=(0,o.useMemo)(()=>{if("undefined"===typeof ResizeObserver)return null;const e=new ResizeObserver(e=>{const t=e.map(e=>({id:e.target.getAttribute("data-id"),nodeElement:e.target,forceUpdate:!0}));a(t)});return u.current=e,e},[]);return(0,o.useEffect)(()=>()=>{var e;null===u||void 0===u||null===(e=u.current)||void 0===e||e.disconnect()},[]),o.createElement("div",{className:"react-flow__nodes",style:tb},l.map(a=>{var l,c,u,h,f,p,g,m;let v=a.type||"default";e.nodeTypes[v]||(null===s||void 0===s||s("003",Vm(v)),v="default");const y=e.nodeTypes[v]||e.nodeTypes.default,b=!!(a.draggable||t&&"undefined"===typeof a.draggable),w=!!(a.selectable||i&&"undefined"===typeof a.selectable),E=!!(a.connectable||n&&"undefined"===typeof a.connectable),S=!!(a.focusable||r&&"undefined"===typeof a.focusable),_=e.nodeExtent?iv(a.positionAbsolute,e.nodeExtent):a.positionAbsolute,k=null!==(l=null===_||void 0===_?void 0:_.x)&&void 0!==l?l:0,x=null!==(c=null===_||void 0===_?void 0:_.y)&&void 0!==c?c:0,C=(e=>{let{x:t,y:n,width:r,height:o,origin:i}=e;return r&&o?i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:t,y:n}:{x:t-r*i[0],y:n-o*i[1]}:{x:t,y:n}})({x:k,y:x,width:null!==(u=a.width)&&void 0!==u?u:0,height:null!==(h=a.height)&&void 0!==h?h:0,origin:e.nodeOrigin});return o.createElement(y,{key:a.id,id:a.id,className:a.className,style:a.style,type:v,data:a.data,sourcePosition:a.sourcePosition||Pv.Bottom,targetPosition:a.targetPosition||Pv.Top,hidden:a.hidden,xPos:k,yPos:x,xPosOrigin:C.x,yPosOrigin:C.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!a.selected,isDraggable:b,isSelectable:w,isConnectable:E,isFocusable:S,resizeObserver:d,dragHandle:a.dragHandle,zIndex:null!==(f=null===(p=a[gv])||void 0===p?void 0:p.z)&&void 0!==f?f:0,isParent:!(null===(g=a[gv])||void 0===g||!g.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!a.width&&!!a.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:a.ariaLabel,hasHandleBounds:!(null===(m=a[gv])||void 0===m||!m.handleBounds)})}))};Fb.displayName="NodeRenderer";var zb=(0,o.memo)(Fb);const Vb=(e,t,n)=>n===Pv.Left?e-t:n===Pv.Right?e+t:e,Bb=(e,t,n)=>n===Pv.Top?e-t:n===Pv.Bottom?e+t:e,Hb="react-flow__edgeupdater",Kb=e=>{let{position:t,centerX:n,centerY:r,radius:i=10,onMouseDown:a,onMouseEnter:s,onMouseOut:l,type:c}=e;return o.createElement("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:l,className:Uh([Hb,"".concat(Hb,"-").concat(c)]),cx:Vb(n,i,t),cy:Bb(r,i,t),r:i,stroke:"transparent",fill:"transparent"})},Wb=()=>!0;var qb=e=>{const t=t=>{let{id:n,className:r,type:i,data:a,onClick:s,onEdgeDoubleClick:l,selected:c,animated:u,label:d,labelStyle:h,labelShowBg:f,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:m,style:v,source:y,target:b,sourceX:w,sourceY:E,targetX:S,targetY:_,sourcePosition:k,targetPosition:x,elementsSelectable:C,hidden:N,sourceHandleId:T,targetHandleId:I,onContextMenu:A,onMouseEnter:P,onMouseMove:O,onMouseLeave:R,reconnectRadius:D,onReconnect:M,onReconnectStart:L,onReconnectEnd:j,markerEnd:U,markerStart:F,rfId:z,ariaLabel:V,isFocusable:B,isReconnectable:H,pathOptions:K,interactionWidth:W,disableKeyboardA11y:q}=t;const G=(0,o.useRef)(null),[X,Y]=(0,o.useState)(!1),[Q,$]=(0,o.useState)(!1),J=Jm(),Z=(0,o.useMemo)(()=>"url('#".concat(Yv(F,z),"')"),[F,z]),ee=(0,o.useMemo)(()=>"url('#".concat(Yv(U,z),"')"),[U,z]);if(N)return null;const te=_v(n,J.getState,l),ne=_v(n,J.getState,A),re=_v(n,J.getState,P),oe=_v(n,J.getState,O),ie=_v(n,J.getState,R),ae=(e,t)=>{if(0!==e.button)return;const{edges:r,isValidConnection:o}=J.getState(),i=t?b:y,a=(t?I:T)||null,s=t?"target":"source",l=o||Wb,c=t,u=r.find(e=>e.id===n);$(!0),null===L||void 0===L||L(e,u,s);dy({event:e,handleId:a,nodeId:i,onConnect:e=>null===M||void 0===M?void 0:M(u,e),isTarget:c,getState:J.getState,setState:J.setState,isValidConnection:l,edgeUpdaterType:s,onReconnectEnd:e=>{$(!1),null===j||void 0===j||j(e,u,s)}})},se=()=>Y(!0),le=()=>Y(!1),ce=!C&&!s;return o.createElement("g",{className:Uh(["react-flow__edge","react-flow__edge-".concat(i),r,{selected:c,animated:u,inactive:ce,updating:X}]),onClick:e=>{const{edges:t,addSelectedEdges:r,unselectNodesAndEdges:o,multiSelectionActive:i}=J.getState(),a=t.find(e=>e.id===n);if(a){var l;if(C)if(J.setState({nodesSelectionActive:!1}),a.selected&&i)o({nodes:[],edges:[a]}),null===(l=G.current)||void 0===l||l.blur();else r([n]);s&&s(e,a)}},onDoubleClick:te,onContextMenu:ne,onMouseEnter:re,onMouseMove:oe,onMouseLeave:ie,onKeyDown:B?e=>{if(!q&&mv.includes(e.key)&&C){const{unselectNodesAndEdges:r,addSelectedEdges:o,edges:i}=J.getState();var t;if("Escape"===e.key)null===(t=G.current)||void 0===t||t.blur(),r({edges:[i.find(e=>e.id===n)]});else o([n])}}:void 0,tabIndex:B?0:void 0,role:B?"button":"img","data-testid":"rf__edge-".concat(n),"aria-label":null===V?void 0:V||"Edge from ".concat(y," to ").concat(b),"aria-describedby":B?"".concat(Ly,"-").concat(z):void 0,ref:G},!Q&&o.createElement(e,{id:n,source:y,target:b,selected:c,animated:u,label:d,labelStyle:h,labelShowBg:f,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:m,data:a,style:v,sourceX:w,sourceY:E,targetX:S,targetY:_,sourcePosition:k,targetPosition:x,sourceHandleId:T,targetHandleId:I,markerStart:Z,markerEnd:ee,pathOptions:K,interactionWidth:W}),H&&o.createElement(o.Fragment,null,("source"===H||!0===H)&&o.createElement(Kb,{position:k,centerX:w,centerY:E,radius:D,onMouseDown:e=>ae(e,!0),onMouseEnter:se,onMouseOut:le,type:"source"}),("target"===H||!0===H)&&o.createElement(Kb,{position:x,centerX:S,centerY:_,radius:D,onMouseDown:e=>ae(e,!1),onMouseEnter:se,onMouseOut:le,type:"target"})))};return t.displayName="EdgeWrapper",(0,o.memo)(t)};function Gb(e){const t={default:qb(e.default||Wv),straight:qb(e.bezier||Vv),step:qb(e.step||zv),smoothstep:qb(e.step||Fv),simplebezier:qb(e.simplebezier||Dv)},n=Object.keys(e).filter(e=>!["default","bezier"].includes(e)).reduce((t,n)=>(t[n]=qb(e[n]||Wv),t),{});return Pt(Pt({},t),n)}function Xb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=((null===n||void 0===n?void 0:n.x)||0)+t.x,o=((null===n||void 0===n?void 0:n.y)||0)+t.y,i=(null===n||void 0===n?void 0:n.width)||t.width,a=(null===n||void 0===n?void 0:n.height)||t.height;switch(e){case Pv.Top:return{x:r+i/2,y:o};case Pv.Right:return{x:r+i,y:o+a/2};case Pv.Bottom:return{x:r+i/2,y:o+a};case Pv.Left:return{x:r,y:o+a/2}}}function Yb(e,t){return e?1!==e.length&&t?t&&e.find(e=>e.id===t)||null:e[0]:null}function Qb(e){var t,n,r,o,i;const a=(null===e||void 0===e||null===(t=e[gv])||void 0===t?void 0:t.handleBounds)||null,s=a&&(null===e||void 0===e?void 0:e.width)&&(null===e||void 0===e?void 0:e.height)&&"undefined"!==typeof(null===e||void 0===e||null===(n=e.positionAbsolute)||void 0===n?void 0:n.x)&&"undefined"!==typeof(null===e||void 0===e||null===(r=e.positionAbsolute)||void 0===r?void 0:r.y);return[{x:(null===e||void 0===e||null===(o=e.positionAbsolute)||void 0===o?void 0:o.x)||0,y:(null===e||void 0===e||null===(i=e.positionAbsolute)||void 0===i?void 0:i.y)||0,width:(null===e||void 0===e?void 0:e.width)||0,height:(null===e||void 0===e?void 0:e.height)||0},a,!!s]}const $b=[{level:0,isMaxLevel:!0,edges:[]}];function Jb(e,t,n){const r=$m((0,o.useCallback)(n=>e?n.edges.filter(e=>{const r=t.get(e.source),o=t.get(e.target);return(null===r||void 0===r?void 0:r.width)&&(null===r||void 0===r?void 0:r.height)&&(null===o||void 0===o?void 0:o.width)&&(null===o||void 0===o?void 0:o.height)&&function(e){let{sourcePos:t,targetPos:n,sourceWidth:r,sourceHeight:o,targetWidth:i,targetHeight:a,width:s,height:l,transform:c}=e;const u={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x+r,n.x+i),y2:Math.max(t.y+o,n.y+a)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=uv({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:s/c[2],height:l/c[2]}),h=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),f=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(h*f)>0}({sourcePos:r.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:r.width,sourceHeight:r.height,targetWidth:o.width,targetHeight:o.height,width:n.width,height:n.height,transform:n.transform})}):n.edges,[e,t]));return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=-1;const o=e.reduce((e,o)=>{const i=pv(o.zIndex);let a=i?o.zIndex:0;if(n){var s,l;const e=t.get(o.target),n=t.get(o.source),r=o.selected||(null===e||void 0===e?void 0:e.selected)||(null===n||void 0===n?void 0:n.selected),c=Math.max((null===n||void 0===n||null===(s=n[gv])||void 0===s?void 0:s.z)||0,(null===e||void 0===e||null===(l=e[gv])||void 0===l?void 0:l.z)||0,1e3);a=(i?o.zIndex:0)+(r?c:0)}return e[a]?e[a].push(o):e[a]=[o],r=a>r?a:r,e},{}),i=Object.entries(o).map(e=>{let[t,n]=e;const o=+t;return{edges:n,level:o,isMaxLevel:o===r}});return 0===i.length?$b:i}(r,t,n)}const Zb={[Av.Arrow]:e=>{let{color:t="none",strokeWidth:n=1}=e;return o.createElement("polyline",{style:{stroke:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"})},[Av.ArrowClosed]:e=>{let{color:t="none",strokeWidth:n=1}=e;return o.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})}};const ew=e=>{let{id:t,type:n,color:r,width:i=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:l,orient:c="auto-start-reverse"}=e;const u=function(e){const t=Jm();return(0,o.useMemo)(()=>{var n,r;return Object.prototype.hasOwnProperty.call(Zb,e)?Zb[e]:(null===(n=(r=t.getState()).onError)||void 0===n||n.call(r,"009",Wm(e)),null)},[e])}(n);return u?o.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:"".concat(i),markerHeight:"".concat(a),viewBox:"-10 -10 20 20",markerUnits:s,orient:c,refX:"0",refY:"0"},o.createElement(u,{color:r,strokeWidth:l})):null},tw=e=>{let{defaultColor:t,rfId:n}=e;const r=$m((0,o.useCallback)((e=>{let{defaultColor:t,rfId:n}=e;return e=>{const r=[];return e.edges.reduce((e,o)=>([o.markerStart,o.markerEnd].forEach(o=>{if(o&&"object"===typeof o){const i=Yv(o,n);r.includes(i)||(e.push(Pt({id:i,color:o.color||t},o)),r.push(i))}}),e),[]).sort((e,t)=>e.id.localeCompare(t.id))}})({defaultColor:t,rfId:n}),[t,n]),(e,t)=>!(e.length!==t.length||e.some((e,n)=>e.id!==t[n].id)));return o.createElement("defs",null,r.map(e=>o.createElement(ew,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient})))};tw.displayName="MarkerDefinitions";var nw=(0,o.memo)(tw);const rw=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),ow=e=>{let{defaultMarkerColor:t,onlyRenderVisibleElements:n,elevateEdgesOnSelect:r,rfId:i,edgeTypes:a,noPanClassName:s,onEdgeContextMenu:l,onEdgeMouseEnter:c,onEdgeMouseMove:u,onEdgeMouseLeave:d,onEdgeClick:h,onEdgeDoubleClick:f,onReconnect:p,onReconnectStart:g,onReconnectEnd:m,reconnectRadius:v,children:y,disableKeyboardA11y:b}=e;const{edgesFocusable:w,edgesUpdatable:E,elementsSelectable:S,width:_,height:k,connectionMode:x,nodeInternals:C,onError:N}=$m(rw,Gh),T=Jb(n,C,r);return _?o.createElement(o.Fragment,null,T.map(e=>{let{level:n,edges:r,isMaxLevel:y}=e;return o.createElement("svg",{key:n,style:{zIndex:n},width:_,height:k,className:"react-flow__edges react-flow__container"},y&&o.createElement(nw,{defaultColor:t,rfId:i}),o.createElement("g",null,r.map(e=>{var t,n;const[r,y,_]=Qb(C.get(e.source)),[k,T,I]=Qb(C.get(e.target));if(!_||!I)return null;let A=e.type||"default";a[A]||(null===N||void 0===N||N("011",Xm(A)),A="default");const P=a[A]||a.default,O=x===Cv.Strict?T.target:(null!==(t=T.target)&&void 0!==t?t:[]).concat(null!==(n=T.source)&&void 0!==n?n:[]),R=Yb(y.source,e.sourceHandle),D=Yb(O,e.targetHandle),M=(null===R||void 0===R?void 0:R.position)||Pv.Bottom,L=(null===D||void 0===D?void 0:D.position)||Pv.Top,j=!!(e.focusable||w&&"undefined"===typeof e.focusable),U=e.reconnectable||e.updatable,F="undefined"!==typeof p&&(U||E&&"undefined"===typeof U);if(!R||!D)return null===N||void 0===N||N("008",qm(R,e)),null;const{sourceX:z,sourceY:V,targetX:B,targetY:H}=((e,t,n,r,o,i)=>{const a=Xb(n,e,t),s=Xb(i,r,o);return{sourceX:a.x,sourceY:a.y,targetX:s.x,targetY:s.y}})(r,R,M,k,D,L);return o.createElement(P,{key:e.id,id:e.id,className:Uh([e.className,s]),type:A,data:e.data,selected:!!e.selected,animated:!!e.animated,hidden:!!e.hidden,label:e.label,labelStyle:e.labelStyle,labelShowBg:e.labelShowBg,labelBgStyle:e.labelBgStyle,labelBgPadding:e.labelBgPadding,labelBgBorderRadius:e.labelBgBorderRadius,style:e.style,source:e.source,target:e.target,sourceHandleId:e.sourceHandle,targetHandleId:e.targetHandle,markerEnd:e.markerEnd,markerStart:e.markerStart,sourceX:z,sourceY:V,targetX:B,targetY:H,sourcePosition:M,targetPosition:L,elementsSelectable:S,onContextMenu:l,onMouseEnter:c,onMouseMove:u,onMouseLeave:d,onClick:h,onEdgeDoubleClick:f,onReconnect:p,onReconnectStart:g,onReconnectEnd:m,reconnectRadius:v,rfId:i,ariaLabel:e.ariaLabel,isFocusable:j,isReconnectable:F,pathOptions:"pathOptions"in e?e.pathOptions:void 0,interactionWidth:e.interactionWidth,disableKeyboardA11y:b})})))}),y):null};ow.displayName="EdgeRenderer";var iw=(0,o.memo)(ow);const aw=e=>"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],")");function sw(e){let{children:t}=e;const n=$m(aw);return o.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:n}},t)}const lw={[Pv.Left]:Pv.Right,[Pv.Right]:Pv.Left,[Pv.Top]:Pv.Bottom,[Pv.Bottom]:Pv.Top},cw=e=>{var t,n,r,i,a,s,l;let{nodeId:c,handleType:u,style:d,type:h=Iv.Bezier,CustomComponent:f,connectionStatus:p}=e;const{fromNode:g,handleId:m,toX:v,toY:y,connectionMode:b}=$m((0,o.useCallback)(e=>({fromNode:e.nodeInternals.get(c),handleId:e.connectionHandleId,toX:(e.connectionPosition.x-e.transform[0])/e.transform[2],toY:(e.connectionPosition.y-e.transform[1])/e.transform[2],connectionMode:e.connectionMode}),[c]),Gh),w=null===g||void 0===g||null===(t=g[gv])||void 0===t?void 0:t.handleBounds;let E=null===w||void 0===w?void 0:w[u];if(b===Cv.Loose&&(E=E||(null===w||void 0===w?void 0:w["source"===u?"target":"source"])),!g||!E)return null;const S=m?E.find(e=>e.id===m):E[0],_=S?S.x+S.width/2:(null!==(n=g.width)&&void 0!==n?n:0)/2,k=S?S.y+S.height/2:null!==(r=g.height)&&void 0!==r?r:0,x=(null!==(i=null===(a=g.positionAbsolute)||void 0===a?void 0:a.x)&&void 0!==i?i:0)+_,C=(null!==(s=null===(l=g.positionAbsolute)||void 0===l?void 0:l.y)&&void 0!==s?s:0)+k,N=null===S||void 0===S?void 0:S.position,T=N?lw[N]:null;if(!N||!T)return null;if(f)return o.createElement(f,{connectionLineType:h,connectionLineStyle:d,fromNode:g,fromHandle:S,fromX:x,fromY:C,toX:v,toY:y,fromPosition:N,toPosition:T,connectionStatus:p});let I="";const A={sourceX:x,sourceY:C,sourcePosition:N,targetX:v,targetY:y,targetPosition:T};return h===Iv.Bezier?[I]=Kv(A):h===Iv.Step?[I]=Uv(Pt(Pt({},A),{},{borderRadius:0})):h===Iv.SmoothStep?[I]=Uv(A):h===Iv.SimpleBezier?[I]=Rv(A):I="M".concat(x,",").concat(C," ").concat(v,",").concat(y),o.createElement("path",{d:I,fill:"none",className:"react-flow__connection-path",style:d})};cw.displayName="ConnectionLine";const uw=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function dw(e){let{containerStyle:t,style:n,type:r,component:i}=e;const{nodeId:a,handleType:s,nodesConnectable:l,width:c,height:u,connectionStatus:d}=$m(uw,Gh);return!!(a&&s&&c&&l)?o.createElement("svg",{style:t,width:c,height:u,className:"react-flow__edges react-flow__connectionline react-flow__container"},o.createElement("g",{className:Uh(["react-flow__connection",d])},o.createElement(cw,{nodeId:a,handleType:s,style:n,type:r,CustomComponent:i,connectionStatus:d}))):null}function hw(e,t){(0,o.useRef)(null),Jm();return(0,o.useMemo)(()=>t(e),[e])}const fw=e=>{let{nodeTypes:t,edgeTypes:n,onMove:r,onMoveStart:i,onMoveEnd:a,onInit:s,onNodeClick:l,onEdgeClick:c,onNodeDoubleClick:u,onEdgeDoubleClick:d,onNodeMouseEnter:h,onNodeMouseMove:f,onNodeMouseLeave:p,onNodeContextMenu:g,onSelectionContextMenu:m,onSelectionStart:v,onSelectionEnd:y,connectionLineType:b,connectionLineStyle:w,connectionLineComponent:E,connectionLineContainerStyle:S,selectionKeyCode:_,selectionOnDrag:k,selectionMode:x,multiSelectionKeyCode:C,panActivationKeyCode:N,zoomActivationKeyCode:T,deleteKeyCode:I,onlyRenderVisibleElements:A,elementsSelectable:P,selectNodesOnDrag:O,defaultViewport:R,translateExtent:D,minZoom:M,maxZoom:L,preventScrolling:j,defaultMarkerColor:U,zoomOnScroll:F,zoomOnPinch:z,panOnScroll:V,panOnScrollSpeed:B,panOnScrollMode:H,zoomOnDoubleClick:K,panOnDrag:W,onPaneClick:q,onPaneMouseEnter:G,onPaneMouseMove:X,onPaneMouseLeave:Y,onPaneScroll:Q,onPaneContextMenu:$,onEdgeContextMenu:J,onEdgeMouseEnter:Z,onEdgeMouseMove:ee,onEdgeMouseLeave:te,onReconnect:ne,onReconnectStart:re,onReconnectEnd:oe,reconnectRadius:ie,noDragClassName:ae,noWheelClassName:se,noPanClassName:le,elevateEdgesOnSelect:ce,disableKeyboardA11y:ue,nodeOrigin:de,nodeExtent:he,rfId:fe}=e;const pe=hw(t,jb),ge=hw(n,Gb);return function(e){const t=Zy(),n=(0,o.useRef)(!1);(0,o.useEffect)(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}(s),o.createElement(Lb,{onPaneClick:q,onPaneMouseEnter:G,onPaneMouseMove:X,onPaneMouseLeave:Y,onPaneContextMenu:$,onPaneScroll:Q,deleteKeyCode:I,selectionKeyCode:_,selectionOnDrag:k,selectionMode:x,onSelectionStart:v,onSelectionEnd:y,multiSelectionKeyCode:C,panActivationKeyCode:N,zoomActivationKeyCode:T,elementsSelectable:P,onMove:r,onMoveStart:i,onMoveEnd:a,zoomOnScroll:F,zoomOnPinch:z,zoomOnDoubleClick:K,panOnScroll:V,panOnScrollSpeed:B,panOnScrollMode:H,panOnDrag:W,defaultViewport:R,translateExtent:D,minZoom:M,maxZoom:L,onSelectionContextMenu:m,preventScrolling:j,noDragClassName:ae,noWheelClassName:se,noPanClassName:le,disableKeyboardA11y:ue},o.createElement(sw,null,o.createElement(iw,{edgeTypes:ge,onEdgeClick:c,onEdgeDoubleClick:d,onlyRenderVisibleElements:A,onEdgeContextMenu:J,onEdgeMouseEnter:Z,onEdgeMouseMove:ee,onEdgeMouseLeave:te,onReconnect:ne,onReconnectStart:re,onReconnectEnd:oe,reconnectRadius:ie,defaultMarkerColor:U,noPanClassName:le,elevateEdgesOnSelect:!!ce,disableKeyboardA11y:ue,rfId:fe},o.createElement(dw,{style:w,type:b,component:E,containerStyle:S})),o.createElement("div",{className:"react-flow__edgelabel-renderer"}),o.createElement(zb,{nodeTypes:pe,onNodeClick:l,onNodeDoubleClick:u,onNodeMouseEnter:h,onNodeMouseMove:f,onNodeMouseLeave:p,onNodeContextMenu:g,selectNodesOnDrag:O,onlyRenderVisibleElements:A,noPanClassName:le,noDragClassName:ae,disableKeyboardA11y:ue,nodeOrigin:de,nodeExtent:he,rfId:fe})))};fw.displayName="GraphView";var pw=(0,o.memo)(fw);const gw=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],mw={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:gw,nodeExtent:gw,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Cv.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:vv,isValidConnection:void 0},vw=()=>{return e=(e,t)=>Pt(Pt({},mw),{},{setNodes:n=>{const{nodeInternals:r,nodeOrigin:o,elevateNodesOnSelect:i}=t();e({nodeInternals:Wy(n,r,o,i)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(e=>Pt(Pt({},r),e))})},setDefaultNodesAndEdges:(n,r)=>{const o="undefined"!==typeof n,i="undefined"!==typeof r,a=o?Wy(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:a,edges:i?r:[],hasDefaultNodes:o,hasDefaultEdges:i})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:o,fitViewOnInit:i,fitViewOnInitDone:a,fitViewOnInitOptions:s,domNode:l,nodeOrigin:c}=t(),u=null===l||void 0===l?void 0:l.querySelector(".react-flow__viewport");if(!u)return;const d=window.getComputedStyle(u),{m22:h}=new window.DOMMatrixReadOnly(d.transform),f=n.reduce((e,t)=>{const n=o.get(t.id);if(null!==n&&void 0!==n&&n.hidden)o.set(n.id,Pt(Pt({},n),{},{[gv]:Pt(Pt({},n[gv]),{},{handleBounds:void 0})}));else if(n){const r=rv(t.nodeElement);r.width&&r.height&&(n.width!==r.width||n.height!==r.height||t.forceUpdate)&&(o.set(n.id,Pt(Pt({},n),{},{[gv]:Pt(Pt({},n[gv]),{},{handleBounds:{source:kb(".source",t.nodeElement,h,c),target:kb(".target",t.nodeElement,h,c)}})},r)),e.push({id:n.id,type:"dimensions",dimensions:r}))}return e},[]);Ky(o,c);const p=a||i&&!a&&qy(t,Pt({initial:!0},s));e({nodeInternals:new Map(o),fitViewOnInitDone:p}),(null===f||void 0===f?void 0:f.length)>0&&(null===r||void 0===r||r(f))},updateNodePositions:function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{triggerNodeChanges:o}=t(),i=e.map(e=>{const t={id:e.id,type:"position",dragging:r};return n&&(t.positionAbsolute=e.positionAbsolute,t.position=e.position),t});o(i)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:o,hasDefaultNodes:i,nodeOrigin:a,getNodes:s,elevateNodesOnSelect:l}=t();if(null!==n&&void 0!==n&&n.length){if(i){const t=Wy(hb(n,s()),o,a,l);e({nodeInternals:t})}null===r||void 0===r||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:o,getNodes:i}=t();let a,s=null;r?a=n.map(e=>pb(e,!0)):(a=gb(i(),n),s=gb(o,[])),Yy({changedNodes:a,changedEdges:s,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:o,getNodes:i}=t();let a,s=null;r?a=n.map(e=>pb(e,!0)):(a=gb(o,n),s=gb(i(),[])),Yy({changedNodes:s,changedEdges:a,get:t,set:e})},unselectNodesAndEdges:function(){let{nodes:n,edges:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{edges:o,getNodes:i}=t(),a=r||o;Yy({changedNodes:(n||i()).map(e=>(e.selected=!1,pb(e.id,!1))),changedEdges:a.map(e=>pb(e.id,!1)),get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:o}=t();null===r||void 0===r||r.scaleExtent([n,o]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:o}=t();null===r||void 0===r||r.scaleExtent([o,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;null===(r=t().d3Zoom)||void 0===r||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t();Yy({changedNodes:r().filter(e=>e.selected).map(e=>pb(e.id,!1)),changedEdges:n.filter(e=>e.selected).map(e=>pb(e.id,!1)),get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(e=>{e.positionAbsolute=iv(e.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:e=>{const{transform:n,width:r,height:o,d3Zoom:i,d3Selection:a,translateExtent:s}=t();if(!i||!a||!e.x&&!e.y)return!1;const l=wm.translate(n[0]+e.x,n[1]+e.y).scale(n[2]),c=[[0,0],[r,o]],u=null===i||void 0===i?void 0:i.constrain()(l,c,s);return i.transform(a,u),n[0]!==u.x||n[1]!==u.y||n[2]!==u.k},cancelConnection:()=>e({connectionNodeId:mw.connectionNodeId,connectionHandleId:mw.connectionHandleId,connectionHandleType:mw.connectionHandleType,connectionStatus:mw.connectionStatus,connectionStartHandle:mw.connectionStartHandle,connectionEndHandle:mw.connectionEndHandle}),reset:()=>e(Pt({},mw))}),t=Object.is,e?qh(e,t):qh;var e,t},yw=e=>{let{children:t}=e;const n=(0,o.useRef)(null);return n.current||(n.current=vw()),o.createElement(zm,{value:n.current},t)};yw.displayName="ReactFlowProvider";const bw=e=>{let{children:t}=e;return(0,o.useContext)(Fm)?o.createElement(o.Fragment,null,t):o.createElement(yw,null,t)};bw.displayName="ReactFlowWrapper";const ww={input:by,default:vy,output:Ey,group:Sy},Ew={default:Wv,straight:Vv,step:zv,smoothstep:Fv,simplebezier:Dv},Sw=[0,0],_w=[15,15],kw={x:0,y:0,zoom:1},xw={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Cw=(0,o.forwardRef)((e,t)=>{let{nodes:n,edges:r,defaultNodes:i,defaultEdges:a,className:s,nodeTypes:l=ww,edgeTypes:c=Ew,onNodeClick:u,onEdgeClick:d,onInit:h,onMove:f,onMoveStart:p,onMoveEnd:g,onConnect:m,onConnectStart:v,onConnectEnd:y,onClickConnectStart:b,onClickConnectEnd:w,onNodeMouseEnter:E,onNodeMouseMove:S,onNodeMouseLeave:_,onNodeContextMenu:k,onNodeDoubleClick:x,onNodeDragStart:C,onNodeDrag:N,onNodeDragStop:T,onNodesDelete:I,onEdgesDelete:A,onSelectionChange:P,onSelectionDragStart:O,onSelectionDrag:R,onSelectionDragStop:D,onSelectionContextMenu:M,onSelectionStart:L,onSelectionEnd:j,connectionMode:U=Cv.Strict,connectionLineType:F=Iv.Bezier,connectionLineStyle:z,connectionLineComponent:V,connectionLineContainerStyle:B,deleteKeyCode:H="Backspace",selectionKeyCode:K="Shift",selectionOnDrag:W=!1,selectionMode:q=Tv.Full,panActivationKeyCode:G="Space",multiSelectionKeyCode:X=(Ev()?"Meta":"Control"),zoomActivationKeyCode:Y=(Ev()?"Meta":"Control"),snapToGrid:Q=!1,snapGrid:$=_w,onlyRenderVisibleElements:J=!1,selectNodesOnDrag:Z=!0,nodesDraggable:ee,nodesConnectable:te,nodesFocusable:ne,nodeOrigin:re=Sw,edgesFocusable:oe,edgesUpdatable:ie,elementsSelectable:ae,defaultViewport:se=kw,minZoom:le=.5,maxZoom:ce=2,translateExtent:ue=gw,preventScrolling:de=!0,nodeExtent:he,defaultMarkerColor:fe="#b1b1b7",zoomOnScroll:pe=!0,zoomOnPinch:ge=!0,panOnScroll:me=!1,panOnScrollSpeed:ve=.5,panOnScrollMode:ye=Nv.Free,zoomOnDoubleClick:be=!0,panOnDrag:we=!0,onPaneClick:Ee,onPaneMouseEnter:Se,onPaneMouseMove:_e,onPaneMouseLeave:ke,onPaneScroll:xe,onPaneContextMenu:Ce,children:Ne,onEdgeContextMenu:Te,onEdgeDoubleClick:Ie,onEdgeMouseEnter:Ae,onEdgeMouseMove:Pe,onEdgeMouseLeave:Oe,onEdgeUpdate:Re,onEdgeUpdateStart:De,onEdgeUpdateEnd:Me,onReconnect:Le,onReconnectStart:je,onReconnectEnd:Ue,reconnectRadius:Fe=10,edgeUpdaterRadius:ze=10,onNodesChange:Ve,onEdgesChange:Be,noDragClassName:He="nodrag",noWheelClassName:Ke="nowheel",noPanClassName:We="nopan",fitView:qe=!1,fitViewOptions:Ge,connectOnClick:Xe=!0,attributionPosition:Ye,proOptions:Qe,defaultEdgeOptions:$e,elevateNodesOnSelect:Je=!0,elevateEdgesOnSelect:Ze=!1,disableKeyboardA11y:et=!1,autoPanOnConnect:tt=!0,autoPanOnNodeDrag:nt=!0,connectionRadius:rt=20,isValidConnection:ot,onError:it,style:at,id:st,nodeDragThreshold:lt}=e,ct=Hd(e,Um);const ut=st||"1";return o.createElement("div",Pt(Pt({},ct),{},{style:Pt(Pt({},at),xw),ref:t,className:Uh(["react-flow",s]),"data-testid":"rf__wrapper",id:st}),o.createElement(bw,null,o.createElement(pw,{onInit:h,onMove:f,onMoveStart:p,onMoveEnd:g,onNodeClick:u,onEdgeClick:d,onNodeMouseEnter:E,onNodeMouseMove:S,onNodeMouseLeave:_,onNodeContextMenu:k,onNodeDoubleClick:x,nodeTypes:l,edgeTypes:c,connectionLineType:F,connectionLineStyle:z,connectionLineComponent:V,connectionLineContainerStyle:B,selectionKeyCode:K,selectionOnDrag:W,selectionMode:q,deleteKeyCode:H,multiSelectionKeyCode:X,panActivationKeyCode:G,zoomActivationKeyCode:Y,onlyRenderVisibleElements:J,selectNodesOnDrag:Z,defaultViewport:se,translateExtent:ue,minZoom:le,maxZoom:ce,preventScrolling:de,zoomOnScroll:pe,zoomOnPinch:ge,zoomOnDoubleClick:be,panOnScroll:me,panOnScrollSpeed:ve,panOnScrollMode:ye,panOnDrag:we,onPaneClick:Ee,onPaneMouseEnter:Se,onPaneMouseMove:_e,onPaneMouseLeave:ke,onPaneScroll:xe,onPaneContextMenu:Ce,onSelectionContextMenu:M,onSelectionStart:L,onSelectionEnd:j,onEdgeContextMenu:Te,onEdgeDoubleClick:Ie,onEdgeMouseEnter:Ae,onEdgeMouseMove:Pe,onEdgeMouseLeave:Oe,onReconnect:null!==Le&&void 0!==Le?Le:Re,onReconnectStart:null!==je&&void 0!==je?je:De,onReconnectEnd:null!==Ue&&void 0!==Ue?Ue:Me,reconnectRadius:null!==Fe&&void 0!==Fe?Fe:ze,defaultMarkerColor:fe,noDragClassName:He,noWheelClassName:Ke,noPanClassName:We,elevateEdgesOnSelect:Ze,rfId:ut,disableKeyboardA11y:et,nodeOrigin:re,nodeExtent:he}),o.createElement(Oy,{nodes:n,edges:r,defaultNodes:i,defaultEdges:a,onConnect:m,onConnectStart:v,onConnectEnd:y,onClickConnectStart:b,onClickConnectEnd:w,nodesDraggable:ee,nodesConnectable:te,nodesFocusable:ne,edgesFocusable:oe,edgesUpdatable:ie,elementsSelectable:ae,elevateNodesOnSelect:Je,minZoom:le,maxZoom:ce,nodeExtent:he,onNodesChange:Ve,onEdgesChange:Be,snapToGrid:Q,snapGrid:$,connectionMode:U,translateExtent:ue,connectOnClick:Xe,defaultEdgeOptions:$e,fitView:qe,fitViewOptions:Ge,onNodesDelete:I,onEdgesDelete:A,onNodeDragStart:C,onNodeDrag:N,onNodeDragStop:T,onSelectionDrag:R,onSelectionDragStart:O,onSelectionDragStop:D,noPanClassName:We,nodeOrigin:re,rfId:ut,autoPanOnConnect:tt,autoPanOnNodeDrag:nt,onError:it,connectionRadius:rt,isValidConnection:ot,nodeDragThreshold:lt}),o.createElement(Ty,{onSelectionChange:P}),Ne,o.createElement(tv,{proOptions:Qe,position:Ye}),o.createElement(Fy,{rfId:ut,disableKeyboardA11y:et})))});Cw.displayName="ReactFlow";function Nw(e){return t=>{const[n,r]=(0,o.useState)(t),i=(0,o.useCallback)(t=>r(n=>e(t,n)),[]);return[n,r,i]}}Nw(hb),Nw(fb);const Tw=["children","className"];function Iw(){return o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},o.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Aw(){return o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},o.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Pw(){return o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},o.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Ow(){return o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},o.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Rw(){return o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},o.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Dw=e=>{let{children:t,className:n}=e,r=Hd(e,Tw);return o.createElement("button",Pt({type:"button",className:Uh(["react-flow__controls-button",n])},r),t)};Dw.displayName="ControlButton";const Mw=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Lw=e=>{let{style:t,showZoom:n=!0,showFitView:r=!0,showInteractive:i=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:l,onFitView:c,onInteractiveChange:u,className:d,children:h,position:f="bottom-left"}=e;const p=Jm(),[g,m]=(0,o.useState)(!1),{isInteractive:v,minZoomReached:y,maxZoomReached:b}=$m(Mw,Gh),{zoomIn:w,zoomOut:E,fitView:S}=Zy();if((0,o.useEffect)(()=>{m(!0)},[]),!g)return null;return o.createElement(ev,{className:Uh(["react-flow__controls",d]),position:f,style:t,"data-testid":"rf__controls"},n&&o.createElement(o.Fragment,null,o.createElement(Dw,{onClick:()=>{w(),null===s||void 0===s||s()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:b},o.createElement(Iw,null)),o.createElement(Dw,{onClick:()=>{E(),null===l||void 0===l||l()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:y},o.createElement(Aw,null))),r&&o.createElement(Dw,{className:"react-flow__controls-fitview",onClick:()=>{S(a),null===c||void 0===c||c()},title:"fit view","aria-label":"fit view"},o.createElement(Pw,null)),i&&o.createElement(Dw,{className:"react-flow__controls-interactive",onClick:()=>{p.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),null===u||void 0===u||u(!v)},title:"toggle interactivity","aria-label":"toggle interactivity"},v?o.createElement(Rw,null):o.createElement(Ow,null)),h)};Lw.displayName="Controls";var jw,Uw=(0,o.memo)(Lw);function Fw(e){let{color:t,dimensions:n,lineWidth:r}=e;return o.createElement("path",{stroke:t,strokeWidth:r,d:"M".concat(n[0]/2," 0 V").concat(n[1]," M0 ").concat(n[1]/2," H").concat(n[0])})}function zw(e){let{color:t,radius:n}=e;return o.createElement("circle",{cx:n,cy:n,r:n,fill:t})}!function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"}(jw||(jw={}));const Vw={[jw.Dots]:"#91919a",[jw.Lines]:"#eee",[jw.Cross]:"#e2e2e2"},Bw={[jw.Dots]:1,[jw.Lines]:1,[jw.Cross]:6},Hw=e=>({transform:e.transform,patternId:"pattern-".concat(e.rfId)});function Kw(e){let{id:t,variant:n=jw.Dots,gap:r=20,size:i,lineWidth:a=1,offset:s=2,color:l,style:c,className:u}=e;const d=(0,o.useRef)(null),{transform:h,patternId:f}=$m(Hw,Gh),p=l||Vw[n],g=i||Bw[n],m=n===jw.Dots,v=n===jw.Cross,y=Array.isArray(r)?r:[r,r],b=[y[0]*h[2]||1,y[1]*h[2]||1],w=g*h[2],E=v?[w,w]:b,S=m?[w/s,w/s]:[E[0]/s,E[1]/s];return o.createElement("svg",{className:Uh(["react-flow__background",u]),style:Pt(Pt({},c),{},{position:"absolute",width:"100%",height:"100%",top:0,left:0}),ref:d,"data-testid":"rf__background"},o.createElement("pattern",{id:f+t,x:h[0]%b[0],y:h[1]%b[1],width:b[0],height:b[1],patternUnits:"userSpaceOnUse",patternTransform:"translate(-".concat(S[0],",-").concat(S[1],")")},m?o.createElement(zw,{color:p,radius:w/s}):o.createElement(Fw,{dimensions:E,color:p,lineWidth:a})),o.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#".concat(f+t,")")}))}Kw.displayName="Background";var Ww=(0,o.memo)(Kw);const qw=e=>{let{nodes:t,edges:n,onNodesChange:r,onEdgesChange:o}=e;const{theme:i}=ze();return(0,Ue.jsx)("div",{style:{width:"100%",height:"100%"},children:(0,Ue.jsxs)(Cw,{nodes:t,edges:n,onNodesChange:r,onEdgesChange:o,fitView:!0,children:[(0,Ue.jsx)(Uw,{}),(0,Ue.jsx)(Ww,{variant:"dots",gap:12,size:1,color:"light"===i?"#ee6983":"#9d85b6"})]})})},Gw=()=>{const{processedNotes:e,mindmapData:t,setMindmapData:n}=nh(),r=ie(),[i,a]=(0,o.useState)((null===t||void 0===t?void 0:t.nodes)||[]),[s,l]=(0,o.useState)((null===t||void 0===t?void 0:t.edges)||[]),[c,u]=(0,o.useState)(!t),[d,h]=(0,o.useState)(null),f=(0,o.useCallback)(e=>a(t=>hb(e,t)),[a]),p=(0,o.useCallback)(e=>l(t=>fb(e,t)),[l]);return(0,o.useEffect)(()=>{if(!e)return void r("/");(async()=>{if(!t){if(u(!0),h(null),Fd&&(null===Vd||void 0===Vd||!Vd.currentUser))return h("Please sign in to generate a mindmap."),void u(!1);try{const t=await mh(e);n(t),a(t.nodes),l(t.edges)}catch(r){console.error("Error generating mindmap:",r),h("Could not generate mindmap. Please try again.")}finally{u(!1)}}})()},[e,t,n,r]),(0,Ue.jsxs)("div",{className:"w-full flex flex-col items-center",children:[(0,Ue.jsx)("h1",{className:"text-4xl font-bold mb-8 font-display",children:"Mindmap Visualization"}),(0,Ue.jsxs)("div",{className:"w-full h-[65vh] rounded-2xl bg-light-card/30 dark:bg-dark-card/30 border border-white/20 shadow-lg overflow-hidden",children:[c&&(0,Ue.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Ue.jsx)(Ph,{text:"Building mindmap..."})}),d&&(0,Ue.jsx)("p",{className:"text-red-500 text-center mt-8",children:d}),!c&&!d&&i.length>0&&(0,Ue.jsx)(qw,{nodes:i,edges:s,onNodesChange:f,onEdgesChange:p})]})]})},Xw=Qd("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Yw=()=>{const{processedNotes:e}=nh(),t=ie(),[n,r]=(0,o.useState)([]),[i,a]=(0,o.useState)(""),[s,l]=(0,o.useState)(!1),c=(0,o.useRef)(null);(0,o.useEffect)(()=>{e?0===n.length&&r([{sender:"ai",text:"Hello! Ask me anything about your notes."}]):t("/")},[e,t,n]),(0,o.useEffect)(()=>{var e;null===(e=c.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[n]);const u=async()=>{const t=i.trim();if(!t||s)return;if(Fd&&(null===Vd||void 0===Vd||!Vd.currentUser))return void alert("Please sign in to chat with your notes.");const o=[...n,{sender:"user",text:t}];r(o),a(""),l(!0);try{const n=o.filter(e=>"ai"!==e.sender||!1===e.text.startsWith("Hello!")).map(e=>({role:"user"===e.sender?"user":"assistant",content:e.text})),i=await vh({processedNotes:e,history:n.slice(0,-1).reduce((e,t,r)=>{var o;"user"===t.role&&e.push({question:t.content,answer:(null===(o=n[r+1])||void 0===o?void 0:o.content)||""});return e},[]),question:t});r(e=>[...e,{sender:"ai",text:i.answer}])}catch(c){console.error("Chat error:",c),r(e=>[...e,{sender:"ai",text:"Sorry, I ran into an error. Please try again."}])}finally{l(!1)}};return(0,Ue.jsxs)("div",{className:"max-w-3xl mx-auto flex flex-col h-[75vh]",children:[(0,Ue.jsx)("h1",{className:"text-4xl font-bold mb-4 text-center font-display",children:"Chat with Your Notes"}),(0,Ue.jsx)("div",{className:"flex-grow p-4 overflow-y-auto rounded-2xl glass-card",children:(0,Ue.jsxs)("div",{className:"flex flex-col gap-4",children:[n.map((e,t)=>(0,Ue.jsx)("div",{className:"chat-message ".concat(e.sender),children:(0,Ue.jsx)("p",{children:e.text})},t)),s&&(0,Ue.jsx)("div",{className:"chat-message ai",children:(0,Ue.jsx)("span",{className:"typing-indicator"})}),(0,Ue.jsx)("div",{ref:c})]})}),(0,Ue.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,Ue.jsx)("input",{type:"text",value:i,onChange:e=>a(e.target.value),onKeyUp:e=>"Enter"===e.key&&u(),placeholder:"Ask a question...",className:"flex-grow p-3 rounded-full bg-white/30 dark:bg-black/20 border border-light-accent/30 dark:border-dark-button/30 focus:ring-2 focus:ring-light-accent dark:focus:ring-dark-button focus:outline-none backdrop-blur-md transition placeholder:text-light-heading/50 dark:placeholder:text-dark-glow/50",disabled:s}),(0,Ue.jsx)("button",{onClick:u,disabled:s||!i.trim(),className:"w-12 h-12 flex items-center justify-center rounded-full text-white bg-gradient-to-r from-light-accent to-light-heading dark:bg-gradient-to-r dark:from-dark-button dark:to-dark-accent dark:text-dark-bg disabled:opacity-50 disabled:cursor-not-allowed",children:(0,Ue.jsx)(Xw,{size:20})})]}),(0,Ue.jsx)("style",{jsx:!0,children:"\n        .chat-message { @apply p-3 rounded-2xl max-w-[80%]; }\n        .chat-message.ai { @apply bg-light-card dark:bg-dark-card self-start rounded-bl-none; }\n        .chat-message.user { @apply bg-light-accent text-white dark:bg-dark-button dark:text-dark-bg self-end rounded-br-none; }\n        .typing-indicator {\n            display: inline-block;\n            width: 24px;\n            height: 10px;\n            background: radial-gradient(circle at 3px 50%, currentColor 3px, transparent 0) 0 0,\n                        radial-gradient(circle at 3px 50%, currentColor 3px, transparent 0) 9px 0,\n                        radial-gradient(circle at 3px 50%, currentColor 3px, transparent 0) 18px 0;\n            background-size: 6px 6px;\n            background-repeat: no-repeat;\n            animation: typing 1s infinite;\n        }\n        @keyframes typing {\n            33% { background-position: 0 0, 9px 0, 18px 0; }\n            66% { background-position: 0 0, 9px 0, 18px 0; }\n            0%, 50%, 100% { background-position: 0 -10px, 9px 0, 18px 0; }\n            16.5%, 33.5%, 82.5% { background-position: 0 0, 9px -10px, 18px 0; }\n            25%, 66.5% { background-position: 0 0, 9px 0, 18px -10px; }\n        }\n      "})]})},Qw=Qd("BookMarked",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["polyline",{points:"10 2 10 10 13 7 16 10 16 2",key:"13o6vz"}]]),$w=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)(!0),[i,a]=(0,o.useState)(null),[s,l]=(0,o.useState)(null),{setProcessedNotes:c}=nh(),u=ie();(0,o.useEffect)(()=>{if(!Fd)return d(),()=>{};const e=qo(Vd,e=>{e?d():(a("Please sign in to view your history."),r(!1))});return()=>e()},[]);const d=async()=>{r(!0),a(null);try{const e=await yh();t(e),Fd||a(null)}catch(e){console.error("Error fetching history:",e),a("Could not load your saved notes. Please try again later.")}finally{r(!1)}};return n?(0,Ue.jsx)("div",{className:"flex justify-center items-center h-96",children:(0,Ue.jsx)(Ph,{text:"Loading your history..."})}):i?(0,Ue.jsx)("div",{className:"text-center text-red-500",children:i}):(0,Ue.jsxs)("div",{className:"animate-fade-in",children:[(0,Ue.jsx)("h1",{className:"text-4xl font-bold font-display mb-8 text-center",children:"Your Saved Notes"}),0===e.length?(0,Ue.jsxs)("div",{className:"text-center text-light-heading/80 dark:text-dark-glow/80",children:[(0,Ue.jsx)(Qw,{size:48,className:"mx-auto mb-4"}),(0,Ue.jsx)("p",{className:"text-xl",children:"You haven't saved any notes yet."}),(0,Ue.jsx)("p",{children:'Process some notes and click "Save" to see them here.'})]}):(0,Ue.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>{return(0,Ue.jsxs)("div",{className:"history-card",children:[(0,Ue.jsx)("p",{className:"font-semibold text-lg line-clamp-3",children:e.summary}),(0,Ue.jsxs)("p",{className:"text-sm text-light-heading/70 dark:text-dark-glow/70 mt-2",children:["Saved on ",(t=e.createdAt,new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}))]}),(0,Ue.jsx)("button",{onClick:()=>(async e=>{l(e);try{const t=await bh(e);c(t),u("/output")}catch(t){console.error("Error loading note ".concat(e,":"),t),alert("Failed to load the note. It may have been deleted or there was a network issue.")}finally{l(null)}})(e.noteId),disabled:s===e.noteId,className:"w-full mt-4 px-4 py-2 rounded-lg font-semibold border-2 border-light-accent dark:border-dark-button hover:bg-light-accent/20 dark:hover:bg-dark-button/20 transition-colors disabled:opacity-50",children:s===e.noteId?"Loading...":"View Note"})]},e.noteId);var t})}),(0,Ue.jsx)("style",{jsx:!0,children:"\n        .history-card {\n          @apply p-6 rounded-2xl bg-light-card/60 dark:bg-dark-card/60 border border-white/20 shadow-lg backdrop-blur-xl flex flex-col justify-between transition-transform hover:scale-105;\n        }\n        .line-clamp-3 {\n            overflow: hidden;\n            display: -webkit-box;\n            -webkit-box-orient: vertical;\n            -webkit-line-clamp: 3;\n        }\n        .animate-fade-in {\n          animation: fadeIn 0.5s ease-in-out;\n        }\n        @keyframes fadeIn {\n          from { opacity: 0; transform: translateY(10px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n      "})]})};const Jw=function(){return(0,Ue.jsx)(Ae,{children:(0,Ue.jsxs)("div",{className:"min-h-screen font-sans",children:[(0,Ue.jsx)(eh,{}),(0,Ue.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,Ue.jsxs)(Se,{children:[(0,Ue.jsx)(we,{path:"/",element:(0,Ue.jsx)(Ah,{})}),(0,Ue.jsx)(we,{path:"/processing",element:(0,Ue.jsx)(Oh,{})}),(0,Ue.jsx)(we,{path:"/output",element:(0,Ue.jsx)(jh,{})}),(0,Ue.jsx)(we,{path:"/mindmap",element:(0,Ue.jsx)(Gw,{})}),(0,Ue.jsx)(we,{path:"/chat",element:(0,Ue.jsx)(Yw,{})}),(0,Ue.jsx)(we,{path:"/history",element:(0,Ue.jsx)($w,{})})]})})]})})};a.createRoot(document.getElementById("root")).render((0,Ue.jsx)(o.StrictMode,{children:(0,Ue.jsx)(Ve,{children:(0,Ue.jsx)(rh,{children:(0,Ue.jsx)(Jw,{})})})}))})();
//# sourceMappingURL=main.06d20b5d.js.map